{
	"ID": "20230419162051-f9r9rer",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230419162051-f9r9rer",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20230419162051-ikxd67m\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230419162051-wyyxkgp\u0026quot;,\u0026quot;scrollTop\u0026quot;:3005,\u0026quot;focusId\u0026quot;:\u0026quot;20230419162051-vsrhzi6\u0026quot;,\u0026quot;focusStart\u0026quot;:65,\u0026quot;focusEnd\u0026quot;:65}",
		"title": "监控方案 - VictoriaMetrics ",
		"updated": "20230419163740"
	},
	"Children": [
		{
			"ID": "20230419162051-ikxd67m",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-ikxd67m",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "简介"
				}
			]
		},
		{
			"ID": "20230419162051-hk68n4g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-hk68n4g",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://docs.victoriametrics.com/",
					"TextMarkTextContent": "VictoriaMetrics"
				},
				{
					"Type": "NodeText",
					"Data": " 提供了单节点版（single-node）和集群版（cluster）两套解决方案，根据业务需求选择即可。"
				}
			]
		},
		{
			"ID": "20230419162051-3qopulx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-3qopulx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "单节点版"
				},
				{
					"Type": "NodeText",
					"Data": "：直接运行一个二进制文件，官方建议采集数据点低于100w/s，推荐使用单节点版，简单好维护。"
				}
			]
		},
		{
			"ID": "20230419162051-cy0imv1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-cy0imv1",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群版"
				},
				{
					"Type": "NodeText",
					"Data": "：支持数据水平拆分，把功能拆分为vmstorage、 vminsert、vmselect，如果要替换Prometheus，还需要vmagent、vmalert。"
				}
			]
		},
		{
			"ID": "20230419162051-x958i56",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-x958i56",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为什么选择VictoriaMetrics？"
				}
			]
		},
		{
			"ID": "20230419162051-5ck3zzm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-5ck3zzm",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "VictoriaMetrics 是一个新兴的监控解决方案。它借助 Prometheus 强大的 exporter 生态、成熟的规范、服务发现等优点等，融入到 Prometheus 生态中，有效地解决了 Prometheus 实践中的痛点。VictoriaMetrics可以作为Prometheus的长期远程存储方案，当然VictoriaMetrics也可以完全取代Prometheus，因为VictoriaMetrics基本支持Prometheus配置文件、PromQL、各类API、数据格式等等。作为新兴的解决方案，VictoriaMetrics有如下优点："
				}
			]
		},
		{
			"ID": "20230419162051-c27vrra",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-c27vrra",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-7onp6lz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-7onp6lz",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-mtdkxp6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-mtdkxp6",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "远程存储"
								},
								{
									"Type": "NodeText",
									"Data": "：可作为单一或多个Prometheus的远程存储；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-02rpdnp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-02rpdnp",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-dr27n5k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-dr27n5k",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "安装简单"
								},
								{
									"Type": "NodeText",
									"Data": "：单节点架构一条命令即可完成安装；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-nwq7h3c",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-nwq7h3c",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-3not5dn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-3not5dn",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "兼容性好"
								},
								{
									"Type": "NodeText",
									"Data": "：配置文件、PromQL、API、数据格式基本和Prometheus兼容；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-64jpalq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-64jpalq",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-0dednwy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-0dednwy",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "内存友好"
								},
								{
									"Type": "NodeText",
									"Data": "：在处理数百万个单独的时间序列时，它使用的RAM比InfluxDB少10倍，比Prometheus、Thanos或Cortex少7倍；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-9x10mbf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-9x10mbf",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-gxyygvx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-gxyygvx",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "存储友好"
								},
								{
									"Type": "NodeText",
									"Data": "：通过数据高压缩比，与Prometheus、Thanos或Cortex相比，所需的存储空间少了7倍；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-79ntayh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-79ntayh",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-73ww9jl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-73ww9jl",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "性能强劲"
								},
								{
									"Type": "NodeText",
									"Data": "：单节点的VictoriaMetrics可以替代用Thanos、M3DB、Cortex、InfluxDB或TimescaleDB等竞争解决方案构建的中等规模的集群；查询性能比Prometheus或Thanos更快；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-sagifcg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-sagifcg",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-lm4060f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-lm4060f",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "全局视图"
								},
								{
									"Type": "NodeText",
									"Data": "：多个Prometheus的数据汇聚到VictoriaMetrics中，可以通过单个查询来查询这些数据；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-4i8ertk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-4i8ertk",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-w3vwc35",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-w3vwc35",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "水平扩展"
								},
								{
									"Type": "NodeText",
									"Data": "：集群版本的各个组件都支持水平扩展。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-3cud0kj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-3cud0kj",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "方案选择"
				}
			]
		},
		{
			"ID": "20230419162051-2frkm16",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-2frkm16",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "我们已经知道，VictoriaMetrics提供了单节点和集群版两套解决方案，那么这两套方案如何选择呢？"
				}
			]
		},
		{
			"ID": "20230419162051-awhazlm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-awhazlm",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "与其他解决方案(Prometheus、Thanos、Cortex、TimescaleDB、InfluxDB、QuestDB、M3DB)相比，VictoriaMetrics在生产工作负载上使用更少的CPU、RAM和存储空间。官方说明，在以下场景中，单节点可以完美运行："
				}
			]
		},
		{
			"ID": "20230419162051-dpnz55l",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-dpnz55l",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-o6x6bds",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-o6x6bds",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-2wvsdmp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-2wvsdmp",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "样本摄入率：150+万/s"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-9jjifi6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-9jjifi6",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-bju2ef5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-bju2ef5",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "活跃时间序列：5000+万"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-ug43suk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-ug43suk",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-2omgtz0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-2omgtz0",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "总时间序列：50+亿"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-sfmugxf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-sfmugxf",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-hkro630",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-hkro630",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "时间序列波动率：每天1.5+亿个新时间序列"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-btnlfw9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-btnlfw9",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-4r9uage",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-4r9uage",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "样本总数：10+万亿"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-jhnvpu1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-jhnvpu1",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-pbg62e6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-pbg62e6",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "查询：200+ QPS"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-i8szyoa",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-i8szyoa",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-wlqdbmz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-wlqdbmz",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "查询延迟（P99）：1秒"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-2s9qxbx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-2s9qxbx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "同时，官方建议，对于每秒摄取速率低于100万数据点的情况，建议使用单节点版本而不是集群版本。单节点版本可以完美地根据CPU核数、RAM和可用存储空间的数量进行扩展。单节点版本比集群版本更容易配置和维护。"
				}
			]
		},
		{
			"ID": "20230419162051-31eza7v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-31eza7v",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "但是，当遇到如下问题时可以考虑集群方案："
				}
			]
		},
		{
			"ID": "20230419162051-ekyntv6",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-ekyntv6",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-hjjcuxq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-hjjcuxq",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-gyb30e3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-gyb30e3",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "抓取数据点过高"
								},
								{
									"Type": "NodeText",
									"Data": "​：大于100w/s数据点抓取（如果lable内容过多,会低于这个值）；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-e1c08kq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-e1c08kq",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-o1k6z52",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-o1k6z52",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "海量数据存储"
								},
								{
									"Type": "NodeText",
									"Data": "​：单机磁盘容量已经满足不了，更长时间的存储、海量数据存储需求；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-3rljse2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-3rljse2",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-knxc1s2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-knxc1s2",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "更高性能需求"
								},
								{
									"Type": "NodeText",
									"Data": "​：要求更高的写入和查询性能；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-0tchzhd",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-0tchzhd",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-qbyfdq4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-qbyfdq4",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "原生高可用"
								},
								{
									"Type": "NodeText",
									"Data": "​：VictoriaMetrics集群方案，原生支持高可用；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-3rec16d",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-3rec16d",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-c1fabdp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-c1fabdp",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "多租户"
								},
								{
									"Type": "NodeText",
									"Data": "​：想要数据多租户管理。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-yg0dnjd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-yg0dnjd",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "当然，方案的选择还要考虑到数据增长的问题，对于当前数据量较小，但是未来数据量可能会急剧增长并可能触发单节点版性能瓶颈的情况，可以考虑使用集群版并逐步扩容，避免从单节点升级为集群的迁移问题。"
				}
			]
		},
		{
			"ID": "20230419162051-0hircn7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-0hircn7",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "单节点"
				}
			]
		},
		{
			"ID": "20230419162051-q1grpi4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-q1grpi4",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image2022-3-9_18-11-41-20230419162051-euv6wph.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-us7t5sz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-us7t5sz",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "上图即为单节点版本的架构，其中："
				}
			]
		},
		{
			"ID": "20230419162051-et8rx07",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-et8rx07",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-62d61io",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-62d61io",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-bwiglx9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-bwiglx9",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "VictoriaMetrics"
								},
								{
									"Type": "NodeText",
									"Data": "：提供数据采集、存储、查询的能力；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-m7u6k9e",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-m7u6k9e",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-b6lsftf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-b6lsftf",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmalert"
								},
								{
									"Type": "NodeText",
									"Data": "：告警规则的计算及告警发出；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-deb3env",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-deb3env",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-lwcjbtm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-lwcjbtm",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "alertmanager"
								},
								{
									"Type": "NodeText",
									"Data": "：告警分发；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-uxuy8mw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-uxuy8mw",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-2g1mj0s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-2g1mj0s",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "grafana"
								},
								{
									"Type": "NodeText",
									"Data": "：大屏展示；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-lu0mvtt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-lu0mvtt",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-f03jez4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-f03jez4",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "exporter"
								},
								{
									"Type": "NodeText",
									"Data": "：提供metrics接口，供VictoriaMetrics采集。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-w2io855",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-w2io855",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "因为VictoriaMetrics本身具备服务发现和数据抓取的能力，该架构中可以不使用Prometheus作为数据采集器。当然，为了分散采集压力，可以考虑使用Prometheus采集分片并将数据远程写到VictoriaMetrics，根据官方建议，如果只是使用Prometheus的数据采集功能，可以使用vmagent代替，vmagent与Prometheus相比，使用更少的RAM、CPU、磁盘IO和网络带宽。"
				}
			]
		},
		{
			"ID": "20230419162051-eaw2alr",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-eaw2alr",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "集群版"
				}
			]
		},
		{
			"ID": "20230419163017-oeu9g9p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419163017-oeu9g9p",
				"updated": "20230419163017"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20230419163017-4g2f4k3.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-x3tf2xx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-x3tf2xx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "上图即为集群版本的架构，其中："
				}
			]
		},
		{
			"ID": "20230419162051-30e8qh8",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-30e8qh8",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-hmcvyct",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-hmcvyct",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-hni78gm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-hni78gm",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vminsert"
								},
								{
									"Type": "NodeText",
									"Data": "：接收远程写的数据并将数据分发到可用的vmstorage节点上；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-w4bvc6v",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-w4bvc6v",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-h2xb37i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-h2xb37i",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmstorage"
								},
								{
									"Type": "NodeText",
									"Data": "：有状态服务，提供时序数据的持久存储能力；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-b8wwn2g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-b8wwn2g",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-yfxfsqy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-yfxfsqy",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmselect"
								},
								{
									"Type": "NodeText",
									"Data": "：接收客户端的查询请求，并从vmstorage获取数据执行查询过程；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-gokjz5f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-gokjz5f",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-no82pn9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-no82pn9",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmalert"
								},
								{
									"Type": "NodeText",
									"Data": "：计算告警规则，发送告警通知；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-24n1uwq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-24n1uwq",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-doysx4j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-doysx4j",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "alertmanager"
								},
								{
									"Type": "NodeText",
									"Data": "：告警通知分发；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-xs4iae6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-xs4iae6",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-qynl66e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-qynl66e",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "grafana"
								},
								{
									"Type": "NodeText",
									"Data": "：大屏展示；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-j1j0ewl",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-j1j0ewl",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-c4gg8tg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-c4gg8tg",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "remote_writer"
								},
								{
									"Type": "NodeText",
									"Data": "：各种数据采集器，将数据远程写到VictoriaMetrics集群。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-4nhxgo4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-4nhxgo4",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "VictoriaMetrics集群的架构足够简单，整个集群的性能和容量随着节点的增加而增加："
				}
			]
		},
		{
			"ID": "20230419162051-8e3k1ft",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-8e3k1ft",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-5pagh0f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-5pagh0f",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-rm0v4hk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-rm0v4hk",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vminsert和vmselect节点无状态，可以随时添加或删除。添加更多vminsert节点可以扩展数据摄取率，而添加更多vmselect节点可以扩展查询效率；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-dvn1jat",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-dvn1jat",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-s5hskjr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-s5hskjr",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmstorage是有状态的服务，通过增加vmstorage节点可以扩展集群存储容量。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-wgvht5z",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-wgvht5z",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "容量规划"
				}
			]
		},
		{
			"ID": "20230419162051-b7wt92n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-b7wt92n",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "与其他解决方案(Prometheus、Thanos、Cortex、TimescaleDB、InfluxDB、QuestDB、M3DB)相比，VictoriaMetrics在生产工作负载上使用更少的CPU、RAM和存储空间。"
				}
			]
		},
		{
			"ID": "20230419162051-wbiwklo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-wbiwklo",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "建议保留以下数量的空闲资源："
				}
			]
		},
		{
			"ID": "20230419162051-vf87vn4",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-vf87vn4",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-ztowefw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-ztowefw",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-j44j8dq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-j44j8dq",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "所有节点类型中50%的空闲RAM，以减少在工作负载临时峰值期间发生OOM(内存不足)崩溃和减速的可能性；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-8wlejwj",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-8wlejwj",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-xzcqhlc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-xzcqhlc",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "所有节点类型中50%的空闲CPU，以减少工作负载临时峰值期间出现减速的可能性。"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-y4fema2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-y4fema2",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-ojh5fg4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-ojh5fg4",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmstorage节点的数据存储目录中至少有30%的空闲存储空间。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-f87rsa9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-f87rsa9",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "针对集群版，还有其他一些容量规划技巧："
				}
			]
		},
		{
			"ID": "20230419162051-hdm1dp6",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-hdm1dp6",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-37xc70r",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-37xc70r",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-mn7416g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-mn7416g",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "通过添加更多vmstorage节点和/或通过每个vmstorage节点增加RAM和CPU资源，可以增加活跃时间序列的集群容量；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-ll4hdae",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-ll4hdae",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-xg8gwe9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-xg8gwe9",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "通过增加vmstorage节点的数量和/或通过每个vmselect节点增加RAM和CPU资源来减少查询延迟；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-xlunkrz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-xlunkrz",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "以下是相关资源计算的公式："
				}
			]
		},
		{
			"ID": "20230419162051-6kfnr3a",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-6kfnr3a",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "以200节点规模集群为例，简单计算下各资源的容量需求："
				}
			]
		},
		{
			"ID": "20230419162051-h91emee",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-h91emee",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "假设以30s的频率采集数据，数据保留30天，那么："
				}
			]
		},
		{
			"ID": "20230419162051-xbav03j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-xbav03j",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ingestion_rate = (200*1000+20000*50+10000*100)/30 = 73333"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-dfriiqz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-dfriiqz",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "vCPUs = 73333 / 100K = 0.73"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-vsrhzi6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-vsrhzi6",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RAM = (200*1000+20000*50+10000*100) * 1KB = 2200000KB ≈ 2.2GB"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-sdgzv5j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-sdgzv5j",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "storage = 73333 * 60 * 60 * 24 * 30 * 0.4byte = 76031654400byte ≈ 76GB"
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-0xbsqwx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-0xbsqwx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "扩容方案"
				}
			]
		},
		{
			"ID": "20230419162051-m77esgx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-m77esgx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当VictoriaMetrics集群遇到性能瓶颈时，无非就以下几种场景，可根据情况进行扩容："
				}
			]
		},
		{
			"ID": "20230419162051-8dpgp55",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-8dpgp55",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-39esxgy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-39esxgy",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-megfpqu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-megfpqu",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "查询速度过慢"
								},
								{
									"Type": "NodeText",
									"Data": "​：vmselect为无状态服务，配置信息都一样，直接扩容，即可解决此问题。"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-i2bh2es",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-i2bh2es",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-ok7el1f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-ok7el1f",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "数据录入过慢"
								},
								{
									"Type": "NodeText",
									"Data": "​：vminsert和vmselect一样，直接扩容即可。"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-9ca9ls7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-9ca9ls7",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-3f21hso",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-3f21hso",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "存储容量不足"
								},
								{
									"Type": "NodeText",
									"Data": "​：vmstorage水平扩容来解决此问题，因为vmstorage是有态服务，扩容要配合上游组件服务一起。vmstorage各节点配置一样，直接扩容即可。同时需要把上游的vmselect和vminsert的存储列表（"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "-storageNode"
								},
								{
									"Type": "NodeText",
									"Data": "​）进行更新，然后全部重启。"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-5x7vh7w",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-5x7vh7w",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-ujvqfbg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-ujvqfbg",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "抓取样本量过大"
								},
								{
									"Type": "NodeText",
									"Data": "​：扩容vmagent即可，但需要重新分配所有vmagent对target的分组参数，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "-promscrape.cluster.membersCount=N"
								},
								{
									"Type": "NodeText",
									"Data": "​ 增加总分组数，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "-promscrape.cluster.memberNum=(0~N-1)"
								},
								{
									"Type": "NodeText",
									"Data": "​ 当前vmagent节点所在分组号，修改完后重启所有vmagent。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-5ury0ex",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-5ury0ex",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "故障恢复"
				}
			]
		},
		{
			"ID": "20230419162051-8wbogl8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-8wbogl8",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "VictoriaMetrics集群版的各类组件服务故障后，可以通过如下方法处理："
				}
			]
		},
		{
			"ID": "20230419162051-6krmj4j",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-6krmj4j",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-v8634e5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-v8634e5",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-elwhf9i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-elwhf9i",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmselect"
								},
								{
									"Type": "NodeText",
									"Data": "​：此为无状态服务，所有节点配置信息一样，故障后直接重启恢复即可；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-whhj6ig",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-whhj6ig",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-vhhn6pm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-vhhn6pm",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmagent"
								},
								{
									"Type": "NodeText",
									"Data": "​：开启"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "replicationFactor=N(N\u0026gt;1)"
								},
								{
									"Type": "NodeText",
									"Data": "​后，单个target都会被N节vmagent点抓取数据，所以单个节点故障并不会影响数据抓取，直接重启恢复即可；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-b5oc9nq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-b5oc9nq",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-p4p1jdd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-p4p1jdd",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vminsert"
								},
								{
									"Type": "NodeText",
									"Data": "​：此为无状态服务，所有节点配置信息一样，而且vmagent开启"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "replicationFactor"
								},
								{
									"Type": "NodeText",
									"Data": "​，所以每个target样本数据都会被写入到多个vminsert，单个vminsert故障不会丢失数据，直接重启恢复即可；"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-kftnavt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-kftnavt",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-imhx2zs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-imhx2zs",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "vmstorage"
								},
								{
									"Type": "NodeText",
									"Data": "​：因为vminsert开启"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "replicationFactor"
								},
								{
									"Type": "NodeText",
									"Data": "​副本，所有target的样本数据都会存在多个vmstorage上，所以单个节点故障，不会丢失数据，只需要等待恢复或手动恢复。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-3x3ypnc",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-3x3ypnc",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "数据备份"
				}
			]
		},
		{
			"ID": "20230419162051-3jl2nzx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419162051-3jl2nzx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "VictoriaMetrics使用块存储的方式保存历史数据，如果需要提高数据安全性，可以使用vmbackup和vmrestore工具进行数据备份和恢复。"
				}
			]
		},
		{
			"ID": "20230419162051-wfjc4dx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-wfjc4dx",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "和其他开源实现对比"
				}
			]
		},
		{
			"ID": "20230419162051-wkv86hi",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-wkv86hi",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "写入对比"
				}
			]
		},
		{
			"ID": "20230419163740-fj4zeln",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419163740-fj4zeln",
				"updated": "20230419163740"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20230419163740-80w5akn.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-3xfovld",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-3xfovld",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "读取对比"
				}
			]
		},
		{
			"ID": "20230419163728-jopohx0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230419163728-jopohx0",
				"updated": "20230419163728"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20230419163728-mvtswtq.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20230419162051-w6dht47",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-w6dht47",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "资源需求对比"
				}
			]
		},
		{
			"ID": "20230419162051-gundnw0",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-gundnw0",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-5urnmyi",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-5urnmyi",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-iivq4gb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-iivq4gb",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RAM：在处理相同数量的时序序列时，VictoriaMetrics所使用的RAM比Thanos少7倍"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-95h7l1m",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-95h7l1m",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-5ds0e4g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-5ds0e4g",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "存储：在存储相同数据的时序序列时，VictoriaMetrics所使用的存储比Thanos少7倍"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230419162051-yelpvfq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230419162051-yelpvfq",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "参考"
				}
			]
		},
		{
			"ID": "20230419162051-wyyxkgp",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230419162051-wyyxkgp",
				"updated": "20230419162051"
			},
			"Children": [
				{
					"ID": "20230419162051-hpvaeh3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-hpvaeh3",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-hvgb4ec",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-hvgb4ec",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://docs.victoriametrics.com/",
									"TextMarkTextContent": "VictoriaMetrics"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-j1ouhhs",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-j1ouhhs",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-4g2htp8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-4g2htp8",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://cloud.tencent.com/developer/article/1690227",
									"TextMarkTextContent": "Thanos 与 VictoriaMetrics，谁才是打造大型 Prometheus 监控系统的王者？"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-f6jv25f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-f6jv25f",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-1pd178q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-1pd178q",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://zhuanlan.zhihu.com/p/368912946",
									"TextMarkTextContent": "浅析下开源时序数据库VictoriaMetrics的存储机制"
								}
							]
						}
					]
				},
				{
					"ID": "20230419162051-thlvffm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230419162051-thlvffm",
						"updated": "20230419162051"
					},
					"Children": [
						{
							"ID": "20230419162051-h6aknry",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230419162051-h6aknry",
								"updated": "20230419162051"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://github.com/VictoriaMetrics/VictoriaMetrics/blob/v1.45.0/docs/SampleSizeCalculations.md",
									"TextMarkTextContent": "Sample size calculations"
								}
							]
						}
					]
				}
			]
		}
	]
}