{
	"ID": "20241023114223-hqfcyi2",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20241023114223-hqfcyi2",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20241023114223-nb0l6ul\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241023114223-zqfpddd\u0026quot;,\u0026quot;scrollTop\u0026quot;:1073}",
		"title": "利用Velero对K8S备份还原与集群迁移实战 - 资深饮水机管理员 - 博客园",
		"updated": "20241023114223"
	},
	"Children": [
		{
			"ID": "20241023114223-nb0l6ul",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20241023114223-nb0l6ul",
				"updated": "20241023114223"
			}
		},
		{
			"ID": "20241023114223-ihj2lz2",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-ihj2lz2",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-k6mavrf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-k6mavrf",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-0qfmpou",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-0qfmpou",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://www.cnblogs.com/wubolive/p/17345716.html",
									"TextMarkTextContent": "https://www.cnblogs.com/wubolive/p/17345716.html"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-syzk3u3",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20241023114223-syzk3u3",
				"updated": "20241023114223"
			}
		},
		{
			"ID": "20241023114223-xxojn8u",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241023114223-xxojn8u",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一、简介"
				}
			]
		},
		{
			"ID": "20241023114223-lb1thjy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-lb1thjy",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Velero 是一款云原生时代的灾难恢复和迁移工具，采用 Go 语言编写，并在 github 上进行了开源，利用 velero 用户可以安全的备份、恢复和迁移 Kubernetes 集群资源和持久卷。"
				}
			]
		},
		{
			"ID": "20241023114223-1vk2qsk",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-1vk2qsk",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-pqymxxk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-pqymxxk",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-bxf2lg3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-bxf2lg3",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "开源地址："
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://github.com/vmware-tanzu/velero",
									"TextMarkTextContent": "https://github.com/vmware-tanzu/velero"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-einst0j",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-einst0j",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-2a10a7d",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-2a10a7d",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "官方文档："
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://velero.io/docs/v1.11/",
									"TextMarkTextContent": "https://velero.io/docs/v1.11/"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-8lamay9",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-8lamay9",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.1 支持的版本列表"
				}
			]
		},
		{
			"ID": "20241023114223-0w1i0yv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-0w1i0yv",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423100402231-977815386-20241023114223-5ns7zg1.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-5kxpnso",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-5kxpnso",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2 Velero组件"
				}
			]
		},
		{
			"ID": "20241023114223-62cjrx7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-62cjrx7",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Velero 组件一共分两部分，分别是服务端和客户端。"
				}
			]
		},
		{
			"ID": "20241023114223-bu35ljf",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-bu35ljf",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-r7knvrw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-r7knvrw",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-lyvk6be",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-lyvk6be",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "服务端"
								},
								{
									"Type": "NodeText",
									"Data": "​：运行在你 Kubernetes 的集群中"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-v8gvco2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-v8gvco2",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-0bsu2b7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-0bsu2b7",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "客户端"
								},
								{
									"Type": "NodeText",
									"Data": "​：是一些运行在本地的命令行的工具，需要已配置好 kubectl 及集群 kubeconfig 的机器上"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-slx7rgt",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-slx7rgt",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3 velero备份流程"
				}
			]
		},
		{
			"ID": "20241023114223-zqrgthq",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20241023114223-zqrgthq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-9xvlfez",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20241023114223-9xvlfez",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-46c2ff7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-46c2ff7",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "velero客户端调用kubernetes API Server创建backup任务"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-6zo2m2d",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20241023114223-6zo2m2d",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-t8utl0z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-t8utl0z",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Backup控制器基于watch机制通过Api Server获取到备份任务"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-koyfjl4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20241023114223-koyfjl4",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-wf0uc8i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-wf0uc8i",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Backup控制器开始执行备份动作，会通过请求Api Server获取到需要备份的数据"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-ee6ah28",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20241023114223-ee6ah28",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-22xaaty",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-22xaaty",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Backup 控制器将获取到的数据备份到指定的对象存储server端"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-kttoi28",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-kttoi28",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423101114648-1506721209-20241023114223-4m0ebwq.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-40rw2qg",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-40rw2qg",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.4 Velero后端存储"
				}
			]
		},
		{
			"ID": "20241023114223-uyajdfj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-uyajdfj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Velero"
				},
				{
					"Type": "NodeText",
					"Data": "​支持两种关于后端存储的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "CRD"
				},
				{
					"Type": "NodeText",
					"Data": "​，分别是"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "BackupStorageLocation"
				},
				{
					"Type": "NodeText",
					"Data": "​和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "VolumeSnapshotLocation"
				},
				{
					"Type": "NodeText",
					"Data": "​。"
				}
			]
		},
		{
			"ID": "20241023114223-92j1zoj",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-92j1zoj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.4.1 BackupStorageLocation"
				}
			]
		},
		{
			"ID": "20241023114223-6y5zxa8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-6y5zxa8",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "主要用来定义 Kubernetes 集群资源的数据存放位置，也就是集群对象数据，不是 PVC 的数据。主要支持的后端存储是 S3 兼容的存储，比如：Mino 和阿里云 OSS 等。"
				}
			]
		},
		{
			"ID": "20241023114223-ozl71wa",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-ozl71wa",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.4.2 VolumeSnapshotLocation"
				}
			]
		},
		{
			"ID": "20241023114223-qyfx2hf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-qyfx2hf",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "主要用来给 PV 做快照，需要云提供商提供插件。阿里云已经提供了插件，这个需要使用 CSI 等存储机制。你也可以使用专门的备份工具 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Restic"
				},
				{
					"Type": "NodeText",
					"Data": "​，把 PV 数据备份到阿里云 OSS 中去(安装时需要自定义选项)。"
				}
			]
		},
		{
			"ID": "20241023114223-6uvyv7u",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20241023114223-6uvyv7u",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20241023114223-vgsflep",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20241023114223-vgsflep",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "Restic 是一款 GO 语言开发的数据加密备份工具，顾名思义，可以将本地数据加密后传输到指定的仓库。支持的仓库有 Local、SFTP、Aws S3、Minio、OpenStack Swift、Backblaze B2、Azure BS、Google Cloud storage、Rest Server。"
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-ancl4es",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241023114223-ancl4es",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "二、准备存储插件"
				}
			]
		},
		{
			"ID": "20241023114223-j43lf66",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-j43lf66",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Velero支持很多种存储插件，可查看："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://velero.io/docs/v1.10/supported-providers/",
					"TextMarkTextContent": "https://velero.io/docs/v1.10/supported-providers/"
				},
				{
					"Type": "NodeText",
					"Data": "获取插件信息，我们这里使用minio作为S3兼容的对象存储提供程序。您也可以在任意地方部署Minio对象存储，只需要保证K8S集群可以访问到即可。"
				}
			]
		},
		{
			"ID": "20241023114223-4oz0hmq",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-4oz0hmq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 准备minio清单"
				}
			]
		},
		{
			"ID": "20241023114223-8o25vir",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-8o25vir",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "---apiVersion: v1kind: Servicemetadata:  name: minio  namespace: velero  labels:    app: miniospec:  selector:    app: minio  ports:  - name: api    port: 9000    protocol: TCP  - name: console    port: 9001    protocol: TCP---apiVersion: apps/v1kind: StatefulSetmetadata:  name: minio  namespace: velero  labels:    app: miniospec:  replicas: 1  serviceName: minio  selector:    matchLabels:      app: minio  template:    metadata:      labels:        app: minio    spec:      containers:      - name: minio        image: docker.io/bitnami/minio:2023.3.22        imagePullPolicy: IfNotPresent        ports:        - containerPort: 9000          name: api          protocol: TCP        - containerPort: 9001          name: console          protocol: TCP        env:        - name: MINIO_ROOT_USER          value: \"minio\"        - name: MINIO_ROOT_PASSWORD          value: \"minio123\"        - name: MINIO_DEFAULT_BUCKETS          value: \"velero\"        volumeMounts:        - name: data          mountPath: /data  volumeClaimTemplates:    - metadata:        name: data      spec:        accessModes: [ \"ReadWriteOnce\" ]        resources:          requests:            storage: 50Gi\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-93nlbo6",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-93nlbo6",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2 创建minio应用"
				}
			]
		},
		{
			"ID": "20241023114223-v21nj8e",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-v21nj8e",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 创建velero命名空间$ kubectl create namespace velero# 创建minio资源$ kubectl apply -f minio.yaml# 查看部署状态$ kubectl get sts,pod,svc -n veleroNAME                     READY   AGEstatefulset.apps/minio   1/1     66sNAME          READY   STATUS    RESTARTS   AGEpod/minio-0   1/1     Running   0          65sNAME            TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGEservice/minio   ClusterIP   10.99.223.162   \u003cnone\u003e        9000/TCP,9001/TCP   66s# 开放NodePort端口$ kubectl patch svc minio -n velero -p '{\"spec\": {\"type\": \"NodePort\"}}'$ kubectl patch svc minio -n velero --type='json' -p='[{\"op\": \"replace\", \"path\": \"/spec/ports/0/nodePort\", \"value\":9000},{\"op\": \"replace\", \"path\": \"/spec/ports/1/nodePort\", \"value\":9001}]'$ kubectl get svc -n veleroNAME    TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)                       AGEminio   NodePort   10.99.223.162   \u003cnone\u003e        9000:9000/TCP,9001:9001/TCP   140m\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-kpl29tn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-kpl29tn",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通过浏览器访问"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "服务器IP:9001"
				},
				{
					"Type": "NodeText",
					"Data": "​，并使用账号"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "minio"
				},
				{
					"Type": "NodeText",
					"Data": "​密码"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "minio123"
				},
				{
					"Type": "NodeText",
					"Data": "​登入验证。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423101159036-1960834087-20241023114223-v6gw87h.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-k2vri1j",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241023114223-k2vri1j",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "三、安装velero v1.10.2"
				}
			]
		},
		{
			"ID": "20241023114223-9ijkn1c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-9ijkn1c",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "版本列表："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://github.com/vmware-tanzu/velero/releases",
					"TextMarkTextContent": "https://github.com/vmware-tanzu/velero/releases"
				}
			]
		},
		{
			"ID": "20241023114223-7piimfx",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-7piimfx",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 安装velero命令程序"
				}
			]
		},
		{
			"ID": "20241023114223-0rivnoj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-0rivnoj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ wget https://github.com/vmware-tanzu/velero/releases/download/v1.10.2/velero-v1.10.2-linux-amd64.tar.gz$ tar zxf velero-v1.10.2-linux-amd64.tar.gz $ mv velero-v1.10.2-linux-amd64/velero /usr/bin/$ velero -h# 启用命令补全$ source \u003c(velero completion bash)$ velero completion bash \u003e /etc/bash_completion.d/velero\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-gklhpya",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-gklhpya",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2 创建密钥"
				}
			]
		},
		{
			"ID": "20241023114223-unfu9ol",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-unfu9ol",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ cat \u003e credentials-velero \u003c\u003cEOF[default]aws_access_key_id = minioaws_secret_access_key = minio123EOF\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-ey4hgfo",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-ey4hgfo",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3 安装velero到k8s集群"
				}
			]
		},
		{
			"ID": "20241023114223-8unitig",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-8unitig",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero install \\  --provider aws \\  --image velero/velero:v1.10.2 \\  --plugins velero/velero-plugin-for-aws:v1.6.0 \\  --bucket velero \\  --secret-file ./credentials-velero \\  --use-node-agent \\  --use-volume-snapshots=false \\  --namespace velero \\  --backup-location-config region=minio,s3ForcePathStyle=\"true\",s3Url=http://minio:9000 \\  --wait# 执行install命令后会创建一系列清单，包括CustomResourceDefinition、Namespace、Deployment等。# 可使用如下命令查看运行日志$ kubectl logs deployment/velero -n velero# 查看velero创建的api对象$ kubectl api-versions | grep velerovelero.io/v1# 查看备份位置$ velero backup-location getNAME      PROVIDER   BUCKET/PREFIX   PHASE       LAST VALIDATED                  ACCESS MODE   DEFAULTdefault   aws        velero          Available   2023-03-28 15:45:30 +0800 CST   ReadWrite     true\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-ha72n0j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-ha72n0j",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "选项说明："
				}
			]
		},
		{
			"ID": "20241023114223-ycfkrtl",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-ycfkrtl",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-57xfea2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-57xfea2",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-p453tlb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-p453tlb",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--kubeconfig"
								},
								{
									"Type": "NodeText",
									"Data": "​(可选)：指定"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "kubeconfig"
								},
								{
									"Type": "NodeText",
									"Data": "​认证文件，默认使用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": ".kube/config"
								},
								{
									"Type": "NodeText",
									"Data": "​；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-dw3jr9q",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-dw3jr9q",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-44ap6p5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-44ap6p5",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--provider"
								},
								{
									"Type": "NodeText",
									"Data": "​：定义插件提供方；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-etupng3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-etupng3",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-28oxxiy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-28oxxiy",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--image"
								},
								{
									"Type": "NodeText",
									"Data": "​：定义运行velero的镜像，默认与velero客户端一致；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-7h6r11m",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-7h6r11m",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-n3ag65z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-n3ag65z",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--plugins"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定使用aws s3兼容的插件镜像；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-r5o63nx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-r5o63nx",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-2091o3p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-2091o3p",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--bucket"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定对象存储Bucket桶名称；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-ozj2hxu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-ozj2hxu",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-0dr5ies",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-0dr5ies",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--secret-file"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定对象存储认证文件；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-2ambh0c",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-2ambh0c",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-91rp7ac",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-91rp7ac",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--use-node-agent"
								},
								{
									"Type": "NodeText",
									"Data": "​：创建Velero Node Agent守护进程，托管FSB模块；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-9jpvgig",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-9jpvgig",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-9oc7z3d",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-9oc7z3d",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--use-volume-snapshots"
								},
								{
									"Type": "NodeText",
									"Data": "​：是否启使用快照；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-b60zncz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-b60zncz",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-39hf3oh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-39hf3oh",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--namespace"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定部署的namespace名称，默认为velero；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-zd2x93u",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-zd2x93u",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-578cbg1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-578cbg1",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--backup-location-config"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定对象存储地址信息；"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-imbuk3f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-imbuk3f",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "aws插件与velero版本对应关系："
				},
				{
					"Type": "NodeText",
					"Data": "\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423101211903-287604028-20241023114223-std6x2z.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-b5oj5fs",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-b5oj5fs",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.4 卸载velero"
				}
			]
		},
		{
			"ID": "20241023114223-h1hlzvc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-h1hlzvc",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果您想从集群中完全卸载Velero，则以下命令将删除由"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "velero install"
				},
				{
					"Type": "NodeText",
					"Data": "​创建的所有资源:"
				}
			]
		},
		{
			"ID": "20241023114223-jbqlv7m",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-jbqlv7m",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "kubectl delete namespace/velero clusterrolebinding/velerokubectl delete crds -l component=velero\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-gard4t2",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241023114223-gard4t2",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "四、备份与恢复"
				}
			]
		},
		{
			"ID": "20241023114223-ua33tus",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-ua33tus",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "备份命令："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "velero create backup NAME [flags]"
				},
				{
					"Type": "NodeText",
					"Data": "​\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "backup选项："
				}
			]
		},
		{
			"ID": "20241023114223-tcn2gz6",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-tcn2gz6",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-j27jf1r",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-j27jf1r",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-121ug43",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-121ug43",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--exclude-namespaces stringArray"
								},
								{
									"Type": "NodeText",
									"Data": "​ : 要从备份中排除的名称空间"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-m5nyegt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-m5nyegt",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-witseoi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-witseoi",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--exclude-resources stringArray"
								},
								{
									"Type": "NodeText",
									"Data": "​: 要从备份中排除的资源，如"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "storageclasses.storage.k8s.io"
								},
								{
									"Type": "NodeText",
									"Data": "​"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-ci3ndo0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-ci3ndo0",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-x662q9r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-x662q9r",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--include-cluster-resources optionalBool[=true]"
								},
								{
									"Type": "NodeText",
									"Data": "​: 包含集群资源类型"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-wkwp5w5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-wkwp5w5",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-namzl41",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-namzl41",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--include-namespaces stringArray"
								},
								{
									"Type": "NodeText",
									"Data": "​: 要包含在备份中的名称空间(默认'*')"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-3d12hmg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-3d12hmg",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-qcswj7k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-qcswj7k",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--include-resources stringArray"
								},
								{
									"Type": "NodeText",
									"Data": "​: 备份中要包括的资源"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-hkj1i1w",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-hkj1i1w",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-9zhsrym",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-9zhsrym",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--labels mapStringString"
								},
								{
									"Type": "NodeText",
									"Data": "​: 给这个备份加上标签"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-gmui1a1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-gmui1a1",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-17nuxco",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-17nuxco",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "-o, --output string"
								},
								{
									"Type": "NodeText",
									"Data": "​: 指定输出格式，支持'table'、'json'和'yaml'；"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-h8x3gho",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-h8x3gho",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-jyo4jsd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-jyo4jsd",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "-l, --selector labelSelector"
								},
								{
									"Type": "NodeText",
									"Data": "​: 对指定标签的资源进行备份"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-3ye5ov6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-3ye5ov6",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-jsza7mf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-jsza7mf",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--snapshot-volumes optionalBool[=true]"
								},
								{
									"Type": "NodeText",
									"Data": "​: 对 PV 创建快照"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-78pmgnc",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-78pmgnc",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-6nnie9b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-6nnie9b",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--storage-location string"
								},
								{
									"Type": "NodeText",
									"Data": "​: 指定备份的位置"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-tk6lzqm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-tk6lzqm",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-xy187w7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-xy187w7",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--ttl duration"
								},
								{
									"Type": "NodeText",
									"Data": "​: 备份数据多久删掉"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-4ze9tyt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-4ze9tyt",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-c5ee70n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-c5ee70n",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--volume-snapshot-locations strings"
								},
								{
									"Type": "NodeText",
									"Data": "​: 指定快照的位置，也就是哪一个公有云驱动"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-iap570r",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-iap570r",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1 备份"
				}
			]
		},
		{
			"ID": "20241023114223-39cuvca",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-39cuvca",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.1 使用官方案例创建测试应用"
				}
			]
		},
		{
			"ID": "20241023114223-977yu9o",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-977yu9o",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ kubectl apply -f examples/nginx-app/base.yaml namespace/nginx-example createddeployment.apps/nginx-deployment createdservice/my-nginx created# 查看资源清单$ kubectl get all -n nginx-exampleNAME                                   READY   STATUS    RESTARTS   AGEpod/nginx-deployment-57d5dcb68-g42mk   1/1     Running   0          41spod/nginx-deployment-57d5dcb68-pcc6t   1/1     Running   0          41sNAME               TYPE           CLUSTER-IP   EXTERNAL-IP   PORT(S)        AGEservice/my-nginx   LoadBalancer   10.96.0.31   \u003cpending\u003e     80:27370/TCP   41sNAME                               READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/nginx-deployment   2/2     2            2           41sNAME                                         DESIRED   CURRENT   READY   AGEreplicaset.apps/nginx-deployment-57d5dcb68   2         2         2       41s\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-cgc1twq",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-cgc1twq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.2 备份测试应用"
				}
			]
		},
		{
			"ID": "20241023114223-uwjnrp7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-uwjnrp7",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero backup create nginx-backup --include-namespaces nginx-exampleBackup request \"nginx-backup\" submitted successfully.Run `velero backup describe nginx-backup` or `velero backup logs nginx-backup` for more details.\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-730bepv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-730bepv",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "选项："
				}
			]
		},
		{
			"ID": "20241023114223-8ol252v",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-8ol252v",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-q35e3vq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-q35e3vq",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-tkcmzbi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-tkcmzbi",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--include-namespaces"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定命名空间"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-9izqc6e",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-9izqc6e",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-8m33zp6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-8m33zp6",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--selector"
								},
								{
									"Type": "NodeText",
									"Data": "​：标签选择器，如app=nginx"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-nl7aj0h",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-nl7aj0h",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.3 查看备份列表"
				}
			]
		},
		{
			"ID": "20241023114223-bxlyd4b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-bxlyd4b",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero backup getNAME           STATUS      ERRORS   WARNINGS   CREATED                         EXPIRES   STORAGE LOCATION   SELECTORnginx-backup   Completed   0        0          2023-03-09 09:38:50 +0800 CST   29d       default            \u003cnone\u003e# 查看备份详细信息$ velero backup describe nginx-backup# 查看备份日志$ velero backup logs nginx-backup\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-myg75h9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-myg75h9",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "登入minio控制台查看备份内容\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423101229069-113765014-20241023114223-dsfck4v.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-obr5o12",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-obr5o12",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1.4 定时备份指南"
				}
			]
		},
		{
			"ID": "20241023114223-se41zt3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-se41zt3",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 使用cron表达式备份$ velero schedule create nginx-daily --schedule=\"0 1 * * *\" --include-namespaces nginx-example# 使用一些非标准的速记 cron 表达式$ velero schedule create nginx-daily --schedule=\"@daily\" --include-namespaces nginx-example# 手动触发定时任务$ velero backup create --from-schedule nginx-daily\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-xpngpvq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-xpngpvq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "更多cron示例请参考："
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://pkg.go.dev/github.com/robfig/cron#hdr-Predefined_schedules",
					"TextMarkTextContent": "cron package’s documentation"
				}
			]
		},
		{
			"ID": "20241023114223-8weum6e",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-8weum6e",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2 恢复"
				}
			]
		},
		{
			"ID": "20241023114223-j9o8xsz",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-j9o8xsz",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.1 模拟灾难"
				}
			]
		},
		{
			"ID": "20241023114223-uwnd9wd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-uwnd9wd",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 删除nginx-example命名空间和资源$ kubectl delete namespace nginx-example# 检查是否删除$ kubectl get all -n nginx-exampleNo resources found in nginx-example namespace.\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-vfhdnms",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-vfhdnms",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.2 恢复资源"
				}
			]
		},
		{
			"ID": "20241023114223-6zpgb74",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-6zpgb74",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero backup getNAME           STATUS      ERRORS   WARNINGS   CREATED                         EXPIRES   STORAGE LOCATION   SELECTORnginx-backup   Completed   0        0          2023-03-09 09:38:50 +0800 CST   29d       default            \u003cnone\u003e$ velero restore create --from-backup nginx-backupRestore request \"nginx-backup-20230309095025\" submitted successfully.Run `velero restore describe nginx-backup-20230309095025` or `velero restore logs nginx-backup-20230309095025` for more details.\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-9bhj5f6",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-9bhj5f6",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2.3 检查恢复的资源"
				}
			]
		},
		{
			"ID": "20241023114223-z0h1zc1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-z0h1zc1",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero restore getNAME                          BACKUP         STATUS      STARTED                         COMPLETED                       ERRORS   WARNINGS   CREATED                         SELECTORnginx-backup-20230309095025   nginx-backup   Completed   2023-03-09 09:50:25 +0800 CST   2023-03-09 09:50:25 +0800 CST   0        1          2023-03-09 09:50:25 +0800 CST   \u003cnone\u003e# 查看详细信息$ velero restore describe nginx-backup-20230309095025# 检查资源状态$ kubectl get all -n nginx-exampleNAME                                   READY   STATUS    RESTARTS   AGEpod/nginx-deployment-57d5dcb68-g42mk   1/1     Running   0          2m19spod/nginx-deployment-57d5dcb68-pcc6t   1/1     Running   0          2m19sNAME               TYPE           CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGEservice/my-nginx   LoadBalancer   10.96.0.204   \u003cpending\u003e     80:31291/TCP   2m19sNAME                               READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/nginx-deployment   2/2     2            2           2m19sNAME                                         DESIRED   CURRENT   READY   AGEreplicaset.apps/nginx-deployment-57d5dcb68   2         2         2       2m19s\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-zqfpddd",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20241023114223-zqfpddd",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "五、项目迁移实战"
				}
			]
		},
		{
			"ID": "20241023114223-snha1zb",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-snha1zb",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1、项目介绍"
				}
			]
		},
		{
			"ID": "20241023114223-2l3v9zk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-2l3v9zk",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们将使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Velero"
				},
				{
					"Type": "NodeText",
					"Data": "​快速完成"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "云原生应用"
				},
				{
					"Type": "NodeText",
					"Data": "及"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "PV数据"
				},
				{
					"Type": "NodeText",
					"Data": "的迁移实践过程，在本文示例中，我们将"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A集群"
				},
				{
					"Type": "NodeText",
					"Data": "中的一个"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "MOS应用"
				},
				{
					"Type": "NodeText",
					"Data": "迁移到"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群B"
				},
				{
					"Type": "NodeText",
					"Data": "中，其中数据备份采用自建"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "Minio"
				},
				{
					"Type": "NodeText",
					"Data": "对象存储服务。\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423100904685-155121710-20241023114223-jr3o92k.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-dav57sj",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-dav57sj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1.1 环境要求"
				}
			]
		},
		{
			"ID": "20241023114223-hql8gon",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20241023114223-hql8gon",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-zweluog",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20241023114223-zweluog",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-y911xzg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-y911xzg",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "迁移项目最好保证两个Kubernetes集群版本一致。"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-3wgq3so",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20241023114223-3wgq3so",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-faeysow",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-faeysow",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "为了保证PV数据成功迁移，两边需要安装好相同名字的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "StorageClass"
								},
								{
									"Type": "NodeText",
									"Data": "​。"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-l7j8iyg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20241023114223-l7j8iyg",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-ypytfwd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-ypytfwd",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可以自己部署Minio，也可以使用公有云的对象存储服务，如华为的OBS、阿里的OSS等。"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-kwnlu5q",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20241023114223-kwnlu5q",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-tb5dtxt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-tb5dtxt",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "本案例将集群A中app-system命名空间中的服务及PV数据迁移到集群B中。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-ut8wnyj",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-ut8wnyj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1.2 项目环境"
				}
			]
		},
		{
			"ID": "20241023114223-ttq06tt",
			"Type": "NodeTable",
			"TableAligns": [
				0,
				0,
				0,
				0
			],
			"Properties": {
				"colgroup": "|||",
				"id": "20241023114223-ttq06tt",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeTableHead",
					"Data": "thead",
					"Children": [
						{
							"Type": "NodeTableRow",
							"Data": "tr",
							"Children": [
								{
									"Type": "NodeTableCell",
									"Data": "th",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "角色"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Data": "th",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "集群IP"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Data": "th",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "集群版本"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Data": "th",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "部署软件"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"Data": "tr",
					"Children": [
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "K8S 集群A"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "192.168.1.102"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "v1.22.10"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "openebs、velero、app-system"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"Data": "tr",
					"Children": [
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "K8S 集群B"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "192.168.1.103"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "v1.22.10"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Data": "td",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "openebs、velero、minio"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-iugrjcc",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-iugrjcc",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1.3 项目说明"
				}
			]
		},
		{
			"ID": "20241023114223-kn7ats5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-kn7ats5",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们需要将集群A中 app-system 空间的所有资源和数据全部迁移到集群B中，该项目包括了"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "deployment"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "statefulset"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "service"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ingress"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "job"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "cronjob"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "secret"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "configmap"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "pv"
				},
				{
					"Type": "NodeText",
					"Data": "​、"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "pvc"
				},
				{
					"Type": "NodeText",
					"Data": "​。"
				}
			]
		},
		{
			"ID": "20241023114223-szo5hzj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-szo5hzj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 项目清单信息$ kubectl get deployment,sts,pvc -n app-systemNAME                                READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/hasura-graphql      1/1     1            1           5h27mdeployment.apps/iot-backend         1/1     1            1           5h27mdeployment.apps/iot-gateway         1/1     1            1           5h27mdeployment.apps/iot-history         1/1     1            1           5h27mdeployment.apps/iot-observer        1/1     1            1           5h27mdeployment.apps/app-backend         1/1     1            1           5h27mdeployment.apps/app-frontend        1/1     1            1           5h27mNAME                                READY   AGEstatefulset.apps/minio              1/1     5h27mstatefulset.apps/mongo              1/1     5h27mstatefulset.apps/postgres           1/1     5h27mstatefulset.apps/rabbitmq           1/1     5h27mstatefulset.apps/redis              1/1     5h27mNAME                                       STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS       AGEpersistentvolumeclaim/data-minio-0         Bound    pvc-950d15a8-20a5-4e5f-8dbf-b904295355bb   50Gi       RWO            openebs-hostpath   5h27mpersistentvolumeclaim/data-mongo-0         Bound    pvc-e435b80e-0370-4100-b223-ca841f24bd5d   50Gi       RWO            openebs-hostpath   5h27mpersistentvolumeclaim/data-postgres-0      Bound    pvc-359ec32a-4bfc-4bc8-8cf3-38322e8ef59b   300Gi      RWO            openebs-hostpath   5h27mpersistentvolumeclaim/data-redis-0         Bound    pvc-da718e0c-992c-4f6e-af44-abb1c7214a9e   2Gi        RWO            openebs-hostpath   5h27mpersistentvolumeclaim/app-backend          Bound    pvc-506261a9-6be4-4d95-8807-58201e31a527   10Gi       RWO            openebs-hostpath   5h27m\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-2tqitoh",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-2tqitoh",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2 准备对象存储"
				}
			]
		},
		{
			"ID": "20241023114223-pw8aocw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-pw8aocw",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "按照"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "2.1"
				},
				{
					"Type": "NodeText",
					"Data": "和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "2.2"
				},
				{
					"Type": "NodeText",
					"Data": "的方法在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群B（192.168.1.103）"
				},
				{
					"Type": "NodeText",
					"Data": "中创建"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "minio"
				},
				{
					"Type": "NodeText",
					"Data": "​应用，用来存放备份数据。"
				}
			]
		},
		{
			"ID": "20241023114223-y86mcd8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-y86mcd8",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ kubectl get sts,svc -n veleroNAME                     READY   AGEstatefulset.apps/minio   1/1     3h44mNAME            TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)                       AGEservice/minio   NodePort   10.99.223.162   \u003cnone\u003e        9000:9000/TCP,9001:9001/TCP   3h44m\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-jer2smy",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-jer2smy",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.3 安装velero"
				}
			]
		},
		{
			"ID": "20241023114223-1unzqtn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-1unzqtn",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "请确保在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群A"
				},
				{
					"Type": "NodeText",
					"Data": "和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群B"
				},
				{
					"Type": "NodeText",
					"Data": "中已经安装好velero客户端，请参考"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "3.1 安装velero命令程序"
				}
			]
		},
		{
			"ID": "20241023114223-sj1isjj",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-sj1isjj",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.3.1 在集群A中安装velero服务"
				}
			]
		},
		{
			"ID": "20241023114223-68ie665",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-68ie665",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ cat \u003e credentials-velero \u003c\u003cEOF[default]aws_access_key_id = minioaws_secret_access_key = minio123EOF$ velero install \\  --provider aws \\  --image velero/velero:v1.10.2 \\  --plugins velero/velero-plugin-for-aws:v1.6.0 \\  --bucket velero \\  --secret-file ./credentials-velero \\  --use-node-agent \\  --use-volume-snapshots=false \\  --namespace velero \\  --backup-location-config region=minio,s3ForcePathStyle=\"true\",s3Url=http://192.168.1.103:9000 \\  --wait\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-knq0n31",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-knq0n31",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意：其中"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "S3"
				},
				{
					"Type": "NodeText",
					"Data": "​的地址指向"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "集群B（192.168.1.103）"
				},
				{
					"Type": "NodeText",
					"Data": "的minio对象存储。"
				}
			]
		},
		{
			"ID": "20241023114223-zz1zbpp",
			"Type": "NodeHeading",
			"HeadingLevel": 5,
			"Properties": {
				"id": "20241023114223-zz1zbpp",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.3.2 在集群B种安装velero服务"
				}
			]
		},
		{
			"ID": "20241023114223-2z3wi44",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-2z3wi44",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ cat \u003e credentials-velero \u003c\u003cEOF[default]aws_access_key_id = minioaws_secret_access_key = minio123EOF$ velero install \\  --provider aws \\  --image velero/velero:v1.10.2 \\  --plugins velero/velero-plugin-for-aws:v1.6.0 \\  --bucket velero \\  --secret-file ./credentials-velero \\  --use-node-agent \\  --use-volume-snapshots=false \\  --namespace velero \\  --backup-location-config region=minio,s3ForcePathStyle=\"true\",s3Url=http://minio:9000 \\  --wait\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-0e2lkme",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-0e2lkme",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意：其中"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "S3"
				},
				{
					"Type": "NodeText",
					"Data": "​的地址指向本集群minio对象存储的svc地址。"
				}
			]
		},
		{
			"ID": "20241023114223-kuj2szz",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-kuj2szz",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.4 备份MOS项目"
				}
			]
		},
		{
			"ID": "20241023114223-9jf19zq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-9jf19zq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ velero backup create app-backup \\  --default-volumes-to-fs-backup \\  --include-namespaces app-systemBackup request \"app-backup\" submitted successfully.Run `velero backup describe app-backup` or `velero backup logs app-backup` for more details.# 查看备份状态$ velero backup getNAME         STATUS      ERRORS   WARNINGS   CREATED                         EXPIRES   STORAGE LOCATION   SELECTORapp-backup   Completed   0        0          2023-03-28 16:34:56 +0800 CST   29d       default            \u003cnone\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-k8yqvhq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20241023114223-k8yqvhq",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"ID": "20241023114223-gjgyykr",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-gjgyykr",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-am9s9n7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-am9s9n7",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--default-volumes-to-fs-backup"
								},
								{
									"Type": "NodeText",
									"Data": "​：默认将所有PV卷进行备份，详情查看"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://velero.io/docs/v1.10/file-system-backup/",
									"TextMarkTextContent": "官方文档"
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				},
				{
					"ID": "20241023114223-6m9iwa3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20241023114223-6m9iwa3",
						"updated": "20241023114223"
					},
					"Children": [
						{
							"ID": "20241023114223-cw50e8s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20241023114223-cw50e8s",
								"updated": "20241023114223"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "​"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "--include-namespaces"
								},
								{
									"Type": "NodeText",
									"Data": "​：指定要备份的命名空间"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20241023114223-j1z60dx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20241023114223-j1z60dx",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "登入minio控制台上可以看到备份的文件：\n​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/1686997-20230423101253111-54562663-20241023114223-himhmgp.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20241023114223-2pmugzv",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-2pmugzv",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.5 恢复到集群B"
				}
			]
		},
		{
			"ID": "20241023114223-2jlfhle",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-2jlfhle",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 到集群B中查看备份资源$ velero backup getNAME         STATUS      ERRORS   WARNINGS   CREATED                         EXPIRES   STORAGE LOCATION   SELECTORapp-backup   Completed   0        0          2023-03-28 16:41:55 +0800 CST   29d       default            \u003cnone\u003e# 执行恢复命令$ velero restore create --from-backup app-backupRestore request \"app-backup-20230328164601\" submitted successfully.Run `velero restore describe app-backup-20230328164601` or `velero restore logs app-backup-20230328164601` for more details.# 查看恢复任务$ velero restore get NAME                        BACKUP       STATUS      STARTED                         COMPLETED                       ERRORS   WARNINGS   CREATED                         SELECTORapp-backup-20230328164601   app-backup   Completed   2023-03-28 16:46:01 +0800 CST   2023-03-28 17:01:26 +0800 CST   0        30         2023-03-28 16:46:01 +0800 CST   \u003cnone\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20241023114223-cinxkzg",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20241023114223-cinxkzg",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.6 验证服务和数据"
				}
			]
		},
		{
			"ID": "20241023114223-r504i1w",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20241023114223-r504i1w",
				"updated": "20241023114223"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "YmFzaA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ kubectl get deploy,sts,svc,pvc -n app-systemNAME                                READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/hasura-graphql      1/1     1            1           29mdeployment.apps/iot-backend         1/1     1            1           29mdeployment.apps/iot-gateway         1/1     1            1           29mdeployment.apps/iot-history         1/1     1            1           29mdeployment.apps/iot-observer        1/1     1            1           29mdeployment.apps/app-backend         1/1     1            1           29mdeployment.apps/app-frontend        1/1     1            1           29mNAME                                READY   AGEstatefulset.apps/minio              1/1     29mstatefulset.apps/mongo              1/1     29mstatefulset.apps/postgres           1/1     29mstatefulset.apps/rabbitmq           1/1     29mstatefulset.apps/redis              1/1     29mNAME                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                               AGEservice/hasura-graphql      ClusterIP   10.107.231.148   \u003cnone\u003e        8080/TCP                              29mservice/iot-backend         ClusterIP   10.98.78.23      \u003cnone\u003e        3000/TCP                              29mservice/iot-gateway         ClusterIP   10.108.211.114   \u003cnone\u003e        1880/TCP                              29mservice/iot-history         ClusterIP   10.98.217.234    \u003cnone\u003e        3000/TCP                              29mservice/iot-observer        ClusterIP   10.105.75.200    \u003cnone\u003e        3010/TCP                              29mservice/minio               ClusterIP   10.97.14.151     \u003cnone\u003e        9000/TCP,9001/TCP                     29mservice/mongo               ClusterIP   10.97.212.84     \u003cnone\u003e        27017/TCP                             29mservice/app-backend         ClusterIP   10.107.16.116    \u003cnone\u003e        5959/TCP                              29mservice/app-frontend        ClusterIP   10.100.136.90    \u003cnone\u003e        80/TCP,443/TCP                        29mservice/postgres            ClusterIP   10.101.235.245   \u003cnone\u003e        5432/TCP,9187/TCP                     29mservice/rabbitmq            ClusterIP   10.108.29.67     \u003cnone\u003e        15672/TCP,5672/TCP                    29mservice/redis               ClusterIP   10.101.105.81    \u003cnone\u003e        6379/TCP,9121/TCP                     29mNAME                                       STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS       AGEpersistentvolumeclaim/data-minio-0         Bound    pvc-ca5c63bf-9aaa-4755-ad8f-35718f51decf   50Gi       RWO            openebs-hostpath   29mpersistentvolumeclaim/data-mongo-0         Bound    pvc-03203801-e339-44ee-bfb4-b196808c7cc5   50Gi       RWO            openebs-hostpath   29mpersistentvolumeclaim/data-postgres-0      Bound    pvc-e2f2593e-5869-420c-bd39-54ce01dfa63f   300Gi      RWO            openebs-hostpath   29mpersistentvolumeclaim/data-redis-0         Bound    pvc-a8e4445c-c6b5-483b-8b18-9d650daf35cc   2Gi        RWO            openebs-hostpath   29mpersistentvolumeclaim/app-backend          Bound    pvc-2b2f9747-a020-4a16-9975-2491457c4032   10Gi       RWO            openebs-hostpath   29m\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}