{
	"ID": "20230322140520-s8hcnkp",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230322140520-s8hcnkp",
		"title": "一文带你搭建一套 ELK Stack 日志平台",
		"updated": "20230322173201"
	},
	"Children": [
		{
			"ID": "20230322140520-tcr0des",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20230322140520-tcr0des"
			}
		},
		{
			"ID": "20230322140520-obkzk6t",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230322140520-obkzk6t"
			},
			"Children": [
				{
					"ID": "20230322140520-zpypzmo",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-zpypzmo"
					},
					"Children": [
						{
							"ID": "20230322140520-emz3g05",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-emz3g05"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==\u0026mid=2451962693\u0026idx=1\u0026sn=96530613aaadd8240d8a5c2ab7dff49d\u0026chksm=8d1c02daba6b8bcc2499861fd37aac5cfa88d616fc839cb6a7a3c003118457ac325c3dcbeb62\u0026scene=21#wechat_redirect",
									"TextMarkTextContent": "https://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==\u0026amp;mid=2451962693\u0026amp;idx=1\u0026amp;sn=96530613aaadd8240d8a5c2ab7dff49d\u0026amp;chksm=8d1c02daba6b8bcc2499861fd37aac5cfa88d616fc839cb6a7a3c003118457ac325c3dcbeb62\u0026amp;scene=21#wechat_redirect - 微信公众平台"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-2f1ehog",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-2f1ehog"
					},
					"Children": [
						{
							"ID": "20230322140520-sdnao23",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-sdnao23"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "ELK 实战"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-hnqovn2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-hnqovn2"
					},
					"Children": [
						{
							"ID": "20230322140520-fhavgx5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-fhavgx5"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2023-03-22 14:05:20"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-drqb4cu",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20230322140520-drqb4cu"
			}
		},
		{
			"ID": "20230322140520-e4xdwt7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-e4xdwt7"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你好，我是悟空呀~"
				}
			]
		},
		{
			"ID": "20230322140520-2fe4sh3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-2fe4sh3"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前言"
				}
			]
		},
		{
			"ID": "20230322140520-vn1vvv2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-vn1vvv2"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "最近在折腾 ELK 日志平台，它是 Elastic 公司推出的一整套日志收集、分析和展示的解决方案。"
				}
			]
		},
		{
			"ID": "20230322140520-gnn3wf6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-gnn3wf6"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "专门实操了一波，这玩意看起来简单，但是里面的流程步骤还是很多的，而且遇到了很多坑。在此记录和总结下。"
				}
			]
		},
		{
			"ID": "20230322140520-kxenax5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-kxenax5"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "本文亮点"
				},
				{
					"Type": "NodeText",
					"Data": "：一步一图、带有实操案例、踩坑记录、与开发环境的日志结合，反映真实的日志场景。"
				}
			]
		},
		{
			"ID": "20230322140520-so8jssh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-so8jssh"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-99bwc9k"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-n0fy1o0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-n0fy1o0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "日志收集平台有多种组合方式："
				}
			]
		},
		{
			"ID": "20230322140520-5p2s3rz",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230322140520-5p2s3rz"
			},
			"Children": [
				{
					"ID": "20230322140520-7aoqcci",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-7aoqcci"
					},
					"Children": [
						{
							"ID": "20230322140520-vq8n804",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-vq8n804"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "ELK Stack 方式：Elasticsearch + Logstash + Filebeat + Kibana，业界最常见的架构。"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-7q11quz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-7q11quz"
					},
					"Children": [
						{
							"ID": "20230322140520-jta8xoe",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-jta8xoe"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Elasticsearch + Logstash + Kafka + Kibana，用上了消息中间件，但里面也有很多坑，放到下一讲。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-tbwwtkd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-tbwwtkd"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这次先讲解 ELK Stack 的方式，这种方式对我们的代码无侵入，核心思想就是收集磁盘的日志文件，然后导入到 Elasticsearch。"
				}
			]
		},
		{
			"ID": "20230322140520-g463921",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-g463921"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "比如我们的应用系统通过 logback 把日志写入到磁盘文件，然后通过这一套组合的中间件就能把日志采集起来供我们查询使用了。"
				}
			]
		},
		{
			"ID": "20230322140520-mpxignx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-mpxignx"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "整体的架构图如下所示，"
				}
			]
		},
		{
			"ID": "20230322140520-029d5jx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-029d5jx"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-8eq42vp"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-blcj4f1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-blcj4f1"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "流程如下："
				}
			]
		},
		{
			"ID": "20230322140520-ids2zjs",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230322140520-ids2zjs"
			},
			"Children": [
				{
					"ID": "20230322140520-c27d5l5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-c27d5l5"
					},
					"Children": [
						{
							"ID": "20230322140520-3ufp3pt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-3ufp3pt"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "先使用 Filebeat 把日志收集起来，然后把数据再传给 Logstash。"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-bbl6zvs",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-bbl6zvs"
					},
					"Children": [
						{
							"ID": "20230322140520-m9towdl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-m9towdl"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "通过 Logstash 强大的数据清洗功能。"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-ukkdrqm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-ukkdrqm"
					},
					"Children": [
						{
							"ID": "20230322140520-4b03v20",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-4b03v20"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "最终把数据写入到 Elasticsearch 中。"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-8ewxuhw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-8ewxuhw"
					},
					"Children": [
						{
							"ID": "20230322140520-cfhfen7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-cfhfen7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "并由 Kibana 进行可视化。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-nl9bzdc",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20230322140520-nl9bzdc"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20230322140520-5j1ylgd",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20230322140520-5j1ylgd"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "温馨提示：以下案例都在一台 ubuntu 虚拟机上完成，内存分配了 6G。"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-6hh3nds",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-6hh3nds"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一、部署 Elasticsearch 数据库"
				}
			]
		},
		{
			"ID": "20230322140520-55hkfd0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-55hkfd0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "获取 elasticsearch 镜像"
				}
			]
		},
		{
			"ID": "20230322140520-w22l2xj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-w22l2xj"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "docker pull elasticsearch:7.7.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-whp0m8v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-whp0m8v"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建挂载目录"
				}
			]
		},
		{
			"ID": "20230322140520-d16kihi",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-d16kihi"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /data/elk/es/{config,data,logs}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-2c0ucoz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-2c0ucoz"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "赋予权限"
				}
			]
		},
		{
			"ID": "20230322140520-vd50r72",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-vd50r72"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "chown -R 1000:1000 /data/elk/es\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-q0jsiip",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-q0jsiip"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建配置文件"
				}
			]
		},
		{
			"ID": "20230322140520-bl8wzqj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-bl8wzqj"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "cd /data/elk/es/config\ntouch elasticsearch.yml\n-----------------------配置内容----------------------------------\ncluster.name: \"my-es\"\nnetwork.host: 0.0.0.0\nhttp.port: 9200\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-ru37xrr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-ru37xrr"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "启动 elasticsearch 容器"
				}
			]
		},
		{
			"ID": "20230322140520-a9gfvfu",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-a9gfvfu"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "docker run -it  -d -p 9200:9200 -p 9300:9300 --name es -e ES_JAVA_OPTS=\"-Xms1g -Xmx1g\" -e \"discovery.type=single-node\" --restart=always -v /data/elk/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /data/elk/es/data:/usr/share/elasticsearch/data -v /data/elk/es/logs:/usr/share/elasticsearch/logs elasticsearch:7.7.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-2ujyotx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-2ujyotx"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "验证 elasticsearch 是否启动成功"
				}
			]
		},
		{
			"ID": "20230322140520-96snszo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-96snszo"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "curl http://localhost:9200\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-25xj3p5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-25xj3p5"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-u5ix7hx"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-nnqrqpb",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-nnqrqpb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "二、部署 Kibana 可视化工具"
				}
			]
		},
		{
			"ID": "20230322140520-xb12xmp",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-xb12xmp"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 安装 Kibana"
				}
			]
		},
		{
			"ID": "20230322140520-jkuup1e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-jkuup1e"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "获取 kibana 镜像"
				}
			]
		},
		{
			"ID": "20230322140520-wd53y5w",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-wd53y5w"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "docker pull kibana:7.7.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-glaosid",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-glaosid"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "获取elasticsearch容器 ip"
				}
			]
		},
		{
			"ID": "20230322140520-n4ntzj4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-n4ntzj4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "docker inspect --format '{{ .NetworkSettings.IPAddress }}' es\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-zdw0gch",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-zdw0gch"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "结果：172.17.0.2"
				}
			]
		},
		{
			"ID": "20230322140520-xivcoxu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-xivcoxu"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建 kibana 配置文件"
				}
			]
		},
		{
			"ID": "20230322140520-pcyzqbf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-pcyzqbf"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /data/elk/kibana/\nvim /data/elk/kibana/kibana.yml\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-6jzekus",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-6jzekus"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "配置内容："
				}
			]
		},
		{
			"ID": "20230322140520-15s8wxc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-15s8wxc"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#Default Kibana configuration for docker target\nserver.name: kibana\nserver.host: \"0\"\nelasticsearch.hosts: [\"http://172.17.0.2:9200\"]\nxpack.monitoring.ui.container.elasticsearch.enabled: true\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-zl4t3ln",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-zl4t3ln"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2 运行 kibana"
				}
			]
		},
		{
			"ID": "20230322140520-in5kdv5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-in5kdv5"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "docker run -d --restart=always --log-driver json-file --log-opt max-size=100m --log-opt max-file=2 --name kibana -p 5601:5601 -v /data/elk/kibana/kibana.yml:/usr/share/kibana/config/kibana.yml kibana:7.7.1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-ed4wjxo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-ed4wjxo"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "访问 http://192.168.56.10:5601。这个 IP 是服务器的 IP。Kibana 控制台的界面如下所示，打开 kibana 时，首页会提示让你选择加入一些测试数据，点击 try our sample data 按钮就可以了。"
				}
			]
		},
		{
			"ID": "20230322140520-54ovyc0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-54ovyc0"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-uywgqmf"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-j3vojls",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-j3vojls"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Kibana 界面上会提示你是否导入样例数据，选一个后，Kibana 会帮你自动导入，然后就可以进入到 Discover 窗口搜索日志了。"
				}
			]
		},
		{
			"ID": "20230322140520-nyo47ag",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-nyo47ag"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-57ven2g"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\nimage-20220427161645270"
				}
			]
		},
		{
			"ID": "20230322140520-68bd61v",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-68bd61v"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "三、部署 logstash 日志过滤、转换工具"
				}
			]
		},
		{
			"ID": "20230322140520-1lt447a",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-1lt447a"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 安装 Java JDK"
				}
			]
		},
		{
			"ID": "20230322140520-ryls8p9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-ryls8p9"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$ sudo apt install openjdk-8-jdk\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-18imp9l",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-18imp9l"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "修改 /etc/profile 文件"
				}
			]
		},
		{
			"ID": "20230322140520-1q1u00q",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-1q1u00q"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sudo vim /etc/profile\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-n3eb0jj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-n3eb0jj"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "添加如下的内容到你的 .profile 文件中："
				}
			]
		},
		{
			"ID": "20230322140520-aah6n6e",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-aah6n6e"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# JAVA\nJAVA_HOME=\"/usr/lib/jdk/jdk-12\"\nPATH=\"$PATH:$JAVA_HOME/bin\"\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-pha2tv6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-pha2tv6"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "再在命令行中打入如下的命令："
				}
			]
		},
		{
			"ID": "20230322140520-n8cet7z",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-n8cet7z"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "source /etc/profile\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-6218mue",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-6218mue"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "查看 java 是否配置成功"
				}
			]
		},
		{
			"ID": "20230322140520-nowl0mz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-nowl0mz"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "java -version\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-x5eazfe",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-x5eazfe"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2 安装 logstash"
				}
			]
		},
		{
			"ID": "20230322140520-p9oo38a",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-p9oo38a"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "下载 logstash 安装包"
				}
			]
		},
		{
			"ID": "20230322140520-es19lnd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-es19lnd"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "curl -L -O https://artifacts.elastic.co/downloads/logstash/logstash-7.7.1.tar.gz\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-enenedi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-enenedi"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "解压安装"
				}
			]
		},
		{
			"ID": "20230322140520-evokxqa",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-evokxqa"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "tar -xzvf logstash-7.7.1.tar.gz\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-36gamew",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-36gamew"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要测试 Logstash 安装，请运行最基本的 Logstash 管道。例如："
				}
			]
		},
		{
			"ID": "20230322140520-8ppk5p8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-8ppk5p8"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "cd logstash-7.7.1\nbin/logstash -e 'input { stdin { } } output { stdout {} }'\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-56ii3cb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-56ii3cb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "等 Logstash 完成启动后，我们在 stdin 里输入以下文字，我们可以看到如下的输出："
				}
			]
		},
		{
			"ID": "20230322140520-910idcq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-910idcq"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-23v2ry4"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-693y4g6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-693y4g6"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当我们打入一行字符然后回车，那么我们马上可以在 stdout 上看到输出的信息。如果我们能看到这个输出，说明我们的 Logstash 的安装是成功的。"
				}
			]
		},
		{
			"ID": "20230322140520-u1nllqg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-u1nllqg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们进入到 Logstash 安装目录，并修改 config/logstash.yml 文件。我们把 config.reload.automatic 设置为 true。"
				}
			]
		},
		{
			"ID": "20230322140520-y6o73ov",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-y6o73ov"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-xhgh23b"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-0em906o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-0em906o"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "另外一种运行 Logstash 的方式，也是一种最为常见的运行方式，运行时指定 logstash 配置文件。"
				}
			]
		},
		{
			"ID": "20230322140520-l10zx3u",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-l10zx3u"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3 配置 logstash"
				}
			]
		},
		{
			"ID": "20230322140520-fv4iu6j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-fv4iu6j"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Logstash 配置文件有两个必需元素，输入（inputs）和输出（ouputs），以及一个可选元素 filters。输入插件配置来源数据，过滤器插件在你指定时修改数据，输出插件将数据写入目标。"
				}
			]
		},
		{
			"ID": "20230322140520-3hqlmh1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-3hqlmh1"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-5fspx1h"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-4avi5jm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-4avi5jm"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们首先需要创建一个配置文件，配置内容如下图所示："
				}
			]
		},
		{
			"ID": "20230322140520-hkzkyqz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-hkzkyqz"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-yn4kmjl"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-nn58n1n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-nn58n1n"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建 kibana 配置文件 weblog.conf"
				}
			]
		},
		{
			"ID": "20230322140520-vlkpl9z",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-vlkpl9z"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /logstash-7.7.1/streamconf\nvim /logstash-7.7.1/streamconf/weblog.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-0jdne0z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-0jdne0z"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "配置内容如下："
				}
			]
		},
		{
			"ID": "20230322140520-h6fvrh9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-h6fvrh9"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "input {\n  tcp {\n    port =\u003e 9900\n  }\n} filter {\n  grok {\n    match =\u003e { \"message\" =\u003e \"%{COMBINEDAPACHELOG}\" }\n  }   mutate {\n    convert =\u003e {\n      \"bytes\" =\u003e \"integer\"\n    }\n  }   geoip {\n    source =\u003e \"clientip\"\n  }   useragent {\n    source =\u003e \"agent\"\n    target =\u003e \"useragent\"\n  }   date {\n    match =\u003e [\"timestamp\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n  }\n} output {\n  stdout { }   elasticsearch {\n    hosts =\u003e [\"localhost:9200\"]\n  }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-f2zco5x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-f2zco5x"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在上面，我们同时保留两个输出：stdout 及 elasticsearch。事实上，我们可以定义很多个的输出。stdout 输出对于我们初期的调试是非常有帮助的。等我们完善了所有的调试，我们可以把上面的 stdout 输出关掉。"
				}
			]
		},
		{
			"ID": "20230322140520-mqrkb4r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-mqrkb4r"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "等更新完这个配置文件后，我们在另外一个 console 中发送第一个 log："
				}
			]
		},
		{
			"ID": "20230322140520-j7n4tih",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-j7n4tih"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "head -n 1 weblog-sample.log | nc localhost 9900\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-d6qh7ju",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-d6qh7ju"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这个命令的意思：我们使用 nc 应用读取第一行数据，然后发送到 TCP 端口号 9900，并查看 console 的输出。"
				}
			]
		},
		{
			"ID": "20230322140520-xxyagvv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-xxyagvv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这里的 weblog-sample.log 为样例数据，内容如下，把它放到本地作为日志文件。"
				}
			]
		},
		{
			"ID": "20230322140520-scp728b",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20230322140520-scp728b"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20230322140520-liubtfm",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20230322140520-liubtfm"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "14.49.42.25 - - [12/May/2019:01:24:44 +0000] \"GET /articles/ppp-over-ssh/ HTTP/1.1\" 200 18586 \"-\" \"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2b1) Gecko/20091014 Firefox/3.6b1 GTB5\""
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-m9kyb3p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-m9kyb3p"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "logstash 控制台打印出了 weblog-samle.log 中的内容："
				}
			]
		},
		{
			"ID": "20230322140520-zxfqeq6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-zxfqeq6"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-xfy2v5l"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-02xckyl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-02xckyl"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这一次，我们打开 Kibana，执行命令，成功看到 es 中的这条记录。"
				}
			]
		},
		{
			"ID": "20230322140520-2op9ljs",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-2op9ljs"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "GET logstash/_search\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-pqe13pd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-pqe13pd"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-xr9xatn"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-73wzvyu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-73wzvyu"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "四、部署 Filebeat 日志收集工具"
				}
			]
		},
		{
			"ID": "20230322140520-s6gfh1y",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-s6gfh1y"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1 安装 Filebeat"
				}
			]
		},
		{
			"ID": "20230322140520-3snohpa",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-3snohpa"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.7.1-linux-x86_64.tar.gz\ntar xzvf filebeat-7.7.1-linux-x86_64.tar.gz\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-pbcttii",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-pbcttii"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "请注意：由于 ELK 迭代比较快，我们可以把上面的版本 7.7.1 替换成我们需要的版本即可。我们先不要运行 Filebeat。"
				}
			]
		},
		{
			"ID": "20230322140520-6hlbjvz",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-6hlbjvz"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2 配置 Filebeat"
				}
			]
		},
		{
			"ID": "20230322140520-jl86z8t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-jl86z8t"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们在 Filebeat 的安装目录下，可以创建一个这样的 filebeat_apache.yml 文件，它的内容如下，首先先让 filebeat 直接将日志文件导入到 elasticsearch，来确认 filebeat 是否正常工作"
				}
			]
		},
		{
			"ID": "20230322140520-83bru3b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-83bru3b"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "filebeat.inputs:\n- type: log\n  enabled: true\n  paths:\n    - /home/vagrant/logs/*.logoutput.elasticsearch:\n  hosts: [\"192.168.56.10:9200\"]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-5231rqy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-5231rqy"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "paths 对应你的日志文件夹路径，我配置的是这个：/home/vagrant/logs/*.log，之前配置成 /home/vagrant/logs 不能正常收集。另外这里可以放入多个日志路径。"
				}
			]
		},
		{
			"ID": "20230322140520-19z1rqt",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-19z1rqt"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3 测试 Filebeat"
				}
			]
		},
		{
			"ID": "20230322140520-uxu4gmj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-uxu4gmj"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在使用时，你先要启动 Logstash，然后再启动 Filebeat。"
				}
			]
		},
		{
			"ID": "20230322140520-burxqbk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-burxqbk"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "bin/logstash -f weblog.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-gii4n03",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-gii4n03"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，再运行 Filebeat， -c 表示运行指定的配置文件，这里是 filebeat_apache.yml。"
				}
			]
		},
		{
			"ID": "20230322140520-dg41af3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-dg41af3"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "./filebeat -e -c filebeat_apache.yml\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-2c853zx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-2c853zx"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "运行结果如下所示，一定要确认下控制台中是否打印了加载和监控了我们指定的日志。如下图所示，有三个日志文件被监控到了：error.log、info.log、debug.log"
				}
			]
		},
		{
			"ID": "20230322140520-20fdqky",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-20fdqky"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-uugxq81"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-rrw99jz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-rrw99jz"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们可以通过这个命令查看 filebeat 的日志是否导入成功了："
				}
			]
		},
		{
			"ID": "20230322140520-4rqm89e",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-4rqm89e"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "curl http://localhost:9200/_cat/indices?v\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-vljns3u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-vljns3u"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这个命令会查询 Elasticsearch 中所有的索引，如下图所示，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "filebeat-7.7.1-*"
				},
				{
					"Type": "NodeText",
					"Data": " 索引创建成功了。因为我没有配置索引的名字，所以这个索引的名字是默认的，。"
				}
			]
		},
		{
			"ID": "20230322140520-vjo7sl6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-vjo7sl6"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-lymn65j"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-tiaf3ok",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-tiaf3ok"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 kibana 中搜索日志，可以看到导入的 error 的日志了。不过我们先得在 kibana 中创建 filebeat 的索引（点击 create index pattern 按钮，然后输入 filebeat 关键字，添加这个索引），然后才能在 kibana 的 Discover 控制台查询日志。"
				}
			]
		},
		{
			"ID": "20230322140520-xvt33hh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-xvt33hh"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-z69c9e4"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n创建查询的索引"
				}
			]
		},
		{
			"ID": "20230322140520-qggo5rn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-qggo5rn"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-z04dz34"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\n搜索日志"
				}
			]
		},
		{
			"ID": "20230322140520-78t32pv",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-78t32pv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4 Filebeat + Logstash"
				}
			]
		},
		{
			"ID": "20230322140520-604e2ai",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-604e2ai"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "接下来我们配置 filebeat 收集日志后，输出到 logstash，然后由 logstash 转换数据后输出到 elasticsearch。"
				}
			]
		},
		{
			"ID": "20230322140520-jbdlgnt",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-jbdlgnt"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "filebeat.inputs:- type: log\n  enabled: true\n  paths:\n    - /home/vagrant/logs/*.logoutput.logstash:\n  hosts: [\"localhost:9900\"]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-h0u2v3g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-h0u2v3g"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "修改 logstash 配置文件"
				}
			]
		},
		{
			"ID": "20230322140520-9z38mqj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-9z38mqj"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "vim /logstash-7.7.1/streamconf/weblog.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-gmuksrg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-gmuksrg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "配置了 input 为 beats，修改了 useragent"
				}
			]
		},
		{
			"ID": "20230322140520-ikgfyr2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-ikgfyr2"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "input {  \n  beats {\n    port =\u003e \"9900\"\n  }\n} filter {\n  grok {\n    match =\u003e { \"message\" =\u003e \"%{COMBINEDAPACHELOG}\" }\n  }   mutate {\n    convert =\u003e {\n      \"bytes\" =\u003e \"integer\"\n    }\n  }   geoip {\n    source =\u003e \"clientip\"\n  }   useragent {\n    source =\u003e \"user_agent\"\n    target =\u003e \"useragent\"\n  }   date {\n    match =\u003e [\"timestamp\", \"dd/MMM/yyyy:HH:mm:ss Z\"]\n  }\n} output {\n  stdout {\n    codec =\u003e dots {}\n  }   elasticsearch {\n    hosts=\u003e[\"192.168.56.10:9200\"]\n    index =\u003e \"apache_elastic_example\"\n  }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-z2lscvb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-z2lscvb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后重新启动 logstash 和 filebeat。有个问题，这次启动 filebeat 的时候，只监测到了一个 info.log 文件，而 error.log 和 debug.log 没有监测到，导致只有 info.log 导入到了 Elasticsearch 中。"
				}
			]
		},
		{
			"ID": "20230322140520-65v7hpy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-65v7hpy"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-nnahgx7"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\nfilebeat 只监测到了 info.log 文件"
				}
			]
		},
		{
			"ID": "20230322140520-z3kc4z3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-z3kc4z3"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "logstash 输出结果如下，会有格式化后的日志："
				}
			]
		},
		{
			"ID": "20230322140520-teju2nt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-teju2nt"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-znpy6px"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-aoqtebb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-aoqtebb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们在 Kibana dev tools 中可以看到索引 apache_elastic_example，说明索引创建成功，日志也导入到了 elasticsearch 中。"
				}
			]
		},
		{
			"ID": "20230322140520-cubjtb1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-cubjtb1"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-wcsp8xa"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-yvhegfh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-yvhegfh"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "另外注意下 logstash 中的 grok 过滤器，指定的 message 的格式需要和自己的日志的格式相匹配，这样才能将我们的日志内容正确映射到 message 字段上。"
				}
			]
		},
		{
			"ID": "20230322140520-umr4d7y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-umr4d7y"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "例如我的 logback 的配置信息如下："
				}
			]
		},
		{
			"ID": "20230322140520-df8uw4c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-df8uw4c"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-uxkty9e"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "\nlogback 配置"
				}
			]
		},
		{
			"ID": "20230322140520-kd4ox1o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-kd4ox1o"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "而我的 logstash 配置如下，和 logback 的 pettern 是一致的。"
				}
			]
		},
		{
			"ID": "20230322140520-lpl2184",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-lpl2184"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "grok {\n    match =\u003e { \"message\" =\u003e \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger -%msg%n\" }\n  }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-d16qffn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-d16qffn"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后我们在 es 中就能看到日志文件中的信息了。如下图所示："
				}
			]
		},
		{
			"ID": "20230322140520-h2ko4lp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-h2ko4lp"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20230322140520-2ng4acx"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-rvolfqt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-rvolfqt"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "至此，Elasticsearch + Logstash + Kibana + Filebeat 部署成功，可以愉快地查询日志了~"
				}
			]
		},
		{
			"ID": "20230322140520-5rw90so",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-5rw90so"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "后续升级方案："
				}
			]
		},
		{
			"ID": "20230322140520-u3n1ezs",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230322140520-u3n1ezs"
			},
			"Children": [
				{
					"ID": "20230322140520-t8wbzz2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-t8wbzz2"
					},
					"Children": [
						{
							"ID": "20230322140520-xw6r6a8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-xw6r6a8"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加上 Kafka"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-wqtc8p5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-wqtc8p5"
					},
					"Children": [
						{
							"ID": "20230322140520-cma883s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-cma883s"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "加上 Grafana 监控"
								}
							]
						}
					]
				},
				{
					"ID": "20230322140520-uwhqaqn",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230322140520-uwhqaqn"
					},
					"Children": [
						{
							"ID": "20230322140520-mqpahra",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230322140520-mqpahra"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "链路追踪"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230322140520-hto1117",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230322140520-hto1117"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "五、遇到的问题和解决方案"
				}
			]
		},
		{
			"ID": "20230322140520-bnaim4y",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-bnaim4y"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1 拉取 kibana 镜像失败"
				}
			]
		},
		{
			"ID": "20230322140520-yn21txw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-yn21txw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "failed to register layer: Error processing tar file(exit status 2): fatal error: runtime: out of memory"
				}
			]
		},
		{
			"ID": "20230322140520-kew1fsy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-kew1fsy"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "原因是 inodes 资源耗尽 ， 清理一下即可"
				}
			]
		},
		{
			"ID": "20230322140520-44zys29",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-44zys29"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "df -i\nsudo find . -xdev -type f | cut -d \"/\" -f 2 | sort | uniq -c | sort -n\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-7hlya0d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230322140520-7hlya0d"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "curl -s https://raw.githubusercontent.com/ZZROTDesign/docker-clean/v2.0.4/docker-clean |\nsudo tee /usr/local/bin/docker-clean \u003e /dev/null \u0026\u0026 \\\nsudo chmod +x /usr/local/bin/docker-clean\ndocker-clean\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230322140520-l65na4x",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-l65na4x"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2 拉取 kibana 镜像失败"
				}
			]
		},
		{
			"ID": "20230322140520-c6igbu8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-c6igbu8"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "docker pull runtime: out of memory"
				}
			]
		},
		{
			"ID": "20230322140520-0z4q07g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-0z4q07g"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "增加虚拟机内存大小"
				}
			]
		},
		{
			"ID": "20230322140520-pusosu3",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230322140520-pusosu3"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.3 Kibana 无法启动"
				}
			]
		},
		{
			"ID": "20230322140520-zjmj6nz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-zjmj6nz"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\"License information could not be obtained from Elasticsearch due to Error: No Living connections error\"}"
				}
			]
		},
		{
			"ID": "20230322140520-t6piide",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-t6piide"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "看下配置的 IP 地址是不是容器的 IP。"
				}
			]
		},
		{
			"ID": "20230322140520-y5qr6re",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20230322140520-y5qr6re"
			}
		},
		{
			"ID": "20230322140520-dhxmy2b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-dhxmy2b"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "参考链接："
				}
			]
		},
		{
			"ID": "20230322140520-f5elyba",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-f5elyba"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://blog.csdn.net/UbuntuTouch/article/details/105973985"
				}
			]
		},
		{
			"ID": "20230322140520-cm512sp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-cm512sp"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://blog.csdn.net/UbuntuTouch/article/details/105979677"
				}
			]
		},
		{
			"ID": "20230322140520-ve3xgtl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-ve3xgtl"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://blog.csdn.net/yuemancanyang/article/details/122769308"
				}
			]
		},
		{
			"ID": "20230322140520-me9k12b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-me9k12b"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://elasticstack.blog.csdn.net/article/details/105922198"
				}
			]
		},
		{
			"ID": "20230322140520-mrietd2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230322140520-mrietd2"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://www.jianshu.com/p/8239d32f19e6"
				}
			]
		}
	]
}