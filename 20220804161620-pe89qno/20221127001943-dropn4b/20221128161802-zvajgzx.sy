{
	"ID": "20221128161802-zvajgzx",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20221128161802-zvajgzx",
		"title": "7-OVN架构",
		"updated": "20221129013505"
	},
	"Children": [
		{
			"ID": "20221129013504-w0x7geg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129013504-w0x7geg",
				"updated": "20221129013505"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "https://www.cnblogs.com/laolieren/p/ovn-architecture.html"
				}
			]
		},
		{
			"ID": "20221128161802-94pcca3",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221128161802-94pcca3",
				"updated": "20221128161906"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1. 简介"
				}
			]
		},
		{
			"ID": "20221128161931-e4bb94e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128161931-e4bb94e",
				"updated": "20221128161932"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN，即"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Open Virtual Network"
				},
				{
					"Type": "NodeText",
					"Data": "，是一个支持虚拟网络抽象的系统。\nOVN补充了OVS的现有功能，增加了对虚拟网络抽象的原生(native)支持，比如虚拟2层和3层还有安全组（security group）。\nDHCP等服务也是其理想的特性。和OVS一样，OVN之所以设计出来，就是为了获得一个可以大规模运行的产品级实现。"
				}
			]
		},
		{
			"ID": "20221128161907-82e2hjl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221128161907-82e2hjl",
				"updated": "20221128161919"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.1 OVN实现部分"
				}
			]
		},
		{
			"ID": "20221128162007-8bnd4e1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128162007-8bnd4e1",
				"updated": "20221128162007"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN的实现包括下面几个部分："
				}
			]
		},
		{
			"ID": "20221128162007-cuamhe9",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221128162007-cuamhe9",
				"updated": "20221128162052"
			},
			"Children": [
				{
					"ID": "20221128162007-9761euf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162007-9761euf",
						"updated": "20221128162052"
					},
					"Children": [
						{
							"ID": "20221128162007-rbjkbjg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162007-rbjkbjg",
								"updated": "20221128162052"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "云管系统"
								},
								{
									"Type": "NodeText",
									"Data": "（Cloud Management System：CMS）：\n作为OVN的客户端（通过其用户及管理员）。\n如果要集成OVN，则需要安装用于CMS的特定插件及相关软件（见下文）。OVN最初目标是将OpenStack作为它的CMS。"
								}
							]
						},
						{
							"ID": "20221128162007-79yus4h",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221128162007-79yus4h"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221128162007-szvdvuc",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221128162007-szvdvuc"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "也可能存在这样的场景：多个CMS管理OVN部署的不同部分。"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221128162007-yiwpwao",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162007-yiwpwao"
					},
					"Children": [
						{
							"ID": "20221128162007-93mwbjs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162007-93mwbjs"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "物理或虚拟"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "OVN数据库节点"
								},
								{
									"Type": "NodeText",
									"Data": "（或集群）：\n安装在OVN实现中心的位置"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162007-i7f3ufz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162007-i7f3ufz"
					},
					"Children": [
						{
							"ID": "20221128162007-roumkgh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162007-roumkgh"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一个或更多的（一般来说有很多）"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "虚拟机管理程序"
								},
								{
									"Type": "NodeText",
									"Data": "（hypervisor）：\n管理程序必须运行Open vSwitch,并实现OVN source tree里"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "IntegrationGuide.rst"
								},
								{
									"Type": "NodeText",
									"Data": "文件中所描述的接口。\n我们可以使用任何Open vSwitch支持的虚拟机监控程序平台。"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162007-h485i14",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162007-h485i14"
					},
					"Children": [
						{
							"ID": "20221128162007-oywcfef",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162007-oywcfef"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "零个或更多的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "网关"
								},
								{
									"Type": "NodeText",
									"Data": "：\n网关通过在隧道和物理以太网端口之间双向转发数据包，将基于隧道的逻辑网络扩展到物理网络中。\n这样一来，非虚拟机便可以参与逻辑网络。网关可以是物理主机、虚拟机或者基于ASIC且支持"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "vtep"
								},
								{
									"Type": "NodeText",
									"Data": "模式的硬件交换机。"
								}
							]
						},
						{
							"ID": "20221128162007-nczchp4",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221128162007-nczchp4"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221128162007-powl0s6",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221128162007-powl0s6"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "虚拟机管理程序(Hypervisor)和网关(gateway)一起被称为"
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "code",
											"TextMarkTextContent": "传输节点(transport node)"
										},
										{
											"Type": "NodeText",
											"Data": "或"
										},
										{
											"Type": "NodeTextMark",
											"TextMarkType": "code",
											"TextMarkTextContent": "chassis"
										},
										{
											"Type": "NodeText",
											"Data": "。"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221128162216-6196yoq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221128162216-6196yoq",
				"updated": "20221128162222"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2 OVN主要部分和软件交互"
				}
			]
		},
		{
			"ID": "20221128162237-x4a1ttt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128162237-x4a1ttt",
				"updated": "20221128162237"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "下图展示了OVN的主要部分和相关的软件交互:"
				}
			]
		},
		{
			"ID": "20221128162237-d5nla3r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128162237-d5nla3r",
				"updated": "20221128162316"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image.png"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20221128162315-68o6525.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221128162337-iuah0sy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128162337-iuah0sy",
				"updated": "20221128162337"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从图表的最上面开始，主要有："
				}
			]
		},
		{
			"ID": "20221128162337-3v38six",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221128162337-3v38six",
				"updated": "20221128162337"
			},
			"Children": [
				{
					"ID": "20221128162337-0mymh78",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-0mymh78"
					},
					"Children": [
						{
							"ID": "20221128162337-9tsy7sp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-9tsy7sp"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "云管系统(Cloud Management System)"
								},
								{
									"Type": "NodeText",
									"Data": " : 即最上面的部分"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162337-7xes1j6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-7xes1j6"
					},
					"Children": [
						{
							"ID": "20221128162337-w8oldqz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-w8oldqz"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "OVN/CMS 插件（Plugin）"
								},
								{
									"Type": "NodeText",
									"Data": " ：插件是用作OVN接口的CMS组件。在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "OpenStack"
								},
								{
									"Type": "NodeText",
									"Data": "中，就是一个"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Neutron插件"
								},
								{
									"Type": "NodeText",
									"Data": "。\n插件的主要目的就是将CMS的逻辑网络配置概念（以CMS可识别的特定格式存储在CMS的配置数据库中），转换为OVN可以理解的中间格式。\n此组件必须是CMS特定的，因此，需要为每个与OVN集成的CMS开发一个新插件。上图中此组件下面的所有组件都是独立于CMS的。"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162337-xrkdkd1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-xrkdkd1"
					},
					"Children": [
						{
							"ID": "20221128162337-ch8wvqd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-ch8wvqd"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "OVN北向数据库（Northbound Database）"
								},
								{
									"Type": "NodeText",
									"Data": " ：接收OVN/CMS插件传递的逻辑网络配置的中间表示。\n数据库模式与CMS中使用的概念"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "阻抗匹配（impedance matched）"
								},
								{
									"Type": "NodeText",
									"Data": "，因此它直接支持逻辑交换机、路由器、ACL等概念。详见ovn nb。\nOVN北向数据库有两个客户端：它上面的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "OVN/CMS插件"
								},
								{
									"Type": "NodeText",
									"Data": "还有它下面的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovn-northd"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162337-rnu7rd9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-rnu7rd9"
					},
					"Children": [
						{
							"ID": "20221128162337-9xsntde",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-9xsntde"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ovn-northd"
								},
								{
									"Type": "NodeText",
									"Data": " : 它上连OVN北向数据库，下连OVN南向数据库。\n它将从北向数据库中获得的传统网络概念中的逻辑网络配置，转换为它下面的南向数据库所能理解的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "逻辑数据路径流"
								},
								{
									"Type": "NodeText",
									"Data": "（logical datapath flow）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221128162337-8bke04i",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-8bke04i"
					},
					"Children": [
						{
							"ID": "20221128162337-0po16y5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-0po16y5"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "OVN南向数据库（Southbound Database）"
								},
								{
									"Type": "NodeText",
									"Data": " ：这是本系统的中心。\n它的客户端(client)包括其上的ovn-northd，以及其下每个传输节点上的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovn-controller"
								},
								{
									"Type": "NodeText",
									"Data": "。\nOVN南向数据库包含三种数据："
								}
							]
						},
						{
							"ID": "20221128162337-llflswj",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221128162337-llflswj"
							},
							"Children": [
								{
									"ID": "20221128162337-gyexxa1",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221128162337-gyexxa1"
									},
									"Children": [
										{
											"ID": "20221128162337-u823plj",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221128162337-u823plj"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "strong",
													"TextMarkTextContent": "物理网络(Physical Network (PN))表"
												},
												{
													"Type": "NodeText",
													"Data": " ：指明如何访问hypervisor和其他节点"
												}
											]
										}
									]
								},
								{
									"ID": "20221128162337-gcxi4io",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221128162337-gcxi4io"
									},
									"Children": [
										{
											"ID": "20221128162337-lqk1g6o",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221128162337-lqk1g6o"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "strong",
													"TextMarkTextContent": "逻辑网络(Logical Network (LN))表"
												},
												{
													"Type": "NodeText",
													"Data": " ：用"
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "逻辑数据路径流（logical datapath flows）"
												},
												{
													"Type": "NodeText",
													"Data": "来描述逻辑网络，"
												}
											]
										}
									]
								},
								{
									"ID": "20221128162337-2yrhrqk",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221128162337-2yrhrqk"
									},
									"Children": [
										{
											"ID": "20221128162337-vj3tmrv",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221128162337-vj3tmrv"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "strong",
													"TextMarkTextContent": "绑定表"
												},
												{
													"Type": "NodeText",
													"Data": " ：将逻辑网络组件的位置链接到物理网络"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221128162337-m9x2i1a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-m9x2i1a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "OVN南向数据库的性能必须随着传输节点的变化而变化。这就需要在遇到瓶颈的时候在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovsdb-server"
								},
								{
									"Type": "NodeText",
									"Data": "上进行一些工作。\n可能需要引入集群来提升可用性。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221128162337-u6gdxke",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221128162337-u6gdxke",
				"updated": "20221128162337"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "其余组件将被复制到每个虚拟机监控程序（hypervisor）上："
				}
			]
		},
		{
			"ID": "20221128162337-nbr333e",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221128162337-nbr333e",
				"updated": "20221128162337"
			},
			"Children": [
				{
					"ID": "20221128162337-auvijiy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-auvijiy"
					},
					"Children": [
						{
							"ID": "20221128162337-av9itw1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-av9itw1"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ovn-controller"
								},
								{
									"Type": "NodeText",
									"Data": " ：是每个hypervisor和软件网关上的agent。"
								}
							]
						},
						{
							"ID": "20221128162337-itfcx4z",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221128162337-itfcx4z"
							},
							"Children": [
								{
									"ID": "20221128162337-a4xufon",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221128162337-a4xufon"
									},
									"Children": [
										{
											"ID": "20221128162337-1op5s8c",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221128162337-1op5s8c"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "北向而言，它连接到南向数据库来获取OVN的配置及状态，并用hypervisor的状态填充绑定表中的PN表和Chassis列。"
												}
											]
										}
									]
								},
								{
									"ID": "20221128162337-ejbb51z",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221128162337-ejbb51z"
									},
									"Children": [
										{
											"ID": "20221128162337-g8xkf94",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221128162337-g8xkf94"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "南向而言，它作为OpenFlow controller连接到 ovs-vswitchd 来控制网络流量 ，\n并连接到本地"
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "ovsdb-server"
												},
												{
													"Type": "NodeText",
													"Data": "来监控和控制Open vSwitch的配置。"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221128162337-dri6a3g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221128162337-dri6a3g"
					},
					"Children": [
						{
							"ID": "20221128162337-3or5iff",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221128162337-3or5iff"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ovs-vswitchd 和 ovsdb-server"
								},
								{
									"Type": "NodeText",
									"Data": " ：Open vSwitch的传统组件。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129002830-y3y2ekz",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129002830-y3y2ekz",
				"updated": "20221129002905"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2. OVN中的信息流"
				}
			]
		},
		{
			"ID": "20221129002919-gl6ljhf",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129002919-gl6ljhf",
				"updated": "20221129002925"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 配置数据"
				}
			]
		},
		{
			"ID": "20221129002919-f53mgdc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129002919-f53mgdc",
				"updated": "20221129002919"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN中的配置数据从北向南流动。"
				}
			]
		},
		{
			"ID": "20221129002919-1by1xsg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129002919-1by1xsg",
				"updated": "20221129002919"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "CMS使用其OVN/CMS插件，通过北向数据库来将逻辑网络配置传递给ovn-northd。\n另外一边，ovn-northd将配置编译成一个较低级别的形式，并通过南向数据库将其传递给所有chassis"
				}
			]
		},
		{
			"ID": "20221129003002-hbsrq1y",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129003002-hbsrq1y",
				"updated": "20221129003002"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2、状态信息"
				}
			]
		},
		{
			"ID": "20221129003002-48yi49h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003002-48yi49h",
				"updated": "20221129003002"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN中的状态信息从南向北流动。"
				}
			]
		},
		{
			"ID": "20221129003002-uimm9re",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003002-uimm9re",
				"updated": "20221129003002"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN目前只提供几种形式的状态信息。"
				}
			]
		},
		{
			"ID": "20221129003002-mak1k6e",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129003002-mak1k6e",
				"updated": "20221129003026"
			},
			"Children": [
				{
					"ID": "20221129003002-vwjud49",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129003002-vwjud49",
						"updated": "20221129003022"
					},
					"Children": [
						{
							"ID": "20221129003002-mharplr",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20221129003002-mharplr",
								"updated": "20221129003022"
							},
							"Children": [
								{
									"ID": "20221129003022-ilnak7n",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20221129003022-ilnak7n"
									},
									"Children": [
										{
											"ID": "20221129003022-q6g7hyk",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129003022-q6g7hyk"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "首先：ovn-northd填充北向Logical_Switch_Port表中的up列：\n如果南向端口绑定表中的逻辑端口chassis列非空，则将其设为true，否则为false。\n这让CMS可以检测VM的网络何时起来（come up）。"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221129003002-f85v4i1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129003002-f85v4i1",
						"updated": "20221129003026"
					},
					"Children": [
						{
							"ID": "20221129003002-nvlrns2",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20221129003002-nvlrns2",
								"updated": "20221129003026"
							},
							"Children": [
								{
									"ID": "20221129003026-o7nbnsw",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20221129003026-o7nbnsw"
									},
									"Children": [
										{
											"ID": "20221129003026-unnrrw6",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129003026-unnrrw6"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "其次：OVN向CMS提供其配置实现的反馈，即CMS提供的配置是否已经生效。\n该特性需要CMS参与序列号协议（sequence number protocol），其工作方式如下："
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221129003002-dpr4w52",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129003002-dpr4w52"
							},
							"Children": [
								{
									"ID": "20221129003002-jkkxjaz",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129003002-jkkxjaz"
									},
									"Children": [
										{
											"ID": "20221129003002-a8xxeqp",
											"Type": "NodeList",
											"ListData": {
												"Typ": 1
											},
											"Properties": {
												"id": "20221129003002-a8xxeqp"
											},
											"Children": [
												{
													"ID": "20221129003002-0za7h1x",
													"Type": "NodeListItem",
													"ListData": {
														"Typ": 1,
														"Delimiter": 46,
														"Marker": "MS4=",
														"Num": 1
													},
													"Properties": {
														"id": "20221129003002-0za7h1x"
													},
													"Children": [
														{
															"ID": "20221129003002-ivs2uym",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129003002-ivs2uym"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "当CMS更新北向数据库中的配置时，作为同一事务的一部分，它将增加"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "NB_Global"
																},
																{
																	"Type": "NodeText",
																	"Data": "表中的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "nb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "列的值。\n（只有当CMS想知道配置何时实现时，这才是必要的。）"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129003002-gnd1s0w",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129003002-gnd1s0w"
									},
									"Children": [
										{
											"ID": "20221129003002-8nsckn0",
											"Type": "NodeList",
											"ListData": {
												"Typ": 1
											},
											"Properties": {
												"id": "20221129003002-8nsckn0"
											},
											"Children": [
												{
													"ID": "20221129003002-th1a2wd",
													"Type": "NodeListItem",
													"ListData": {
														"Typ": 1,
														"Delimiter": 46,
														"Marker": "Mi4=",
														"Num": 2
													},
													"Properties": {
														"id": "20221129003002-th1a2wd"
													},
													"Children": [
														{
															"ID": "20221129003002-ody9554",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129003002-ody9554"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "当ovn-northd基于北向数据库的给定快照（snapshot）更新南向数据库时，作为同一事务的一部分，\n它将"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "nb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "从北向数据库的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "NB_Global"
																},
																{
																	"Type": "NodeText",
																	"Data": "复制到南向数据库的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "SB_Global"
																},
																{
																	"Type": "NodeText",
																	"Data": "表中。\n（这样一来，监视两个数据库的观察者就可以确定南向数据库何时赶上北向数据库。）"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129003002-j807i7h",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129003002-j807i7h"
									},
									"Children": [
										{
											"ID": "20221129003002-dcxs7wr",
											"Type": "NodeList",
											"ListData": {
												"Typ": 1
											},
											"Properties": {
												"id": "20221129003002-dcxs7wr"
											},
											"Children": [
												{
													"ID": "20221129003002-ax7wxdc",
													"Type": "NodeListItem",
													"ListData": {
														"Typ": 1,
														"Delimiter": 46,
														"Marker": "My4=",
														"Num": 3
													},
													"Properties": {
														"id": "20221129003002-ax7wxdc"
													},
													"Children": [
														{
															"ID": "20221129003002-pfzk0fh",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129003002-pfzk0fh"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "在ovn northd从southerbound数据库服务器收到其更改已提交的确认之后，\n它将"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "NB_Global"
																},
																{
																	"Type": "NodeText",
																	"Data": "表中的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "sb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "更新为被已被推到下面的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "nb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "版本。\n（这样一来，CMS或另一个观察者可以确定南向数据库何时被挂起（caught up），而不用与南向数据库连接）。"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129003002-mlk85ez",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129003002-mlk85ez"
									},
									"Children": [
										{
											"ID": "20221129003002-ku510z8",
											"Type": "NodeList",
											"ListData": {
												"Typ": 1
											},
											"Properties": {
												"id": "20221129003002-ku510z8"
											},
											"Children": [
												{
													"ID": "20221129003002-0zvk772",
													"Type": "NodeListItem",
													"ListData": {
														"Typ": 1,
														"Delimiter": 46,
														"Marker": "NC4=",
														"Num": 4
													},
													"Properties": {
														"id": "20221129003002-0zvk772"
													},
													"Children": [
														{
															"ID": "20221129003002-7rxw12c",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129003002-7rxw12c"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "每个chassis上的ovn-controller控制器进程接收更新后的南向数据库和更新后的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "nb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "。\n该过程也会更新chassis的Open vSwitch实例上安装的物理流（physical flows）。\n当它从Open vSwitch收到物理流已更新的确认信息时，就会在南向数据库中更新自己的Chassis记录中的nb_cfg。"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129003002-x55h2ev",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129003002-x55h2ev"
									},
									"Children": [
										{
											"ID": "20221129003002-6zussga",
											"Type": "NodeList",
											"ListData": {
												"Typ": 1
											},
											"Properties": {
												"id": "20221129003002-6zussga"
											},
											"Children": [
												{
													"ID": "20221129003002-homw2zq",
													"Type": "NodeListItem",
													"ListData": {
														"Typ": 1,
														"Delimiter": 46,
														"Marker": "NS4=",
														"Num": 5
													},
													"Properties": {
														"id": "20221129003002-homw2zq"
													},
													"Children": [
														{
															"ID": "20221129003002-63bcyax",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129003002-63bcyax"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "ovn-northd 监视所有南向数据库中Chassis记录的nb_cfg列。\n它跟踪所有记录中的最小值，并将其复制到北向"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "NB_Global"
																},
																{
																	"Type": "NodeText",
																	"Data": "表的"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "hv_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "列中。\n（这样一来，CMS或另一个观察者就可以确定什么时候所有hypervisor都赶上了北向配置。）"
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129002935-5lybw0a",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129002935-5lybw0a",
				"updated": "20221129003447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. Chassis 设置"
				}
			]
		},
		{
			"ID": "20221129003515-k9v9hmq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003515-k9v9hmq",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN部署中的每个Chassis都必须配置一个专门用于ovn的Open vSwitch网桥，称为"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "集成网桥(integration bridge)"
				},
				{
					"Type": "NodeText",
					"Data": "。\n如果需要，系统启动脚本可以在启动OVN控制器之前创建此网桥。\n当OVN控制器启动时此网桥不存在的话，就将使用下面建议的默认配置来自动创建它。"
				}
			]
		},
		{
			"ID": "20221129003515-80j3m56",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003515-80j3m56",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "集成网桥上的端口包括："
				}
			]
		},
		{
			"ID": "20221129003515-e2q05t6",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129003515-e2q05t6",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"ID": "20221129003515-p6l1li2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129003515-p6l1li2"
					},
					"Children": [
						{
							"ID": "20221129003515-5x25b08",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129003515-5x25b08"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "任何机箱上，OVN用来保持逻辑网络连接的隧道（tunnel）端口:\nOVN控制器将添加、更新和删除这些隧道端口。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129003515-smbkny6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129003515-smbkny6"
					},
					"Children": [
						{
							"ID": "20221129003515-2ixdd8f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129003515-2ixdd8f"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在hypervisor中，任何要连接到逻辑网络的VIF:\nhypervisor本身，或者vSwitch和hypervisor之间的集成（在integrationguide.rst中描述）会负责处理这个问题。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129003515-75iswkg",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221129003515-75iswkg",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221129003515-nb8w97g",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221129003515-nb8w97g"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "这不是OVN的一部分，也不是OVN的新内容；这些都是预存在的集成工作，早已经在支持OVS的 hypervisor上实现了。"
						}
					]
				}
			]
		},
		{
			"ID": "20221129003515-edkdh0p",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129003515-edkdh0p",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"ID": "20221129003515-chrtm1b",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129003515-chrtm1b"
					},
					"Children": [
						{
							"ID": "20221129003515-xrsvzzi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129003515-xrsvzzi"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在网关上，用于逻辑网络连接的物理端口：\n系统启动脚本在启动ovn控制器之前将此端口添加到网桥。\n在更复杂的设置中，也可能是是另一个网桥的补丁端口（patch port），而不是物理端口。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129003515-d9nf6fo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003515-d9nf6fo",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "其他端口不应连接到集成网桥上。\n尤其是，附加到底层网络（underlay network）的物理端口（与附加到逻辑网络物理端口的网关端口相反）不能连接到集成网桥。\n底层物理端口应该连接到单独的Open vSwitch网桥（事实上，它们根本不需要连接到任何网桥）。"
				}
			]
		},
		{
			"ID": "20221129003515-0cjtuly",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003515-0cjtuly",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "集成网桥应该按照下面描述的方式配置。每个配置的效果都记录在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovs-vswitchd.conf.db"
				},
				{
					"Type": "NodeText",
					"Data": "中："
				}
			]
		},
		{
			"ID": "20221129003515-k7ia3gp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221129003515-k7ia3gp",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "bWlwc2FzbQ=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "fail-mode=secure\n    避免在OVN控制器启动之前在隔离的逻辑网络之间交换数据包。\n    详细信息请参阅ovs vsctl中的 控制器故障设置。\n  \nother-config:disable-in-band=true\n    抑制集成网桥的带内控制流(in-band  control  flows)。\n    由于OVN使用本地控制器（通过Unix域套接字）而不是远程控制器，所以这样的控制流显然是不常见的。\n    然而，对于同一系统中的某个其他网桥可能有一个带内（in-band）远程控制器，在这种情况下，这可能对带内控制器正常建立的流量进行抑制。\n    请参阅有关文档以获取更多信息。\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221129003515-0bce5hc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129003515-0bce5hc",
				"updated": "20221129003515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "集成桥的惯用名称是"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "br-int"
				},
				{
					"Type": "NodeText",
					"Data": "，但可以使用另一个名称。"
				}
			]
		},
		{
			"ID": "20221129010356-tqta8xb",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129010356-tqta8xb",
				"updated": "20221129010413"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4. 逻辑网络（Logical Network）"
				}
			]
		},
		{
			"ID": "20221129010541-iy7qoxd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129010541-iy7qoxd",
				"updated": "20221129010541"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "逻辑网络（logical network）实现了与物理网络（physical network）一样的概念，\n不过他们通过通道(tunnel)或者其他封装手段，与物理网络隔离开来。\n这就让逻辑网络可以拥有单独的IP和其他地址空间，如此一来，便可以与物理网络所用的IP和地址空间无冲突地重叠。\n安排逻辑网络拓扑的时候，可以不用考虑它们运行所在的物理网络拓扑。"
				}
			]
		},
		{
			"ID": "20221129010541-nngitpl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129010541-nngitpl",
				"updated": "20221129010541"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN里的逻辑网络概念包含:"
				}
			]
		},
		{
			"ID": "20221129010541-ahhqxzz",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129010541-ahhqxzz",
				"updated": "20221129010541"
			},
			"Children": [
				{
					"ID": "20221129010541-nc9ic19",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010541-nc9ic19"
					},
					"Children": [
						{
							"ID": "20221129010541-6a3apa8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010541-6a3apa8"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑交换机"
								},
								{
									"Type": "NodeText",
									"Data": " （Logical switch）：以太网交换机的逻辑版本"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010541-s8yjzsw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010541-s8yjzsw"
					},
					"Children": [
						{
							"ID": "20221129010541-ommskzo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010541-ommskzo"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑路由器"
								},
								{
									"Type": "NodeText",
									"Data": " （Logical router）：IP路由器的逻辑版本。逻辑交换机及路由器都可以接入复杂的拓扑里。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010541-q3f1k2a",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010541-q3f1k2a"
					},
					"Children": [
						{
							"ID": "20221129010541-yyvcg9q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010541-yyvcg9q"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑数据通路"
								},
								{
									"Type": "NodeText",
									"Data": " （Logical datapath）：逻辑版本的OpenFlow交换机。逻辑交换机及路由器都以"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "逻辑数据通路"
								},
								{
									"Type": "NodeText",
									"Data": "形式实现。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010541-qkg8z0d",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010541-qkg8z0d"
					},
					"Children": [
						{
							"ID": "20221129010541-t4hji3h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010541-t4hji3h"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑端口"
								},
								{
									"Type": "NodeText",
									"Data": " （Logical port）：代表了逻辑交换机和逻辑路由器之间的连接点。一些常见类型的逻辑端口有："
								}
							]
						},
						{
							"ID": "20221129010541-wffxboz",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129010541-wffxboz"
							},
							"Children": [
								{
									"ID": "20221129010541-m4my8qz",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129010541-m4my8qz"
									},
									"Children": [
										{
											"ID": "20221129010541-t82o41f",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129010541-t82o41f"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "逻辑端口（Logical port）:代表VIF。"
												}
											]
										}
									]
								},
								{
									"ID": "20221129010541-odn8i93",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129010541-odn8i93"
									},
									"Children": [
										{
											"ID": "20221129010541-ywbxwpc",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129010541-ywbxwpc"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "本地网络端口（Localnet port）：代表逻辑交换机与物理网络之间的连接点。\n他们实现为OVS补丁端口（OVS patch port），架设在集成网桥和单独的Open vSwitch网桥之间，\n从而作为底层网络连接的端口。"
												}
											]
										}
									]
								},
								{
									"ID": "20221129010541-z8rnla6",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129010541-z8rnla6"
									},
									"Children": [
										{
											"ID": "20221129010541-74u0drn",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129010541-74u0drn"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "逻辑补丁端口（Logical patch port）：代表了逻辑交换机和逻辑路由器之间的连接点，\n有时候还可作为对等逻辑路由器（peer logical router）连接点。\n每个这样的连接点都有一对逻辑补丁端口，每侧一个。"
												}
											]
										}
									]
								},
								{
									"ID": "20221129010541-w4jq6lw",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129010541-w4jq6lw"
									},
									"Children": [
										{
											"ID": "20221129010541-3lmdfo7",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129010541-3lmdfo7"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "本地端口端口（Localport port）：代表了逻辑路由器和VIF之间的本地连接点。\n这些端口存在于每个机箱中（未绑定到任何特定的机箱），来自它们的流量永远不会通过隧道（tunnel）。\n本地端口一般来说只生成目标指向本地目的地的通信，通常是对其接收到请求的响应。\n其中一个用例便是："
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "OpenStack Neutron"
												},
												{
													"Type": "NodeText",
													"Data": "如何使用Localport端口为每个hyperviso上的VM提供元数据（metadata）服务。\n元数据代理进程连接到每个主机（host）上的此端口，同一个网络中的所有VM都将通过相同的IP/MAC地址来访问它，\n所有流量都不通过隧道发送。想了解更多可以查看"
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "a",
													"TextMarkAHref": "https://docs.openstack.org/developer/networking-ovn/design/metadata_api.html",
													"TextMarkTextContent": "链接"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129010534-6l7m0o5",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129010534-6l7m0o5",
				"updated": "20221129010716"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5. VIF的生命周期"
				}
			]
		},
		{
			"ID": "20221129010809-ex8whme",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129010809-ex8whme",
				"updated": "20221129010809"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "虚拟机监控程序（hypervisor）上的VIF是一个虚拟网络接口，他们要么连接到VM上要么连接到容器\n上（容器直接在该hypervisor上运行）。这与在VM中运行的容器的接口不同:"
				}
			]
		},
		{
			"ID": "20221129010809-5pmman6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129010809-5pmman6",
				"updated": "20221129010809"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本例中的步骤通常涉及到OVN和OVN Northbound database模式的详细信息。想了解这些数据库的完整信息，\n请分别参阅"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovn-sb"
				},
				{
					"Type": "NodeText",
					"Data": "和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovn-nb"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20221129010809-pn6v4v8",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129010809-pn6v4v8",
				"updated": "20221129010809"
			},
			"Children": [
				{
					"ID": "20221129010809-64oqifg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-64oqifg"
					},
					"Children": [
						{
							"ID": "20221129010809-9008f35",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-9008f35"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、当CMS管理员使用CMS用户界面或API创建新的VIF，并将其添加到交换机（由OVN作为逻辑交换机实现）时，VIF的生命周期开始。\nCMS更新自身配置，主要包括：将VIF唯一的持久标识符"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "vif-id"
								},
								{
									"Type": "NodeText",
									"Data": "和以太网地址mac相关联。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-gjylugx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-gjylugx"
					},
					"Children": [
						{
							"ID": "20221129010809-n5g2yik",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-n5g2yik"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、CMS插件通过向"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Switch_Port"
								},
								{
									"Type": "NodeText",
									"Data": "表添加一行来更新OVN北向数据库以囊括新的VIF信息。\n新行之中，名称是"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "vif-id"
								},
								{
									"Type": "NodeText",
									"Data": "，mac是mac，交换机指向OVN逻辑交换机的Logical_Switch记录，其他列则被适当地初始化。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-ga350x8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-ga350x8"
					},
					"Children": [
						{
							"ID": "20221129010809-kvagzfp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-kvagzfp"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、ovn-northd收到OVN北向数据库的更新。相应的，它做出响应，在南向数据库的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Flow"
								},
								{
									"Type": "NodeText",
									"Data": "表的添加新行，以映射新的端口。比如：添加一个流来识别发往给新端口的MAC地址的数据包，并且更新传递广播和多播数据包的流以囊括新的端口。它还在“绑定”表中创建一条记录，并填充用于识别chassis的列之外的所有列。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-ntxo0g4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-ntxo0g4"
					},
					"Children": [
						{
							"ID": "20221129010809-jmjmp63",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-jmjmp63"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、每个hypervisor上的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovn-controller"
								},
								{
									"Type": "NodeText",
									"Data": "都会接收上一步ovn-northd在Logical_Flow表所做的更新。\n但如果持有VIF的虚拟机关机，ovn-controller就无能为力了。\n例如，它不能发送数据包或从VIF接收数据包，因为VIF实际上并不存在了。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-zx6e0nw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-zx6e0nw"
					},
					"Children": [
						{
							"ID": "20221129010809-25cm5wh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-25cm5wh"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "5、最终，用户启动拥有该VIF的VM。在VM启动的hypervisor上，\nhypervisor与Open vSwitch（IntegrationGuide.rst中所描述的）之间的集成，是通过将VIF添加到OVN集成网桥上实现的，\n此外还需要在"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "external_ids：iface-id"
								},
								{
									"Type": "NodeText",
									"Data": "中存储"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "vif-id"
								},
								{
									"Type": "NodeText",
									"Data": "，以指示该接口是新VIF的实例。"
								}
							]
						},
						{
							"ID": "20221129010809-2ceqojt",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221129010809-2ceqojt"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221129010809-14jv2u1",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221129010809-14jv2u1"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "这些代码在并不是OVN的新功能；在支持OVS的虚拟机管理程序上就已经预先集成了。"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-dxluq65",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-dxluq65"
					},
					"Children": [
						{
							"ID": "20221129010809-sa13kth",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-sa13kth"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "6、在启动VM的hypervisor上，ovn-controller在新的接口中注意到"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "external_ids：iface-id"
								},
								{
									"Type": "NodeText",
									"Data": "。\n作为响应，在OVN南向数据库中，它将更新绑定表的chassis列中的相应行，这些行链接逻辑端口"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "external_ids：iface-id"
								},
								{
									"Type": "NodeText",
									"Data": "到hypervisor。\n之后，ovn-controller更新本地虚拟机hypervisor的OpenFlow表，以便正确处理进出VIF的数据包。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-trt8twy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-trt8twy"
					},
					"Children": [
						{
							"ID": "20221129010809-2q3w32m",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-2q3w32m"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "7、一些CMS系统，包括OpenStack，只有在网络准备就绪的情况下才能完全启动虚拟机。\n为了支持这个功能，ovn-northd一旦发现Binding表中的chassis列的某行更新了，\n则通过更新OVN北向数据库的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Switch_Port"
								},
								{
									"Type": "NodeText",
									"Data": "表中的up列来向上标识这个变化，以表明VIF现在已经启动。\n如果使用此功能，CMS则可通过允许VM执行来继续进行后面的反应。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-2cc4ia4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-2cc4ia4"
					},
					"Children": [
						{
							"ID": "20221129010809-fhz5073",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-fhz5073"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "8、在VIF所在的每个hypervisor上，ovn-controller会觉察到绑定表中完全填充的行。\n这为ovn-controller提供了逻辑端口的物理位置，\n因此每个实例都会更新其交换机的OpenFlow流表（基于OVN数据库Logical_Flow表中的逻辑数据路径流），以便通过隧道来正确处理进出VIF的数据包。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-t916kjj",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-t916kjj"
					},
					"Children": [
						{
							"ID": "20221129010809-9ak261u",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-9ak261u"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "9、最终，用户关闭持有该VIF的VM。在VM关闭的hypervisor上，VIF将从OVN集成网桥中删除。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-tnqoof3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-tnqoof3"
					},
					"Children": [
						{
							"ID": "20221129010809-aq0vij0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-aq0vij0"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "10、在VM关闭的hypervisor上，ovn-controller发现到VIF已被删除。作为响应，它将删除逻辑端口绑定表中的Chassis列的内容。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-n2oxvmt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-n2oxvmt"
					},
					"Children": [
						{
							"ID": "20221129010809-dohi9ye",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-dohi9ye"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "11、在每个hypervisor上，ovn-controller都会发现绑定表行中空的Chassis列。\n这意味着ovn-controller不再知道逻辑端口的物理位置，因此每个实例都会更新其OpenFlow表以反映这一点。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-vxchkom",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-vxchkom"
					},
					"Children": [
						{
							"ID": "20221129010809-irgh1oo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-irgh1oo"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "12、最终，当VIF（或其整个VM）不再被任何人需要时，管理员使用CMS用户界面或API删除VIF。CMS更新自己的配置。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-e06iyi0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-e06iyi0"
					},
					"Children": [
						{
							"ID": "20221129010809-oueyjuj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-oueyjuj"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "13、CMS插件通过删除Logical_Switch_Port表中的相关行来从OVN北向数据库中删除VIF。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-qmseg9s",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-qmseg9s"
					},
					"Children": [
						{
							"ID": "20221129010809-sy8wpub",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-sy8wpub"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "14、ovn-northd收到OVN北向数据库的更新，然后相应地更新OVN南向数据库，\n方法是：从OVN南向数据库的Logical_Flow表和绑定表中删除或更新与已销毁的VIF相关的行。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129010809-1s1ttnp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129010809-1s1ttnp",
						"updated": "20221129010809"
					},
					"Children": [
						{
							"ID": "20221129010809-yc0ie09",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129010809-yc0ie09",
								"updated": "20221129010809"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "15、在每个hypervisor上，ovn-controller接收在上一步中的Logical_Flow表的更新内容，并更新OpenFlow表。\n不过可能没有太多要做，因为VIF已经变得无法访问，它在上一步中就从绑定表中删除了。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012319-0phk4dm",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012319-0phk4dm",
				"updated": "20221129012358"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6. VM内部容器接口的生命周期"
				}
			]
		},
		{
			"ID": "20221129012431-2rlu0cd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012431-2rlu0cd",
				"updated": "20221129012431"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN通过将写在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "OVN_NB"
				},
				{
					"Type": "NodeText",
					"Data": "数据库中的信息，转换成每个hypervisor中的OpenFlow流表来提供虚拟网络抽象。"
				}
			]
		},
		{
			"ID": "20221129012431-j6d4g5o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012431-j6d4g5o",
				"updated": "20221129012431"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果想要为多租户提供安全的虚拟网络连接，那么OVN控制器便应该是唯一可以修改Open vSwitch中的流的实体时候。当Open vSwitch集成网桥驻留在虚拟机管理程序中时，虚拟机内运行的租户工作负载（ tenant workloads ）是无法对Open vSwitch流进行任何更改的。"
				}
			]
		},
		{
			"ID": "20221129012431-jkcvojy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012431-jkcvojy",
				"updated": "20221129012431"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果基础架构provider相信容器内的应用程序不会中断和修改Open vSwitch流，则可以在hypervisors中运行容器。当容器在虚拟机中运行时也是如此，此时需要有一个驻留在同一个VM中并由OVN控制器控制的Open vSwitch集成网桥。\n对于上述两种情况，工作流程与上一节（“VIF的生命周期”）中的示例所解释的相同。"
				}
			]
		},
		{
			"ID": "20221129012431-tg8iw27",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012431-tg8iw27",
				"updated": "20221129012431"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本节讨论在虚拟机中创建容器并将Open vSwitch集成网桥驻留在虚拟机管理程序中时，容器接口（CIF）的生命周期。\n在这种情况下，即使容器应用程序发生故障，其他租户也不会受到影响，因为运行在VM内的容器无法修改Open vSwitch集成网桥中的流。"
				}
			]
		},
		{
			"ID": "20221129012431-rqkbh3p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012431-rqkbh3p",
				"updated": "20221129012431"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在虚拟机内创建多个容器时，会有多个CIF关联。为了便于OVN支持虚拟网络抽象，\n与这些CIF关联的网络流量需要到达hypervisor中运行的Open vSwitch集成网桥。\nOVN还应能够区分来自不同CIF的网络流量。"
				}
			]
		},
		{
			"ID": "20221129012447-5e1nns1",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012447-5e1nns1",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.1、区分CIP网络流量的方法"
				}
			]
		},
		{
			"ID": "20221129012447-1rn0qxi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012447-1rn0qxi",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "有两种方法可以区分CIF的网络流量："
				}
			]
		},
		{
			"ID": "20221129012447-park3l3",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012447-park3l3",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.1.1、1:1"
				}
			]
		},
		{
			"ID": "20221129012447-zvkg9ho",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012447-zvkg9ho",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第一种方法是为每个CIF都提供一个VIF（1:1）："
				}
			]
		},
		{
			"ID": "20221129012447-k5tbs8g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012447-k5tbs8g",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这意味着hypervisor中可能有很多网络设备。由于管理所有VIF会造成额外的CPU消耗，这会使OVS变慢。\n这也意味着在VM中创建容器的实体也应该能够在hypervisor中创建相应的VIF。"
				}
			]
		},
		{
			"ID": "20221129012447-jom43yw",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20221129012447-jom43yw",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.1.2、 1:2"
				}
			]
		},
		{
			"ID": "20221129012447-teevxdm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012447-teevxdm",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "第二种方法是为所有CIF只提供一个VIF（1:n）。\n然后，OVN可以通过每个数据包中写入的标签来区分来自不同CIF的网络流量。\nOVN使用这种机制并使用VLAN作为标记机制。"
				}
			]
		},
		{
			"ID": "20221129012447-zhb7v96",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012447-zhb7v96",
				"updated": "20221129012447"
			},
			"Children": [
				{
					"ID": "20221129012447-bb0yzay",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-bb0yzay"
					},
					"Children": [
						{
							"ID": "20221129012447-g0rn7pm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-g0rn7pm"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、CIF的生命周期从虚拟机内部创建容器开始，该容器可以是由创建虚拟机的同一CMS创建，或拥有该虚拟机的租户创建，\n甚至可以是由与最初创建虚拟机的CMS不同的容器编制系统所创建。\n无论创建容器的实体是谁，它需要知道与虚拟机的网络接口关联的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "vif-id"
								},
								{
									"Type": "NodeText",
									"Data": "，容器接口的网络流量将通过该网络接口来流通。\n创建容器接口的实体也需要在该虚拟机内部选择一个未使用的VLAN。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-l0jpvfm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-l0jpvfm"
					},
					"Children": [
						{
							"ID": "20221129012447-545ue4s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-545ue4s"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、创建容器的实体（直接或间接通过CMS管理底层基础结构）通过向"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Switch_Port"
								},
								{
									"Type": "NodeText",
									"Data": "表添加一行来更新OVN南向数据库以囊括新的CIF。\n在新行中，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "name"
								},
								{
									"Type": "NodeText",
									"Data": "是任何唯一的标识符，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "parent_name"
								},
								{
									"Type": "NodeText",
									"Data": "是CIF网络流量预计要经过的VM的vif-id，"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "tag"
								},
								{
									"Type": "NodeText",
									"Data": "是标识该CIF网络流量的VLAN标记。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-vvmx6e4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-vvmx6e4"
					},
					"Children": [
						{
							"ID": "20221129012447-09xp8op",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-09xp8op"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、ovn-northd收到OVN北向数据库的更新。反过来，它通过添加相应行到OVN南向数据库的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Flow"
								},
								{
									"Type": "NodeText",
									"Data": "表来反映新的端口，\n并通过在Binding表中创建一个新行(填充除了标识列以外的所有列)，来相应地更新OVN南向数据库的chassis。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-gtmjz6r",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-gtmjz6r"
					},
					"Children": [
						{
							"ID": "20221129012447-7kjhlb7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-7kjhlb7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、在每个hypervisor上，ovn-controller订阅绑定表中的更改。\n当由ovn-northd创建的新行中包含Binding表的parent_port列中的值时，\n拥有与"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "external_ids：iface-id"
								},
								{
									"Type": "NodeText",
									"Data": "中的vif-id相同值的ovn集成网桥上的ovn-controller,将会更新本地hypervisor的OpenFlow流表，\n这样来自具有特定VLAN标记的VIF的数据包便可以得到正确的处理。之后，它会更新绑定表的chassis列以反映物理位置。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-of6k6c2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-of6k6c2"
					},
					"Children": [
						{
							"ID": "20221129012447-gi4yywp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-gi4yywp"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "5、底层网络准备就绪后，便只能在容器内启动应用程序。\n为了支持这个功能，ovn-northd在绑定表中通知更新的chassis列，\n并更新OVN Northbound数据库的Logical_Switch_Port表中的up列，以表示CIF现在已经启动。\n负责启动容器应用程序的实体查询到该值并启动应用程序。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-irm2gvu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-irm2gvu"
					},
					"Children": [
						{
							"ID": "20221129012447-rgkjx31",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-rgkjx31"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "6、最后，创建并启动容器的实体，会停止容器。实体则通过CMS（或直接）删除Logical_Switch_Port表中的行。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-bwq61m5",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-bwq61m5"
					},
					"Children": [
						{
							"ID": "20221129012447-ftro8cw",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-ftro8cw"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "7、ovn-northd接收OVN Northbound更新，并相应地更新OVN Southbound数据库，\n方法是从OVN Southbound数据库Logical_Flow表中删改与已经销毁的CIF相关联的行。\n同时也会删除该CIF绑定表中的行。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012447-je9pl0g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012447-je9pl0g"
					},
					"Children": [
						{
							"ID": "20221129012447-3m32fto",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012447-3m32fto"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "8、在每个hypervisor中，ovn-controller接收在上一步中"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Flow"
								},
								{
									"Type": "NodeText",
									"Data": "表的更新。\novn-controller会更新本地的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "OpenFlow"
								},
								{
									"Type": "NodeText",
									"Data": "表以反映更新。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012459-120csoj",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012459-120csoj",
				"updated": "20221129012509"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7. 数据包的物理处理生命周期"
				}
			]
		},
		{
			"ID": "20221129012531-vj4mhql",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-vj4mhql",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "本节介绍数据包如何通过OVN从一个虚拟机或容器传输到另一个。"
				}
			]
		},
		{
			"ID": "20221129012531-0xccihh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-0xccihh",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这个描述着重于数据包的物理处理。有关数据包逻辑生命周期的描述，请参考ovn-sb中的Logical_Flow表。"
				}
			]
		},
		{
			"ID": "20221129012531-k420546",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-k420546",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了清楚起见，本节提到了一些数据和元数据字段，总结如下："
				}
			]
		},
		{
			"ID": "20221129012531-whzs00h",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012531-whzs00h",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7.1、涉及的数据和元数据字段"
				}
			]
		},
		{
			"ID": "20221129012531-wr4e62e",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012531-wr4e62e",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"ID": "20221129012531-zqjrvbx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-zqjrvbx"
					},
					"Children": [
						{
							"ID": "20221129012531-pnijmwt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-pnijmwt"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "隧道密钥"
								},
								{
									"Type": "NodeText",
									"Data": " 。当OVN在Geneve或其他隧道中封装数据包时，会附加额外的数据，以使接收的OVN实例正确处理。\n取决于特定的封装形式，会采取不同的形式，但在每种情况下，我们都将其称为“隧道密钥”。\n请参阅文末的“隧道封装”以了解详细信息。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-37jgrrv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-37jgrrv"
					},
					"Children": [
						{
							"ID": "20221129012531-daantsa",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-daantsa"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑数据路径字段"
								},
								{
									"Type": "NodeText",
									"Data": " 。表示数据包正在被处理的逻辑数据路径的字段。\nOVN使用"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "OpenFlow 1.1+"
								},
								{
									"Type": "NodeText",
									"Data": "简单地（且容易混淆地）调用“元数据”来存储logical datapath字段。\n（该字段作为隧道密钥的一部分通过隧道进行传递。）"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-fgu8cjc",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-fgu8cjc"
					},
					"Children": [
						{
							"ID": "20221129012531-l8y5380",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-l8y5380"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑输入端口字段"
								},
								{
									"Type": "NodeText",
									"Data": " 。表示数据包从哪个逻辑端口进入logical datapath的字段。\nOVN将其存储在Open vSwitch扩展寄存器14中。Geneve和STT隧道将这个字段作为隧道密钥的一部分传递。\n虽然VXLAN隧道没有明确地带有逻辑输入端口，OVN只使用VXLAN与网关进行通信，从OVN的角度来看，\n只有一个逻辑端口，因此OVN可以在输入到OVN时，将"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "逻辑输入端口"
								},
								{
									"Type": "NodeText",
									"Data": "字段设置为该逻辑输入的逻辑管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-ujg4mc3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-ujg4mc3"
					},
					"Children": [
						{
							"ID": "20221129012531-pky64v3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-pky64v3"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑输出端口字段"
								},
								{
									"Type": "NodeText",
									"Data": " 。表示数据包将离开logical datapath的逻辑端口的字段。在逻辑入口管道的开始，它被初始化为0。\nOVN将其存储在Open vSwitch扩展寄存器15中。Geneve和STT隧道将这个字段作为隧道密钥的一部分传递。\nVXLAN隧道不传输逻辑输出端口字段，由于VXLAN隧道不在隧道密钥中携带逻辑输出端口字段，\n所以当OVN管理程序从VXLAN隧道接收到数据包时，将数据包重新提交给流表8以确定输出端口。\n当数据包到达流表32时，通过检查数据包从VXLAN隧道到达时所设置的MLF_RCV_FROM_VXLAN标志，\n将这些数据包重新提交到表33以供本地传送。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-e42b1af",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-e42b1af"
					},
					"Children": [
						{
							"ID": "20221129012531-oxd0e6z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-oxd0e6z"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑端口的conntrack区域字段"
								},
								{
									"Type": "NodeText",
									"Data": " 。表示逻辑端口的连接跟踪区域的字段。\n该值只在本地有意义，跨chassis之间是没有意义的。在逻辑入口管道的开始，它被初始化为0。\nOVN将其存储在Open vSwitch扩展寄存器13中。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-qol0vn6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-qol0vn6"
					},
					"Children": [
						{
							"ID": "20221129012531-42s53na",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-42s53na"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "路由器的conntrack区域字段"
								},
								{
									"Type": "NodeText",
									"Data": " 。表示路由器的连接跟踪区域的字段。\n该值只在本地有意义，跨chassis之间是没有意义的。OVN在Open vSwitch扩展寄存器11中存储"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "DNATting"
								},
								{
									"Type": "NodeText",
									"Data": "的区域信息，\n在Open vSwitch扩展寄存器12中存储"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "SNATing"
								},
								{
									"Type": "NodeText",
									"Data": "的区域信息。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-2i4gx4g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-2i4gx4g"
					},
					"Children": [
						{
							"ID": "20221129012531-v7zi9hc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-v7zi9hc"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "逻辑流标志"
								},
								{
									"Type": "NodeText",
									"Data": " 。逻辑标志旨在处理保持流表之间的上下文以便确定后续表中的哪些规则匹配。\n该值只在本地有意义，跨chassis之间是没有意义的。OVN将逻辑标志存储在Open vSwitch扩展寄存器10中。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-u2t8m94",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-u2t8m94"
					},
					"Children": [
						{
							"ID": "20221129012531-ddmindf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-ddmindf"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "VLAN ID"
								},
								{
									"Type": "NodeText",
									"Data": " 。VLAN ID用作OVN和嵌套在VM内的容器之间的接口（有关更多信息，请参阅上面VM内容器接口的生命周期）。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012531-xq1f3yu",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012531-xq1f3yu",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7.2、详细的生命周期"
				}
			]
		},
		{
			"ID": "20221129012531-hhvgtvm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-hhvgtvm",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "首先，hypervisor上的VM或容器通过连接到OVN集成网桥的端口上,来发送数据包。详细的生命周期如下："
				}
			]
		},
		{
			"ID": "20221129012531-7iqsewj",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012531-7iqsewj",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"ID": "20221129012531-6nd7ngp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-6nd7ngp"
					},
					"Children": [
						{
							"ID": "20221129012531-mrrknzo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-mrrknzo"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、OpenFlow流表0执行物理到逻辑的转换。它匹配数据包的入口（ingress）端口。\n其通过设置"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "逻辑数据路径"
								},
								{
									"Type": "NodeText",
									"Data": " 字段以标识数据包正在穿越的逻辑数据路径，并设置"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "逻辑输入端口"
								},
								{
									"Type": "NodeText",
									"Data": "字段来标识入口端口，\n从而实现用逻辑元数据标注数据包。然后重新提交到表8进入逻辑入口管道。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012531-idflzm3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-idflzm3",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源自嵌套在虚拟机内的容器的数据包有稍微不同的方式处理。\n可以根据VIF特定的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "VLAN ID"
				},
				{
					"Type": "NodeText",
					"Data": "来区分始发容器，因此物理到逻辑的转换流程将在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "VLAN ID"
				},
				{
					"Type": "NodeText",
					"Data": "字段上需要匹配，\n且在VLAN header剥离时也会进行匹配。在这一步之后，OVN像处理其他数据包一样处理来自容器的数据包。"
				}
			]
		},
		{
			"ID": "20221129012531-xg4lsup",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012531-xg4lsup",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "流表0还处理从其他chassis到达的数据包。它通过入口端口（这是一个隧道）将它们与其他数据包区分开来。\n与刚刚进入OVN流水线的数据包一样，这些操作使用逻辑数据路径和逻辑入口端元数据来注释这些数据包。\n另外，设置逻辑输出端口字段的操作也是可用的，因为在OVN中，隧道发生在逻辑输出端口已知之后。\n这三个信息是从隧道封装元数据中获取的（请参阅隧道封装了解编码细节）。\n然后操作重新提交到表33以进入逻辑出口管道。"
				}
			]
		},
		{
			"ID": "20221129012531-1qjivvh",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012531-1qjivvh",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"ID": "20221129012531-kotjwwg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-kotjwwg"
					},
					"Children": [
						{
							"ID": "20221129012531-ypcz31a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-ypcz31a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、OpenFlow流表8至31执行OVN Southbound数据库中的Logical_Flow表的逻辑入口管道。\n这些流表完全用于逻辑端口和逻辑数据路径等逻辑概念的表示。\novn-controller的一大部分工作就是把它们转换成等效的OpenFlow\n（尤其是，它翻译数据库表：把Logical_Flow表0到表23翻译为成为OpenFlow流表8到31）。\n每个逻辑流都映射到一个或多个OpenFlow流。一个实际的数据包通常只匹配其中一个，\n尽管在某些情况下它可以匹配多个这样的数据流（这不成问题，因为它们动作都一样）。\novn-controller使用逻辑流的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "UUID"
								},
								{
									"Type": "NodeText",
									"Data": "的前32位作为OpenFlow流的cookie。\n（这不一定是唯一的，因为逻辑流的UUID的前32位不一定是唯一的。）\n一些逻辑流程可以映射到Open vSwitch"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "连接匹配("
								},
								{
									"Type": "NodeText",
									"Data": "conjunctive match)"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "扩展（参见ovs-field部分文档）。 流连接操作使用的"
								},
								{
									"Type": "NodeText",
									"Data": "OpenFlow cookie"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "为0，因为它们可以对应多个逻辑流。 关于OpenFlow流的连接匹配包含"
								},
								{
									"Type": "NodeText",
									"Data": "conj_id"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "上的匹配。 如果某个逻辑流无法在该hypervisor上使用，则某些逻辑流可能无法在给定的hypervisor中的OpenFlow流表中表示。 例如，如果逻辑交换机中没有VIF驻留在给定的hypervisor上，并且该hypervisor上的其他逻辑交换机不可访问 （例如，从hypervisor上的VIF开始的逻辑交换机和路由器的一系列跳跃），那么逻辑流就可能不可以在那里表示。 大多数OVN操作在OpenFlow中具有相当明显的实现（具有OVS扩展）， 例如，"
								},
								{
									"Type": "NodeText",
									"Data": "next"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "实现为"
								},
								{
									"Type": "NodeText",
									"Data": "resubmit，field = constant"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "; 至于"
								},
								{
									"Type": "NodeText",
									"Data": "set_field`，下面有一些更详细地描述："
								}
							]
						},
						{
							"ID": "20221129012531-cfo8ymp",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129012531-cfo8ymp"
							},
							"Children": [
								{
									"ID": "20221129012531-vp41tec",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-vp41tec"
									},
									"Children": [
										{
											"ID": "20221129012531-ec2p3g9",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-ec2p3g9"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "output"
												},
												{
													"Type": "NodeText",
													"Data": "\n通过将数据包重新提交给表32来实现。如果pipeline执行多于一个的输出动作，则将每个动作单独地重新提交给表32。\n这可以用于将数据包的多个副本发送到多个端口。\n（如果数据包在输出操作之间未被修改，并且某些拷贝被指定给相同的hypervisor，\n那么使用逻辑多播输出端口将节省hypervisor之间的带宽。）"
												}
											]
										}
									]
								},
								{
									"ID": "20221129012531-xst91of",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-xst91of"
									},
									"Children": [
										{
											"ID": "20221129012531-qg9yhnp",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-qg9yhnp"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "get_arp(P, A)"
												}
											]
										}
									]
								},
								{
									"ID": "20221129012531-e18qcxd",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-e18qcxd"
									},
									"Children": [
										{
											"ID": "20221129012531-8vonur8",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-8vonur8"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "get_nd(P, A)"
												},
												{
													"Type": "NodeText",
													"Data": "\n通过将参数存储在OpenFlow字段中来实现，然后重新提交到表66，\novn-controller使用OVN南向数据库中的"
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "MAC_Binding"
												},
												{
													"Type": "NodeText",
													"Data": "表生成的此66流表。\n如果表66中存在匹配项，则其会将绑定的MAC存储在以太网目的地地址字段中。"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221129012531-k66qjkj",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221129012531-k66qjkj"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221129012531-jq81oj7",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221129012531-jq81oj7"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "OpenFlow操作保存并恢复用于上述参数的OpenFlow字段，OVN操作不必知道这个临时用途。"
										}
									]
								}
							]
						},
						{
							"ID": "20221129012531-rm9yjy7",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129012531-rm9yjy7"
							},
							"Children": [
								{
									"ID": "20221129012531-y16q2wr",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-y16q2wr"
									},
									"Children": [
										{
											"ID": "20221129012531-w2u9qan",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-w2u9qan"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "put_arp(P, A, E)"
												}
											]
										}
									]
								},
								{
									"ID": "20221129012531-mbpt8e1",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-mbpt8e1"
									},
									"Children": [
										{
											"ID": "20221129012531-8rryvmm",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-8rryvmm"
											},
											"Children": [
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "put_nd(P, A, E)"
												},
												{
													"Type": "NodeText",
													"Data": "\n通过将参数存储在OpenFlow字段中实现，通过ovn-controller来更新MAC_Binding表。"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221129012531-wbvxjwp",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20221129012531-wbvxjwp"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20221129012531-4t42tol",
									"Type": "NodeParagraph",
									"Properties": {
										"id": "20221129012531-4t42tol"
									},
									"Children": [
										{
											"Type": "NodeText",
											"Data": "OpenFlow操作保存并恢复用于上述参数的OpenFlow字段，OVN操作不必知道这个临时用途。"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-qybjg2n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-qybjg2n"
					},
					"Children": [
						{
							"ID": "20221129012531-5nmmtse",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-5nmmtse"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、OpenFlow流表32至47在逻辑入口管道中执行输出动作。\n具体来说就是表32处理到远程hypervisors的数据包，表33处理到hypervisors的数据包，\n表34检查其逻辑入口和出口端口相同的数据包是否应该被丢弃。\n逻辑patch端口是一个特殊情况。逻辑patch端口没有物理位置，并且有效地驻留在每个hypervisor上。\n因此，用于输出到本地hypervisor上的端口的流表33也自然地将输出实现到单播逻辑patch端口。\n但是，将相同的逻辑应用到作为逻辑多播组一部分的逻辑patch端口会产生数据包重复，\n因为在多播组中包含逻辑端口的每个hypervisor也会将数据包输出到逻辑patch端口。\n因此，多播组执行表32中的逻辑patch端口的输出。\n表32中的每个流匹配逻辑输出端口上的单播或多播逻辑端口，其中包括远程hypervisor上的逻辑端口。\n每个流的操作实现就是发送一个数据包到它匹配的端口。\n对于远程hypervisor中的单播逻辑输出端口，操作会将隧道密钥设置为正确的值，\n然后将隧道端口上的数据包发送到正确的远端hypervisor。\n（当远端hypervisor收到数据包时，表0会将其识别为隧道数据包，并将其传递到表33中。）\n对于多播逻辑输出端口，会将数据包的一个副本发送到每个远程hypervisor，就像单播目的地一样。\n如果多播组包括本地hypervisor上的一个或多个逻辑端口，则其动作也重新提交给表33. 表32还包括："
								}
							]
						},
						{
							"ID": "20221129012531-g0m6hkz",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129012531-g0m6hkz"
							},
							"Children": [
								{
									"ID": "20221129012531-vbdzxko",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-vbdzxko"
									},
									"Children": [
										{
											"ID": "20221129012531-c5d4muq",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-c5d4muq"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "根据标志"
												},
												{
													"Type": "NodeTextMark",
													"TextMarkType": "code",
													"TextMarkTextContent": "MLF_RCV_FROM_VXLAN"
												},
												{
													"Type": "NodeText",
													"Data": "匹配从VXLAN隧道接收到的数据包的高优先级的规则，然后将这些数据包重新提交给表33进行本地传递。\n从VXLAN隧道收到的数据包由于缺少隧道密钥中的逻辑输出端口字段而到达此处，因此需要将这些数据包提交到表8以确定输出端口。"
												}
											]
										}
									]
								},
								{
									"ID": "20221129012531-h3640bu",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-h3640bu"
									},
									"Children": [
										{
											"ID": "20221129012531-x715wz0",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-x715wz0"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "根据逻辑输入端口匹配从localport类型的端口接收到的数据包并将这些数据包重新提交到表33以进行本地传送的较高优先级规则。\n每个 hypervisor都存在localport类型的端口，根据定义，它们的流量不应该通过隧道出去。"
												}
											]
										}
									]
								},
								{
									"ID": "20221129012531-a6dlq6o",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012531-a6dlq6o"
									},
									"Children": [
										{
											"ID": "20221129012531-fdfz84k",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012531-fdfz84k"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如果没有其他匹配，则重新提交到流表33的备用流。"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20221129012531-jgjvfgt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-jgjvfgt"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "对于驻留在本地而不是远程的逻辑端口，表33中的流表类似于表32中的流表。对于本地hypervisor中的单播逻辑输出端口，操作只是重新提交给表34。\n对于在本地hypervisor中包括一个或多个逻辑端口的多播输出端口，对于每个这样的逻辑端口"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "P"
								},
								{
									"Type": "NodeText",
									"Data": "，操作将逻辑输出端口改变为"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "P"
								},
								{
									"Type": "NodeText",
									"Data": " ，然后重新提交到表34。\n一个特殊情况是，当数据路径上存在localnet端口时，会通过切换到localnet端口来连接远程端口。\n在这种情况下，不是在表32中增加一个到达远程端口的流，而是在表33中增加一个流以将逻辑输出端口切换到localnet端口，\n并重新提交到表33，好像它被单播到本地hypervisor的逻辑端口上一样。\n表34匹配并丢弃逻辑输入和输出端口相同并且"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MLF_ALLOW_LOOPBACK"
								},
								{
									"Type": "NodeText",
									"Data": "标志未被设置的数据包。它重新提交其他数据包到表40。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-y5saktm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-y5saktm"
					},
					"Children": [
						{
							"ID": "20221129012531-xq6k9d7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-xq6k9d7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、OpenFlow表40至63执行OVN Southbound数据库中的Logical_Flow表的逻辑出口流程。\n出口管道可以在分组交付之前执行验证的最后阶段。\n最终，它可以执行一个输出动作，ovn-controller通过重新提交到表64来实现。\npipeline从不执行输出的数据包被有效地丢弃（虽然它可能已经穿过物理网络的隧道传送了）。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012531-3izifuj",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221129012531-3izifuj",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221129012531-148esam",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221129012531-148esam"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "出口管道不能改变逻辑输出端口或进行进一步的隧道封装。"
						}
					]
				}
			]
		},
		{
			"ID": "20221129012531-uv9nhpt",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012531-uv9nhpt",
				"updated": "20221129012531"
			},
			"Children": [
				{
					"ID": "20221129012531-sox2u5j",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-sox2u5j"
					},
					"Children": [
						{
							"ID": "20221129012531-4ttcsbk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-4ttcsbk"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "5、当设置"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MLF_ALLOW_LOOPBACK"
								},
								{
									"Type": "NodeText",
									"Data": "时，表64绕过OpenFlow环回(loopback )。\n逻辑环回在表34中被处理，但是OpenFlow默认也防止环回到OpenFlow入口端口。\n因此，当"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MLF_ALLOW_LOOPBACK"
								},
								{
									"Type": "NodeText",
									"Data": "被设置时，OpenFlow表64保存OpenFlow入口端口，将其设置为0，\n重新提交到表65以获得逻辑到物理转换，然后恢复OpenFlow入口端口，有效地禁用OpenFlow回送防止。\n当"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "MLF_ALLOW_LOOPBACK"
								},
								{
									"Type": "NodeText",
									"Data": "未被设置时，表64流程仅仅重新提交到表65。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012531-h3nq4sy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012531-h3nq4sy"
					},
					"Children": [
						{
							"ID": "20221129012531-dc8ab15",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012531-dc8ab15"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "6、OpenFlow表65执行与表0相反的逻辑到物理(logical-to-physica)翻译。它匹配分组的逻辑输出端口。\n其将数据包输出到代表该逻辑端口的OVN集成网桥端口。\n如果逻辑出口端口是一个与VM嵌套的容器，那么在发送数据包之前，会加上具有适当"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "VLAN ID"
								},
								{
									"Type": "NodeText",
									"Data": "的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "VLAN标头"
								},
								{
									"Type": "NodeText",
									"Data": "再进行发送。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012528-mhr6b5y",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012528-mhr6b5y",
				"updated": "20221129012648"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8. 逻辑路由器和逻辑patch端口"
				}
			]
		},
		{
			"ID": "20221129012721-slcjdqr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-slcjdqr",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通常，逻辑路由器和逻辑patch端口不都具有物理位置，并且实际上是驻留在hypervisor的。\n逻辑路由器和这些逻辑路由器后面的逻辑交换机之间的逻辑patch端口就是这种情况，VM（和VIF）连接到这些逻辑交换机。"
				}
			]
		},
		{
			"ID": "20221129012721-ia2bu2e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-ia2bu2e",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "考虑这样的情况：一个虚拟机或容器发送数据包到位于不同子网上的另一个VM或容器。\n数据包将按照前面“数据包的物理生命周期”部分所述，使用表示发送者所连接的逻辑交换机的logical datapath，遍历表0至65。\n在表32中，数据包本地重新提交到hypervisor上的表33的fallback flow。\n在这种情况下，从表0到表65的所有处理都在数据包发送者所在的hypervisor上进行。"
				}
			]
		},
		{
			"ID": "20221129012721-cgeqsux",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-cgeqsux",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当数据包到达表65时，逻辑出口端口是逻辑patch端口。表65中的实现取决于OVS版本，虽然观察到的行为意图是相同的："
				}
			]
		},
		{
			"ID": "20221129012721-k2hmkal",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012721-k2hmkal",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"ID": "20221129012721-2msqezf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-2msqezf"
					},
					"Children": [
						{
							"ID": "20221129012721-uds5x9u",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-uds5x9u"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在OVS版本2.6和更低版本中，表65输出到代表逻辑patch端口的OVS的patch端口。\n在OVS patch端口的peer中，分组重新进入OpenFlow流表，标识其逻辑数据路径和逻辑输入端口都基于OVS patch端口的OpenFlow端口号。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012721-d6jda15",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-d6jda15"
					},
					"Children": [
						{
							"ID": "20221129012721-d4wtcgu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-d4wtcgu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在OVS 2.7及更高版本中，数据包被克隆并直接重新提交到入口管道中的第一个OpenFlow流表，将逻辑入口端口设置为对等逻辑patch端口，\n并使用对等逻辑patch端口的logical datapath（其实表示的是逻辑路由器）。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012721-bq63zpu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-bq63zpu",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "包重新进入入口流水线（ingress pipeline）以便再次遍历表8至65，这次使用表示逻辑路由器的逻辑数据路径。"
				}
			]
		},
		{
			"ID": "20221129012721-ouc0yhn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-ouc0yhn",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "处理过程继续，如前一部分“数据包的物理生命周期”部分所述。当数据包到达表65时，逻辑输出端口将再次成为逻辑patch端口。\n使用与上述相同的方式，这个逻辑patch端口将使得数据包被重新提交给OpenFlow表8至65，这次使用目标VM或容器所连接的逻辑交换机的逻辑数据路径。"
				}
			]
		},
		{
			"ID": "20221129012721-l1dc6cs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-l1dc6cs",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "该分组第三次也是最后一次遍历表8至65。\n如果目标VM或容器驻留在远程hypervisor中，则表32将在隧道端口上将该分组从发送者的hypervisor发送到远程hypervisor。\n最后，表65将直接将数据包输出到目标VM或容器。"
				}
			]
		},
		{
			"ID": "20221129012721-pz57n82",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-pz57n82",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "以下部分描述了两个例外情况：逻辑路由器或逻辑patch端口与物理位置相关联。"
				}
			]
		},
		{
			"ID": "20221129012721-q5fkv4q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012721-q5fkv4q",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.1、网关路由器"
				}
			]
		},
		{
			"ID": "20221129012721-xdcgn75",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-xdcgn75",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "网关路由器是绑定到物理位置的逻辑路由器。这包括逻辑路由器的所有逻辑patch端口以及逻辑交换机上的所有对等逻辑patch端口。\n在OVN Southbound数据库中，这些逻辑patch端口的Port_Binding条目使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "l3gateway"
				},
				{
					"Type": "NodeText",
					"Data": "类型而不是patch类型，以便区分这些逻辑patch端口绑定到chassis。"
				}
			]
		},
		{
			"ID": "20221129012721-hhcxcqi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-hhcxcqi",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当hypervisor在代表逻辑交换机的逻辑数据路径上处理数据包，并且逻辑出口端口是表示与网关路由器连接的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "l3gateway"
				},
				{
					"Type": "NodeText",
					"Data": "时，\n该包将匹配表32中的流表，通过隧道端口将数据包发送给网关路由器所在的chassis。表32中的处理过程与VIF相同。"
				}
			]
		},
		{
			"ID": "20221129012721-e0xzwpr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-e0xzwpr",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "网关路由器通常用于分布式逻辑路由器和物理网络之间。\n分布式逻辑路由器及其后面的逻辑交换机（虚拟机和容器附加到的逻辑交换机）实际上驻留在每个hypervisor中。\n分布式路由器和网关路由器通过另一个逻辑交换机连接，有时也称为连接逻辑交换机。\n另一方面，网关路由器连接到另一个具有连接到物理网络的localnet端口的逻辑交换机。"
				}
			]
		},
		{
			"ID": "20221129012721-joc6re8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-joc6re8",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当使用网关路由器时，DNAT和SNAT规则与网关路由器相关联，网关路由器提供可处理一对多SNAT（又名IP伪装）的中央位置。"
				}
			]
		},
		{
			"ID": "20221129012721-c2ikjgb",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012721-c2ikjgb",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.2、分布式网关端口"
				}
			]
		},
		{
			"ID": "20221129012721-xdrbqrz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-xdrbqrz",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "分布式网关端口是逻辑路由器patch端口，可以将分布式逻辑路由器和具有本地网络端口的逻辑交换机连接起来。"
				}
			]
		},
		{
			"ID": "20221129012721-ceqzo4f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-ceqzo4f",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "分布式网关端口的主要设计目标，是尽可能多的在VM或容器所在的hypervisor上本地处理流量。\n只要有可能，就应该在该虚拟机或容器的hypervisor上，完全处理从该虚拟机或容器到外部世界的数据包，\n最终遍历该hypervisor上到物理网络的所有localnet端口实例。\n只要有可能，从外部到虚拟机或容器的数据包，就应该通过物理网络直接导向虚拟机或容器的hypervisor，数据包将通过localnet端口进入集成网桥。"
				}
			]
		},
		{
			"ID": "20221129012721-45eag1k",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-45eag1k",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了允许上面段落中描述的分组分布式处理，分布式网关端口应该是有效地驻留在每个hypervisor上的逻辑patch端口，而不是绑定到特定chassis的l3gateway端口。\n但是，与分布式网关端口相关的流量通常需要与物理位置相关联，原因如下："
				}
			]
		},
		{
			"ID": "20221129012721-6kzz713",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012721-6kzz713",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"ID": "20221129012721-xq1piw3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-xq1piw3"
					},
					"Children": [
						{
							"ID": "20221129012721-utgduss",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-utgduss"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "localnet端口所连接的物理网络通常使用L2学习。任何通过分布式网关端口使用的以太网地址都必须限制在一个物理位置，这样上游的L2学习就不会混淆了。\n从分布式网关端口向具有特定以太网地址的localnet端口发出的流量，必须在特定chassis上发送出分布式网关端口的一个特定实例。\n具有特定以太网地址的localnet端口（或来自与localnet端口相同的逻辑交换机上的VIF）的流量，必须定向到该特定chassis上的逻辑交换机的chassis端口实例。\n由于L2学习的含义，分布式网关端口的以太网地址和IP地址需要限制在一个物理位置。为此，用户必须指定一个与分布式网关端口关联的chassis。\n请注意，使用其他以太网地址和IP地址（例如，一对一NAT）穿过分布式网关端口的流量不限于此chassis。\n对ARP和ND请求的回复必须限制在一个单一的物理位置，回复中的以太网地址位于该位置。\n这包括分布式网关端口的IP地址的ARP和ND回复，这些回复仅限于用户与分布式网关端口关联的chassis。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012721-r83pce4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-r83pce4"
					},
					"Children": [
						{
							"ID": "20221129012721-01xgvfk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-01xgvfk"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "为了支持一对多SNAT（又名IP伪装），其中跨多个chassis分布的多个逻辑IP地址被映射到单个外部IP地址，\n这将有必要以集中的方式处理特定chassis上的某些逻辑路由器。由于SNAT外部IP地址通常是分布式网关端口IP地址，\n且为了简单起见，使用与分布式网关端口相关联的相同chassis。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012721-346zo7o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-346zo7o",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ovn-northd文档中描述了对特定chassis的流量限制的详细信息。"
				}
			]
		},
		{
			"ID": "20221129012721-86cabwj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-86cabwj",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "虽然分布式网关端口的大多数依赖于物理位置的地方，都可以通过将某些流限制到特定chassis来处理，但还是需要一个附加的机制。\n当数据包离开入口管道，且逻辑出口端口是分布式网关端口时，需要表32中两个不同的动作集中的一个："
				}
			]
		},
		{
			"ID": "20221129012721-z3h5lp3",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012721-z3h5lp3",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"ID": "20221129012721-k6ueabk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-k6ueabk"
					},
					"Children": [
						{
							"ID": "20221129012721-j06bsxi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-j06bsxi"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果可以在发送者的hypervisor上本地处理该分组（例如，一对一的NAT通信量），\n则该分组应该以正常的方式重新提交到表33，用于分布式逻辑patch端口。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012721-5i6dgsp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012721-5i6dgsp"
					},
					"Children": [
						{
							"ID": "20221129012721-edwxnm1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012721-edwxnm1"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "但是，如果数据包需要在与分布式网关端口关联的chassis（例如，一对多SNAT流量或非NAT流量）上处理，\n则表32必须将该数据包在隧道端口上发送到该chassis。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012721-54lolao",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-54lolao",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了触发第二组动作，已经添加了"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "chassisredirect"
				},
				{
					"Type": "NodeText",
					"Data": "类型的南向数据库的Port_Binding表。\n将逻辑出口端口设置为"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "chassisredirect"
				},
				{
					"Type": "NodeText",
					"Data": "类型的逻辑端口只是一种方式，表明虽然该数据包是指向分布式网关端口的，但需要将其重定向到不同的chassis。\n在表32中，具有该逻辑输出端口的分组被发送到特定的chassis，与表32将逻辑输出端口是VIF或者类型为13的网关端口的分组指向不同的chassis的方式相同。\n一旦分组到达该chassis，表33将逻辑出口端口重置为代表分布式网关端口的值。\n对于每个分布式网关端口，除了表示分布式网关端口的分布式逻辑patch端口外，还有一个"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "chassisredirect"
				},
				{
					"Type": "NodeText",
					"Data": "类型的端口。"
				}
			]
		},
		{
			"ID": "20221129012721-nqyk47n",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012721-nqyk47n",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.3、分布式网关端口的高可用性"
				}
			]
		},
		{
			"ID": "20221129012721-9v0ipc5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-9v0ipc5",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN允许您为分布式网关端口指定chassis的优先级列表。"
				}
			]
		},
		{
			"ID": "20221129012721-hp23q44",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-hp23q44",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这是通过将多个"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Gateway_Chassis"
				},
				{
					"Type": "NodeText",
					"Data": "行与"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "OVN_Northbound"
				},
				{
					"Type": "NodeText",
					"Data": "数据库中的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Logical_Router_Port"
				},
				{
					"Type": "NodeText",
					"Data": "关联来完成的。"
				}
			]
		},
		{
			"ID": "20221129012721-e8g5v8y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-e8g5v8y",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当为网关指定了多个chassis时，所有可能向该网关发送数据包的chassis都将启用通道上的BFD，这些隧道通往所有配置的网关chassis。"
				}
			]
		},
		{
			"ID": "20221129012721-v44iryd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-v44iryd",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当前网关的主chassis是当前最高优先级的网关chassis，该chassis根据BFD状态被当做主chassis。"
				}
			]
		},
		{
			"ID": "20221129012721-8wd7hjv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012721-8wd7hjv",
				"updated": "20221129012721"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "有关L3网关高可用性的更多信息，请参阅"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "http://docs.openvswitch.org/en/latest/topics/high-availability",
					"TextMarkTextContent": "链接"
				}
			]
		},
		{
			"ID": "20221129012734-ch4fv83",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012734-ch4fv83",
				"updated": "20221129012739"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9. 连接到逻辑路由器的多个LocalNet逻辑交换机"
				}
			]
		},
		{
			"ID": "20221129012752-snxay8m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-snxay8m",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以有多个逻辑交换机，每个交换机都有一个本地网络端口（代表物理网络）连接到逻辑路由器，\n其中一个localnet逻辑交换机可以通过分布式网关端口提供外部连接，其余的localnet逻辑交换机在物理网络中使用VLAN标记。\n需要为所有这些localnet网络在chassis上正确配置"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovn网桥映射"
				},
				{
					"Type": "NodeText",
					"Data": "（ovn-bridge-mappings）。"
				}
			]
		},
		{
			"ID": "20221129012752-lo51lg9",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012752-lo51lg9",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.1、东西向路由"
				}
			]
		},
		{
			"ID": "20221129012752-i6h1wfa",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-i6h1wfa",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "这些带有localnet VLAN标记的逻辑交换机之间的东西路由工作方式，与普通逻辑交换机几乎相同。\n当虚拟机发送这样的数据包时，则："
				}
			]
		},
		{
			"ID": "20221129012752-tqm7ycm",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-tqm7ycm",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-6wtb02b",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-6wtb02b"
					},
					"Children": [
						{
							"ID": "20221129012752-ofb695u",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-ofb695u"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、它首先进入源localnet逻辑交换机数据路径的入口（ingress）管道，然后进入出口(egress)管道。\n然后，它通过源chassis中的逻辑路由器端口进入逻辑路由器数据路径(datapath)的入口管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-91srwqh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-91srwqh"
					},
					"Children": [
						{
							"ID": "20221129012752-4bqjdqg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-4bqjdqg"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、进行路由决策（Routing decision）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-ch04zcu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-ch04zcu"
					},
					"Children": [
						{
							"ID": "20221129012752-8i48me6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-8i48me6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、数据包从路由器数据路径（datapath）进入目的地localnet逻辑交换机数据路径的入口管道，然后出口管道，\n并通过localnet端口从集成（integration）网桥再到提供者（provider）网桥（属于目的地逻辑交换机）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-qy1o7xw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-qy1o7xw"
					},
					"Children": [
						{
							"ID": "20221129012752-z4tb40g",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-z4tb40g"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、目标chassis通过localnet端口接收数据包并将其发送到集成网桥（integration bridge）。\n数据包（packet）进入目的地localnet逻辑交换机的入口管道，然后离开管道，最后被送到目的地VM端口。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-lsmpg4c",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012752-lsmpg4c",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.2、外部流量"
				}
			]
		},
		{
			"ID": "20221129012752-j1qwtzb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-j1qwtzb",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当虚拟机发送外部流量（需要NATting），并且承载虚拟机的chassis没有分布式网关端口时，会发生以下情况："
				}
			]
		},
		{
			"ID": "20221129012752-y0ig1sn",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-y0ig1sn",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-ri40or9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-ri40or9"
					},
					"Children": [
						{
							"ID": "20221129012752-1w4pxdx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-1w4pxdx"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、数据包首先进入源LocalNet逻辑交换机数据路径（datapath）的入口管道，然后离开管道。\n然后，它通过源chassis中的逻辑路由器端口进入逻辑路由器数据路径的入口管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-a01f5u4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-a01f5u4"
					},
					"Children": [
						{
							"ID": "20221129012752-rwfk5oz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-rwfk5oz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、进行路由决策。由于网关路由器或分布式网关端口不在源chassis中，流量通过隧道端口重定向到网关机箱。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-yn8xef7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-yn8xef7"
					},
					"Children": [
						{
							"ID": "20221129012752-q8uy1jb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-q8uy1jb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、网关chassis通过隧道端口接收数据包，数据包进入逻辑路由器数据路径的出口管道。NAT规则将在这里被应用。\n然后，数据包进入提供外部连接的localnet逻辑交换机数据路径的入口管道，接着离开管道，最后通过提供外部连接的逻辑交换机的localnet端口离开。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-53r8z71",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-53r8z71",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "尽管这样做有效，但当从计算chassis发送到网关chassis时，VM通信量将被隧道化。\n为了使其正常工作，必须降低localnet逻辑交换机的MTU，以考虑隧道封装。"
				}
			]
		},
		{
			"ID": "20221129012752-bsmgifl",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012752-bsmgifl",
				"updated": "20221129012812"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "10. 连接到逻辑路由器的带有localnet VLAN标记的逻辑交换机的集中路由"
				}
			]
		},
		{
			"ID": "20221129012752-fatd58v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-fatd58v",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了克服上一节中描述的隧道封装(tunnel encapsulation)问题，\nOVN支持为带有"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "localnet VLAN"
				},
				{
					"Type": "NodeText",
					"Data": "标记的逻辑交换机，启用集中路由的选项。"
				}
			]
		},
		{
			"ID": "20221129012752-wvhngio",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-wvhngio",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "CMS可以配置选项：将所有连接到相应逻辑交换机（带有"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "localnet vlan"
				},
				{
					"Type": "NodeText",
					"Data": "标记）logical_router_port的reside-on-redirect-chassis选项设为true ，\n这会导致网关chassis（承载分布式网关端口）处理这些网络的所有路由，使其集中化。\n它将回复对逻辑路由器端口IP的ARP请求。"
				}
			]
		},
		{
			"ID": "20221129012752-0spdr7n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-0spdr7n",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果逻辑路由器没有连接到提供外部连接的localnet逻辑交换机的分布式网关端口，则OVN将忽略此选项。\n当VM发送需要路由的东西向流量时，会发生以下情况："
				}
			]
		},
		{
			"ID": "20221129012752-bahzcyj",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-bahzcyj",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-ucl4djb",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-ucl4djb"
					},
					"Children": [
						{
							"ID": "20221129012752-6awh4ah",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-6awh4ah"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、包首先进入入口管道，然后进入源localnet逻辑交换机数据路径的出口管道，\n并通过源localnet逻辑交换机的localnet端口发送出去（而不是发送到路由器管道）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-pwxbnqu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-pwxbnqu"
					},
					"Children": [
						{
							"ID": "20221129012752-y2rtu5a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-y2rtu5a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、网关chassis通过源localnet逻辑交换机的localnet端口接收数据包并将其发送到集成网桥。\n然后，数据包进入入口(ingress)管道，接着离开源localnet逻辑交换机数据路径的管道，并进入逻辑路由器数据路径的入口管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-8i6u4e7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-8i6u4e7"
					},
					"Children": [
						{
							"ID": "20221129012752-7si8oh3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-7si8oh3"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、进行路由决策（Routing decision）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-itrobrk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-itrobrk"
					},
					"Children": [
						{
							"ID": "20221129012752-3eyq6pj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-3eyq6pj"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、数据包从路由器数据路径（datapath）进入目的地localnet逻辑交换机数据路径的入口管道，然后离开管道。\n接着，它通过localnet端口离开集成桥到提供者（provider）桥（属于目标逻辑交换机）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-oilwbqm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-oilwbqm"
					},
					"Children": [
						{
							"ID": "20221129012752-pxagsqr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-pxagsqr"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "5、目标chassis通过localnet端口接收数据包并将其发送到集成网桥。\n数据包进入目的地localnet逻辑交换机的入口管道，然后离开管道，最后到达目的地VM端口。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-qs4ajtn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-qs4ajtn",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当vm发送需要NATting的外部流量时，会发生以下情况："
				}
			]
		},
		{
			"ID": "20221129012752-cpkxgl1",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-cpkxgl1",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-7lx8e3l",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-7lx8e3l"
					},
					"Children": [
						{
							"ID": "20221129012752-u3vx9ml",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-u3vx9ml"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、 包首先进入入口管道，然后进入源localnet逻辑交换机数据路径的出口管道，\n并通过源localnet逻辑交换机的localnet端口发送出去（而不是发送到路由器管道）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-5556dsw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-5556dsw"
					},
					"Children": [
						{
							"ID": "20221129012752-3n3pudf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-3n3pudf"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、网关机箱通过源localnet逻辑交换机的localnet端口接收数据包并将其发送到集成网桥。\n然后，数据包进入入口管道，之后离开源localnet逻辑交换机数据路径的管道，并进入逻辑路由器数据路径的入口管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-k2y2qmm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-k2y2qmm"
					},
					"Children": [
						{
							"ID": "20221129012752-fjs9r28",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-fjs9r28"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、进行路由决策（Routing decision）并应用NAT规则"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-hmty19e",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-hmty19e"
					},
					"Children": [
						{
							"ID": "20221129012752-kzy5p8e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-kzy5p8e"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、数据包从路由器数据路径，进入提供外部连接的localnet逻辑交换机数据路径的入口管道，然后从出口管道流出。\n最后，它通过localnet端口离开集成桥到提供者桥（属于提供外部连接的逻辑交换机）。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-g11po4o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-g11po4o",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对于反向外部流量，将发生以下情况："
				}
			]
		},
		{
			"ID": "20221129012752-nphnqd5",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-nphnqd5",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-hpb764q",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-hpb764q"
					},
					"Children": [
						{
							"ID": "20221129012752-aw0hi4m",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-aw0hi4m"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、网关机箱从提供外部连接的逻辑交换机的localnet端口接收数据包。\n然后，数据包进入localnet逻辑交换机（提供外部连接）的入口管道，接着离开管道。\n之后，数据包进入逻辑路由器数据路径的入口管道。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-cphttr3",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-cphttr3"
					},
					"Children": [
						{
							"ID": "20221129012752-d2luq7e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-d2luq7e"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、 逻辑路由器数据路径的入口管道应用unNATting规则。\n然后，数据包进入源localnet逻辑交换机的入口管道，接着离开管道。\n由于源vm不在网关chassis中，因此数据包通过源逻辑交换机的localnet端口发送。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-hlkvp39",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-hlkvp39"
					},
					"Children": [
						{
							"ID": "20221129012752-gr40nq0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-gr40nq0"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、源chassis通过localnet端口接收数据包并将其发送到集成网桥。\n数据包进入源localnet逻辑交换机的入口管道，然后离开管道，最后被送到源VM端口。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-j8yaake",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012752-j8yaake",
				"updated": "20221129012823"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "11. VTEP网关的生命周期"
				}
			]
		},
		{
			"ID": "20221129012752-ansprm5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-ansprm5",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "网关其实是一种chassis，用于在逻辑网络的OVN管理部分和物理VLAN之间转发流量，将基于隧道的逻辑网络扩展到物理网络。"
				}
			]
		},
		{
			"ID": "20221129012752-00hozkb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-00hozkb",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "以下步骤通常涉及OVN和VTEP数据库模式的详细信息。请分别参阅ovn-sb，ovn-nb和vtep，了解关于这些数据库的详细信息。"
				}
			]
		},
		{
			"ID": "20221129012752-9izs92v",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-9izs92v",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-q6igoe6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-q6igoe6"
					},
					"Children": [
						{
							"ID": "20221129012752-cb7xxuk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-cb7xxuk"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、VTEP网关的生命周期始于管理员将VTEP网关注册为VTEP数据库中的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Physical_Switch"
								},
								{
									"Type": "NodeText",
									"Data": "表项。\n连接到此VTEP数据库的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovn-controller-vtep"
								},
								{
									"Type": "NodeText",
									"Data": "将识别新的VTEP网关，\n并在OVN_Southbound数据库中为其创建新的Chassis表条目。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-wznl7tz",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-wznl7tz"
					},
					"Children": [
						{
							"ID": "20221129012752-ml1aoa6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-ml1aoa6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、然后，管理员可以创建一个新的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Logical_Switch"
								},
								{
									"Type": "NodeText",
									"Data": "表项，并将VTEP网关端口上的特定vlan绑定到任意VTEP逻辑交换机。\n一旦VTEP逻辑交换机绑定到VTEP网关，ovn-controller-vtep将检测到它，\n并将其名称添加到OVN_Southbound数据库中chassis表的vtep_logical_switches列。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-425q0mf",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221129012752-425q0mf",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221129012752-t78i1sm",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221129012752-t78i1sm"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "请注意，VTEP逻辑交换机的tunnel_key列在创建时未被填充。\n当相应的vtep逻辑交换机绑定到OVN逻辑网络时，"
						},
						{
							"Type": "NodeTextMark",
							"TextMarkType": "code",
							"TextMarkTextContent": "ovn-controller-vtep"
						},
						{
							"Type": "NodeText",
							"Data": "才将设置列内容。"
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-4zyzyyc",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-4zyzyyc",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-xpqdr1s",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-xpqdr1s"
					},
					"Children": [
						{
							"ID": "20221129012752-aw0i2h2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-aw0i2h2"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、现在，管理员可以使用CMS将VTEP逻辑交换机添加到OVN逻辑网络。\n为此，CMS必须首先在OVN_Northbound数据库中创建一个新的Logical_Switch_Port表项。\n然后，该条目的类型列必须设置为“vtep”。\n接下来，还必须指定options列中的vtep-logical-switch和vtep-physical-switch密钥，\n因为多个VTEP网关可以连接到同一个VTEP逻辑交换机。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-dujzxwk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-dujzxwk"
					},
					"Children": [
						{
							"ID": "20221129012752-nnt8e7s",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-nnt8e7s"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "4、OVN_Northbound数据库中新创建的逻辑端口及其配置将作为新的Port_Binding表项传递给OVN_Southbound数据库。\novn-controller-vtep将识别更改内容并将逻辑端口绑定到相应的VTEP网关chassis。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-wuhiv19",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221129012752-wuhiv19",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221129012752-rolhpmh",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221129012752-rolhpmh"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "禁止将同一个VTEP逻辑交换机绑定到不同的OVN逻辑网络，否则会在日志中产生警告。"
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-csw0rv2",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-csw0rv2",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-pe8ll7w",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-pe8ll7w"
					},
					"Children": [
						{
							"ID": "20221129012752-y02hwxy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-y02hwxy"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "5、除绑定到VTEP网关chassis外，ovn-controller-vtep还会将VTEP逻辑交换机的tunnel_key列，\n更新为绑定OVN逻辑网络的相应Datapath_Binding表项的tunnel_key。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-m7408q8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-m7408q8"
					},
					"Children": [
						{
							"ID": "20221129012752-h2jmf43",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-h2jmf43"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "6、接下来，ovn-controller-vtep将对OVN_Northbound数据库中的Port_Binding中的配置更改作出反应，\n并更新VTEP数据库中的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "Ucast_Macs_Remote"
								},
								{
									"Type": "NodeText",
									"Data": "表。\n这使得VTEP网关可以了解从哪里转发来自扩展外部网络的单播流量。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-n0xoqnv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-n0xoqnv"
					},
					"Children": [
						{
							"ID": "20221129012752-oz5v3wo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-oz5v3wo"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "7、最终，当管理员从VTEP数据库注销VTEP网关时，VTEP网关的生命周期结束。\novn-controller-vtep将识别该事件并删除OVN_Southbound数据库中的所有相关配置（chassis表条目和端口绑定）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-mbqcyjv",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-mbqcyjv"
					},
					"Children": [
						{
							"ID": "20221129012752-0t64xls",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-0t64xls"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "8、当ovn-controller-vtep终止时，将清除OVN_Southbound数据库和VTEP数据库中的所有相关配置，\n包括所有注册的VTEP网关及其端口绑定的Chassis表条目，以及所有Ucast_Macs_Remote表项和Logical_Switch隧道密钥。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-z62u48m",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012752-z62u48m",
				"updated": "20221129012835"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "12. 安全"
				}
			]
		},
		{
			"ID": "20221129012752-bcx3qn5",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012752-bcx3qn5",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "12.1、针对南向数据库的基于角色的访问控制"
				}
			]
		},
		{
			"ID": "20221129012752-j7vk4zq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-j7vk4zq",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了提供额外的安全性以防止OVN chassis受到攻击，从而防止流氓软件对南向数据库状态进行任意修改，从而中断OVN网络，\n从而有了针对南向数据库的基于角色的访问控制策略（请参阅ovsdb-server部分以获取更多详细信息）。"
				}
			]
		},
		{
			"ID": "20221129012752-ku4i5u7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-ku4i5u7",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "基于角色的访问控制（RBAC）的实现需要在OVSDB模式中添加两个表：\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "RBAC_Role"
				},
				{
					"Type": "NodeText",
					"Data": "表，该表由角色名称进行索引，\n并将可以对给定角色进行修改的各个表的名称映射到权限表中的单个行，其中包含该角色的详细权限信息，\n权限表本身由包含以下信息的行组成："
				}
			]
		},
		{
			"ID": "20221129012752-6ou3nlc",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-6ou3nlc",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-0xzrihm",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-0xzrihm"
					},
					"Children": [
						{
							"ID": "20221129012752-u00jhv7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-u00jhv7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Table Name\n关联表的名称。本栏存在主要是为了帮助人们阅读本表内容。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-fd0ics2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-fd0ics2"
					},
					"Children": [
						{
							"ID": "20221129012752-h2d243r",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-h2d243r"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "认证（Auth Criteria）\n一组包含列名称的字符串（或者是列的column:key对，这些列包含了string:string映射关系）。\n至少一个列或列的内容：要修改，插入或删除的行中的键值必须等于尝试作用于该行的客户端的ID,\n要删改的行中，至少有一个column:key值或者列的内容，必须和尝试作用于该行的客户端的ID相同，以便授权检查通过。\n如果授权标准为空，则禁用授权检查，并且该角色扥所有客户端将被视为已授权。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-pqup1fg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-pqup1fg"
					},
					"Children": [
						{
							"ID": "20221129012752-pudomvb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-pudomvb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "插入/删除（Insert/Delete）\n行插入/删除权限(布尔值)，指示相关表是否允许增删行。 如果为true，则授权客户端增删行。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-cansd5v",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-cansd5v"
					},
					"Children": [
						{
							"ID": "20221129012752-53y8osc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-53y8osc"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "可更新的列（Updatable Columns）\n一组字符串，他们包含了可能由授权客户端更新或变异的列或 column:key对。\n只有在客户的授权检查通过，并且所有要修改的列都包含在这组可修改的列中时，才允许修改行中的列。\nOVN南向数据库的RBAC配置由ovn-northd维护。\n启用RBAC时，只允许对Chassis / Encap / Port_Binding和MAC_Binding表进行修改，\n并且重新分配如下："
								}
							]
						},
						{
							"ID": "20221129012752-haqigyq",
							"Type": "NodeList",
							"ListData": {},
							"Properties": {
								"id": "20221129012752-haqigyq"
							},
							"Children": [
								{
									"ID": "20221129012752-dbhrc1x",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012752-dbhrc1x"
									},
									"Children": [
										{
											"ID": "20221129012752-ezyuhi8",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012752-ezyuhi8"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "Chassis"
												}
											]
										},
										{
											"ID": "20221129012752-p6e0gmu",
											"Type": "NodeList",
											"ListData": {},
											"Properties": {
												"id": "20221129012752-p6e0gmu"
											},
											"Children": [
												{
													"ID": "20221129012752-pjwm77i",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-pjwm77i"
													},
													"Children": [
														{
															"ID": "20221129012752-2tvar0x",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-2tvar0x"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "授权：客户端ID必须与chassis 名称匹配。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-qvewof8",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-qvewof8"
													},
													"Children": [
														{
															"ID": "20221129012752-4jwk9wx",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-4jwk9wx"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "插入/删除：允许授权的行插入和删除。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-xdonmxk",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-xdonmxk"
													},
													"Children": [
														{
															"ID": "20221129012752-ngbgfj8",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-ngbgfj8"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "更新：授权时可以修改列"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "nb_cfg"
																},
																{
																	"Type": "NodeText",
																	"Data": "，"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "external_ids"
																},
																{
																	"Type": "NodeText",
																	"Data": "，"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "encaps"
																},
																{
																	"Type": "NodeText",
																	"Data": "和"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "vtep_logical_switches"
																},
																{
																	"Type": "NodeText",
																	"Data": "。"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129012752-btn83t6",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012752-btn83t6"
									},
									"Children": [
										{
											"ID": "20221129012752-dx7p1ka",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012752-dx7p1ka"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "Encap授权"
												}
											]
										},
										{
											"ID": "20221129012752-6axyh3k",
											"Type": "NodeList",
											"ListData": {},
											"Properties": {
												"id": "20221129012752-6axyh3k"
											},
											"Children": [
												{
													"ID": "20221129012752-xny0ybm",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-xny0ybm"
													},
													"Children": [
														{
															"ID": "20221129012752-idzup4t",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-idzup4t"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "授权：客户端ID必须与chassis 名称匹配。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-e0tagi4",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-e0tagi4"
													},
													"Children": [
														{
															"ID": "20221129012752-0tp5aq5",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-0tp5aq5"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "插入/删除：允许授权的行插入和删除。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-8bsw5as",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-8bsw5as"
													},
													"Children": [
														{
															"ID": "20221129012752-3rosjmb",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-3rosjmb"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "更新：列类型，选项和IP可以修改。"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129012752-mqzj633",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012752-mqzj633"
									},
									"Children": [
										{
											"ID": "20221129012752-gnv6tt0",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012752-gnv6tt0"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "Port_Binding"
												}
											]
										},
										{
											"ID": "20221129012752-dq16bd5",
											"Type": "NodeList",
											"ListData": {},
											"Properties": {
												"id": "20221129012752-dq16bd5"
											},
											"Children": [
												{
													"ID": "20221129012752-71cztsc",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-71cztsc"
													},
													"Children": [
														{
															"ID": "20221129012752-tu5cq9d",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-tu5cq9d"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "授权：禁用（所有客户端都被认为是授权的)。\n未来改进可能会添加列（或external_ids的key），以控制哪个chassis允许绑定每个端口。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-xn1mqbh",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-xn1mqbh"
													},
													"Children": [
														{
															"ID": "20221129012752-sryh6c2",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-sryh6c2"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "插入/删除：不允许行插入/删除（ovn-northd维护此表中的行）"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-2sxg3d8",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-2sxg3d8"
													},
													"Children": [
														{
															"ID": "20221129012752-bxonpis",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-bxonpis"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "更新：只允许对chassis列进行修改。"
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20221129012752-8poys0t",
									"Type": "NodeListItem",
									"ListData": {
										"BulletChar": 42,
										"Marker": "Kg=="
									},
									"Properties": {
										"id": "20221129012752-8poys0t"
									},
									"Children": [
										{
											"ID": "20221129012752-yogvogl",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20221129012752-yogvogl"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "MAC_Binding"
												}
											]
										},
										{
											"ID": "20221129012752-gbvwbhh",
											"Type": "NodeList",
											"ListData": {},
											"Properties": {
												"id": "20221129012752-gbvwbhh"
											},
											"Children": [
												{
													"ID": "20221129012752-zv6qodu",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-zv6qodu"
													},
													"Children": [
														{
															"ID": "20221129012752-0tdlmy2",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-0tdlmy2"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "授权：禁用（所有客户被认为是授权的）"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-a2i096s",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-a2i096s"
													},
													"Children": [
														{
															"ID": "20221129012752-97u7sk1",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-97u7sk1"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "插入/删除：允许行插入/删除。"
																}
															]
														}
													]
												},
												{
													"ID": "20221129012752-n5v6np9",
													"Type": "NodeListItem",
													"ListData": {
														"BulletChar": 42,
														"Marker": "Kg=="
													},
													"Properties": {
														"id": "20221129012752-n5v6np9"
													},
													"Children": [
														{
															"ID": "20221129012752-d0ef2cf",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20221129012752-d0ef2cf"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "更新："
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "logical_port"
																},
																{
																	"Type": "NodeText",
																	"Data": "，"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "ip"
																},
																{
																	"Type": "NodeText",
																	"Data": "，"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "mac"
																},
																{
																	"Type": "NodeText",
																	"Data": "和"
																},
																{
																	"Type": "NodeTextMark",
																	"TextMarkType": "code",
																	"TextMarkTextContent": "datapath"
																},
																{
																	"Type": "NodeText",
																	"Data": "列可以由ovn-controller修改。"
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-v8zdkue",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-v8zdkue",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要为ovn-controller连接到南向数据库启用RBAC，需要以下步骤："
				}
			]
		},
		{
			"ID": "20221129012752-sn671ly",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-sn671ly",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-mlch6gt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-mlch6gt"
					},
					"Children": [
						{
							"ID": "20221129012752-9n9kxj3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-9n9kxj3"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、为证书CN字段设置为chassis名称的每个chassis创建SSL证书\n例如，对于带有"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "external-ids：system-id = chassis-1"
								},
								{
									"Type": "NodeText",
									"Data": "的chassis，\n通过命令"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovs-pki -B 1024 -u req + sign chassis-1 switch"
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-w120q2h",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-w120q2h"
					},
					"Children": [
						{
							"ID": "20221129012752-fo9vidb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-fo9vidb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、当连接到南向数据库时配置每个ovn-controller使用SSL。（"
								},
								{
									"Type": "NodeBr",
									"Data": "br"
								},
								{
									"Type": "NodeText",
									"Data": "例如通过"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovs-vsctl set open . external-ids:ovn-remote=ssl:x.x.x.x:6642"
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-11c9i5q",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-11c9i5q"
					},
					"Children": [
						{
							"ID": "20221129012752-oz7m6jf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-oz7m6jf"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、使用“ovn-controller”角色配置南向数据库SSL远程。\n例如通过"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ovn-sbctl set-connection role=ovn-controller pssl:6642"
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-57o2xge",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012752-57o2xge",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "12.2、使用IPsec加密隧道通信"
				}
			]
		},
		{
			"ID": "20221129012752-9znosyo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-9znosyo",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN隧道流量需流经物理路由器和交换机，而这些物理设备可能不受信任（公共网络中的设备），或者可能受到危害。\n对隧道流量启用加密可以防止对流量数据进行监视和操作。"
				}
			]
		},
		{
			"ID": "20221129012752-qvk6o75",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-qvk6o75",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "隧道流量是用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "IPsec"
				},
				{
					"Type": "NodeText",
					"Data": "加密的。\nCMS设置北向"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "NB_Global"
				},
				{
					"Type": "NodeText",
					"Data": "表中的"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "IPsec"
				},
				{
					"Type": "NodeText",
					"Data": "列，以启用或禁用IPsec加密。\n如果ipsec为true，则所有OVN隧道都将加密。\n如果ipsec为false，则不会加密OVN隧道。"
				}
			]
		},
		{
			"ID": "20221129012752-wjp1j0h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-wjp1j0h",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "当CMS更新北向NB_Global表中的ipsec列时，ovn-northd将该值复制到南向SB_Global表中的ipsec列。\n每个chassis中的ovn-controller监视南向数据库，并相应地设置OVS隧道接口的选项。\nOVS隧道接口选项由"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovs-monitor-ipsec"
				},
				{
					"Type": "NodeText",
					"Data": "守护程序监视，该守护程序通过配置IKE守护程序来启动ipsec连接。"
				}
			]
		},
		{
			"ID": "20221129012752-94eehex",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-94eehex",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Chassis使用证书相互验证。如果隧道中的另一端提供由受信任的CA签名的证书，\n并且公用名（CN）与预期的Chassis名匹配，则验证成功。"
				}
			]
		},
		{
			"ID": "20221129012752-bdstxf3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-bdstxf3",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "基于角色的访问控制（RBAC）中使用的SSL证书可以在IPsec中使用。也可以使用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovs-pki"
				},
				{
					"Type": "NodeText",
					"Data": "创建不同的证书。\n证书要求是x.509 version 3，并且将"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "CN"
				},
				{
					"Type": "NodeText",
					"Data": "字段和"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "SubjectAltName"
				},
				{
					"Type": "NodeText",
					"Data": "字段设置为Chassis名称。"
				}
			]
		},
		{
			"ID": "20221129012752-bn2f78x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-bn2f78x",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在启用IPsec之前，需要在每个Chassis中安装CA证书、Chassis证书和私钥。\n请参阅"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ovs vswitchd.conf.db"
				},
				{
					"Type": "NodeText",
					"Data": "来设置基于CA的IPsec身份验证。"
				}
			]
		},
		{
			"ID": "20221129012752-hgno6jy",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20221129012752-hgno6jy",
				"updated": "20221129012848"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13. 设计决策"
				}
			]
		},
		{
			"ID": "20221129012752-fu2mgty",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221129012752-fu2mgty",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13.1、隧道（tunnel）封装"
				}
			]
		},
		{
			"ID": "20221129012752-5v335ta",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-5v335ta",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "OVN标注从一个hypervisor发送到另一个的逻辑网络包，这些包包含以下三个元数据，他们以encapsulation-specific的方式编码："
				}
			]
		},
		{
			"ID": "20221129012752-ns9x9jp",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-ns9x9jp",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-pqvm380",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-pqvm380"
					},
					"Children": [
						{
							"ID": "20221129012752-9ily3qk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-9ily3qk"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "24位逻辑数据路径标识符"
								},
								{
									"Type": "NodeText",
									"Data": " ，来自OVN Southbound数据库Datapath_Binding表中的隧道密钥列。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-wu40nvx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-wu40nvx"
					},
					"Children": [
						{
							"ID": "20221129012752-ninmguu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-ninmguu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "15位逻辑入口端口标识符"
								},
								{
									"Type": "NodeText",
									"Data": " 。"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "code",
									"TextMarkTextContent": "ID 0"
								},
								{
									"Type": "NodeText",
									"Data": "被保留在OVN内部供内部使用。\n可以将ID 1到32767（包括端点）分配给逻辑端口（请参阅OVN Southbound Port_Binding表中的tunnel_key列）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-g560i4f",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-g560i4f"
					},
					"Children": [
						{
							"ID": "20221129012752-9wz3r36",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-9wz3r36"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "16位逻辑出口端口标识符"
								},
								{
									"Type": "NodeText",
									"Data": " 。ID 0到32767与逻辑入口端口具有相同的含义。\n可以将32768到65535的ID分配给logical多播组（请参阅OVN Southbound Multicast_Group表中的tunnel_key列）。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-xj9t3lu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-xj9t3lu",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对于hypervisor到hypervisor的流量，OVN仅支持Geneve和STT封装，原因如下："
				}
			]
		},
		{
			"ID": "20221129012752-dkl9ass",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221129012752-dkl9ass",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"ID": "20221129012752-6xatwi0",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-6xatwi0"
					},
					"Children": [
						{
							"ID": "20221129012752-yds7l2x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-yds7l2x"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、只有STT和Geneve支持OVN使用的大量元数据（每个数据包超过32位）（如上所述）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-1ojvpqx",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-1ojvpqx"
					},
					"Children": [
						{
							"ID": "20221129012752-c9zpyty",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-c9zpyty"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、STT和Geneve使用随机化的UDP或TCP源端口，允许在底层使用ECMP的环境中，在多个路径之间进行高效分发。"
								}
							]
						}
					]
				},
				{
					"ID": "20221129012752-7xfl94s",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221129012752-7xfl94s"
					},
					"Children": [
						{
							"ID": "20221129012752-po5x281",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221129012752-po5x281"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、NIC支持对STT和Geneve封装和解封装。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221129012752-ah80ix8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-ah80ix8",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "由于其灵活性，hypervisor之间的首选封装方案是"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Geneve"
				},
				{
					"Type": "NodeText",
					"Data": "。\n对于Geneve封装，OVN在"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Geneve VNI"
				},
				{
					"Type": "NodeText",
					"Data": "中传输逻辑数据路径标识符。\nOVN将类别为"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "0x0102"
				},
				{
					"Type": "NodeText",
					"Data": "，类型为"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "0x80"
				},
				{
					"Type": "NodeText",
					"Data": "的TLV中的逻辑入口端口和逻辑出口端口从MSB传输到LSB，其编码为32位，如下所示："
				}
			]
		},
		{
			"ID": "20221129012752-fpsmrwo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221129012752-fpsmrwo",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c21hbGx0YWxr"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " 1       15          16\n+---+------------+-----------+\n|rsv|ingress port|egress port|\n+---+------------+-----------+\n 0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221129012752-6tc9ezx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-6tc9ezx",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "不支持Geneve的网卡环境，因为性能的原因，可能更偏向STT封装。\n对于STT封装，OVN将STT 64位隧道ID中所有三个逻辑元数据编码如下，从MSB到LSB分别是："
				}
			]
		},
		{
			"ID": "20221129012752-gg8ls7o",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221129012752-gg8ls7o",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c21hbGx0YWxr"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "   9          15          16         24\n+--------+------------+-----------+--------+\n|reserved|ingress port|egress port|datapath|\n+--------+------------+-----------+--------+\n   0\n\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221129012752-e8xcc5r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221129012752-e8xcc5r",
				"updated": "20221129012752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为了连接到网关，除了Geneve和STT之外，OVN还支持"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "VXLAN"
				},
				{
					"Type": "NodeText",
					"Data": "，因为在top-of-rack (ToR)交换机上，只有VXLAN是普遍支持的。、\n目前，网关具有与由VTEP模式定义的能力匹配的特征集，因此元数据的比特数是必需的。\n将来，不支持封装大量元数据的网关可能会继续减少功能集。"
				}
			]
		}
	]
}