{
	"ID": "20240131151014-oaze4xa",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240131151014-oaze4xa",
		"title": "1.  2308日志收集方法",
		"updated": "20240131160332"
	},
	"Children": [
		{
			"ID": "20240131151138-swvzpz6",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240131151138-swvzpz6",
				"updated": "20240131151138"
			},
			"Children": [
				{
					"ID": "20240131151138-rfq02fa",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20240131151138-rfq02fa",
						"updated": "20240131151138"
					},
					"Children": [
						{
							"ID": "20240131151138-txjye9n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131151138-txjye9n",
								"updated": "20240131151138"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "SMART2308下硬盘的SMART收集，可以使用smartctl或hwdiag，命令分别为smartctl –a /dev/sdX和hwdiag –t disk –d。hwdiag工具的安装及使用指导可以参考下面BMA软件的链接："
								}
							]
						},
						{
							"ID": "20240131151138-5vdyuny",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131151138-5vdyuny",
								"updated": "20240131151138"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "http://support.huawei.com/enterprise/productsupport?lang=zh\u0026pid=21099187\u0026idAbsPath=7919749|9856522|9856629|21099187",
									"TextMarkTextContent": "http://support.huawei.com/enterprise/productsupport?lang=zh\u0026amp;pid=21099187\u0026amp;idAbsPath=7919749|9856522|9856629|21099187"
								}
							]
						},
						{
							"ID": "20240131151138-psxvoja",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131151138-psxvoja",
								"updated": "20240131151138"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "对于组RAID的场景，可以使用lsscsi -g获取RAID组下硬盘对应的sg号，然后使用指令smartctl –a /dev/sgX获取硬盘SMART。"
								}
							]
						}
					]
				},
				{
					"ID": "20240131151138-b0kf2sd",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20240131151138-b0kf2sd",
						"updated": "20240131151138"
					},
					"Children": [
						{
							"ID": "20240131151138-sivomzn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131151138-sivomzn",
								"updated": "20240131151138"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RAID配置信息RAID配置信息和硬盘状态可以使用sas2ircu获取，下载地址如下，对应指令为sas2ircu 0 display和sas2ircu 0 status："
								}
							]
						},
						{
							"ID": "20240131151138-klwgnbj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131151138-klwgnbj",
								"updated": "20240131151138"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "http://www.lsi.com/products/host-bus-adapters/pages/lsi-sas-9217-8i.aspx#tab/tab4",
									"TextMarkTextContent": "http://www.lsi.com/products/host-bus-adapters/pages/lsi-sas-9217-8i.aspx#tab/tab4"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240131151139-or9xho7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131151139-or9xho7",
				"updated": "20240131160019"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160019-onesepg.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160020-xkdmyof",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160020-xkdmyof",
				"updated": "20240131160026"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "再注意判断硬盘状态是否正常，状态列表如下，标黄的为不正常的状态："
				}
			]
		},
		{
			"ID": "20240131160035-3ud7n9y",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160035-3ud7n9y",
				"updated": "20240131160036"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160036-rag4ltg.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160119-p3wkf7s",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160119-p3wkf7s",
				"updated": "20240131160129"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "另外，需要注意，当Enclosure ID和Slot ID都为0时，表示该硬盘已经不在位，并不代表槽位号为0。"
				}
			]
		},
		{
			"ID": "20240131160124-djudtdg",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240131160124-djudtdg",
				"updated": "20240131160205"
			},
			"Children": [
				{
					"ID": "20240131160205-rgwwdpe",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20240131160205-rgwwdpe",
						"updated": "20240131160205"
					},
					"Children": [
						{
							"ID": "20240131160205-evzy9no",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131160205-evzy9no",
								"updated": "20240131160205"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "OS日志在OS没有出现文件系统只读或Kernel挂死的情况下，收集dmesg和/var/log目录全部message文件即可；如果有只读的情况，则需要获取OS串口打印，要提前设置OS内核参数，使能串口重定向功能和KDump功能。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240131160219-1unfa3s",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20240131160219-1unfa3s",
				"updated": "20240131160224"
			},
			"Children": [
				{
					"ID": "20240131160224-jjfw03f",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20240131160224-jjfw03f",
						"updated": "20240131160224"
					},
					"Children": [
						{
							"ID": "20240131160224-4zpmryb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20240131160224-4zpmryb",
								"updated": "20240131160224"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "链路误码和RAID卡日志2016年12月发布的InfoCollecct和ToolKit都将支持HBA卡的日志和误码自动收集，如果需要手动操作，可以使用hbacli(ToolKit中可以获取)，hbacli获取日志和误码的方法如下："
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20240131160219-pjesalk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160219-pjesalk",
				"updated": "20240131160219"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "误码：运行hbacli，选择控制器编号后回车，输入选项6"
				}
			]
		},
		{
			"ID": "20240131160226-napcyof",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160226-napcyof",
				"updated": "20240131160231"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160231-0q2mop3.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160252-enmb4pj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160252-enmb4pj",
				"updated": "20240131160253"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "该选项即可获取链路误码状态，有Expander情况下，会显示Expander误码情况；无Expander情况下，只会显示Adapter误码情况，如下表示有Expander情况下，Expander Phy23存在链路误码，Phy24状态正常。"
				}
			]
		},
		{
			"ID": "20240131160301-fylrylf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160301-fylrylf",
				"updated": "20240131160303"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160303-fzffqr5.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160307-hkf2yz0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160307-hkf2yz0",
				"updated": "20240131160308"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "日志：运行hbacli，选择控制器编号后回车，输入选项10，并在要输入文件名的地方输入日志要保存的文件绝对地址："
				}
			]
		},
		{
			"ID": "20240131160313-cnrzqi1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160313-cnrzqi1",
				"updated": "20240131160314"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160314-2do1kld.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160317-thr9igq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160317-thr9igq",
				"updated": "20240131160318"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "确认文件地址后回车，出现如下界面，输入指令pl status查看当前硬盘状态信息，信息会被记录到/root/raid.log文件中："
				}
			]
		},
		{
			"ID": "20240131160321-42o53tx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160321-42o53tx",
				"updated": "20240131160322"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160322-fvppdud.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240131160328-6rklcbr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160328-6rklcbr",
				"updated": "20240131160328"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "再输入指令iop show diag命令，用来打印当前控制器日志："
				}
			]
		},
		{
			"ID": "20240131160331-4z697l8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240131160331-4z697l8",
				"updated": "20240131160332"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20240131160332-h8ts1jl.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		}
	]
}