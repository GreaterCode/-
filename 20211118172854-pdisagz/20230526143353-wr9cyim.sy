{
	"ID": "20230526143353-wr9cyim",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230526143353-wr9cyim",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20230526145947-u0dquxr\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230526144823-gg2xbpz\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230526150623-ndszlc5\u0026quot;,\u0026quot;focusStart\u0026quot;:18,\u0026quot;focusEnd\u0026quot;:18}",
		"title": "容器镜像迁移工具之image-syncer",
		"updated": "20230526143457"
	},
	"Children": [
		{
			"ID": "20230526145947-u0dquxr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230526145947-u0dquxr",
				"updated": "20230526150005"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://github.com/AliyunContainerService/image-syncer",
					"TextMarkTextContent": "github"
				}
			]
		},
		{
			"ID": "20230526143428-3b1p19g",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230526143428-3b1p19g",
				"updated": "20230526145324"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"Properties": {
						"style": "font-size: 13px; font-weight: 400; letter-spacing: normal;"
					},
					"TextMarkType": "text",
					"TextMarkTextContent": " "
				},
				{
					"Type": "NodeKramdownSpanIAL",
					"Data": "{: style=\"font-size: 13px; font-weight: 400; letter-spacing: normal;\"}"
				},
				{
					"Type": "NodeText",
					"Data": "1. 简介"
				}
			]
		},
		{
			"ID": "20230526145359-ehe3ztm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230526145359-ehe3ztm"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一个简单、易用的批量镜像迁移和镜像同步复制工具，支持几乎所有目前主流的基于"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "Docker Registry V2"
				},
				{
					"Type": "NodeText",
					"Data": "​​搭建的镜像存储服务，例如ACR、Docker、Hub、Quay、自建Harbor等，目前已经初步经过了TB级别的生产环境镜像迁移验证"
				}
			]
		},
		{
			"ID": "20230526150559-hxqnhty",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526150559-hxqnhty",
				"updated": "20230526150607"
			},
			"Children": [
				{
					"ID": "20230526150600-q8mwrq8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526150600-q8mwrq8",
						"updated": "20230526150607"
					},
					"Children": [
						{
							"ID": "20230526150600-0apf90w",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526150600-0apf90w",
								"updated": "20230526150603"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "特性"
								}
							]
						},
						{
							"ID": "20230526150603-s1gam11",
							"Type": "NodeList",
							"ListData": {
								"Typ": 1
							},
							"Properties": {
								"id": "20230526150603-s1gam11",
								"updated": "20230526150607"
							},
							"Children": [
								{
									"ID": "20230526150607-5ch5x4d",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "MS4=",
										"Num": 1
									},
									"Properties": {
										"id": "20230526150607-5ch5x4d",
										"updated": "20230526150607"
									},
									"Children": [
										{
											"ID": "20230526150607-7enapgl",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150607-7enapgl",
												"updated": "20230526150610"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "支持多对多镜像仓库同步"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150610-oh0258v",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Mi4=",
										"Num": 2
									},
									"Properties": {
										"id": "20230526150610-oh0258v"
									},
									"Children": [
										{
											"ID": "20230526150610-mj3ryck",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150610-mj3ryck",
												"updated": "20230526150616"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "支持基于 Docker Registry V2 搭建的 docker 镜像仓库服务 (如 Docker Hub、 Quay、 阿里云镜像服务 ACR、 Harbor等)"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150617-nifkf1i",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "My4=",
										"Num": 3
									},
									"Properties": {
										"id": "20230526150617-nifkf1i"
									},
									"Children": [
										{
											"ID": "20230526150617-2s9ap8u",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150617-2s9ap8u",
												"updated": "20230526150620"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "同步只经过内存和网络，不依赖磁盘存储，同步速度快"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150620-nrd8gzo",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NC4=",
										"Num": 4
									},
									"Properties": {
										"id": "20230526150620-nrd8gzo"
									},
									"Children": [
										{
											"ID": "20230526150620-nkprwrv",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150620-nkprwrv",
												"updated": "20230526150623"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "增量同步, 通过对同步过的镜像 blob 信息落盘，不重复同步已同步的镜像"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150623-skfbo2m",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "NS4=",
										"Num": 5
									},
									"Properties": {
										"id": "20230526150623-skfbo2m"
									},
									"Children": [
										{
											"ID": "20230526150623-ndszlc5",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150623-ndszlc5",
												"updated": "20230526150625"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "并发同步，可以通过配置文件调整并发数"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150626-pqczgw5",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Ni4=",
										"Num": 6
									},
									"Properties": {
										"id": "20230526150626-pqczgw5"
									},
									"Children": [
										{
											"ID": "20230526150626-4rzqal4",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150626-4rzqal4",
												"updated": "20230526150628"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "自动重试失败的同步任务，可以解决大部分镜像同步中的网络抖动问题"
												}
											]
										}
									]
								},
								{
									"ID": "20230526150628-msq4948",
									"Type": "NodeListItem",
									"ListData": {
										"Typ": 1,
										"Delimiter": 46,
										"Marker": "Ny4=",
										"Num": 7
									},
									"Properties": {
										"id": "20230526150628-msq4948"
									},
									"Children": [
										{
											"ID": "20230526150628-rmwbsn1",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526150628-rmwbsn1"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "不依赖 docker 以及其他程序"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526143447-wfaxo34",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230526143447-wfaxo34",
				"updated": "20230526143457"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.安装"
				}
			]
		},
		{
			"ID": "20230526143503-ul0agd6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230526143503-ul0agd6",
				"updated": "20230526151001"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "wget https://github.com/AliyunContainerService/image-syncer/releases/download/v1.0.3/image-syncer-v1.0.3-linux-amd64.tar.gz\ntar zxf image-syncer-v1.0.3-linux-amd64.tar.gz \u0026\u0026 mv image-syncer /usr/local/bin/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230526150317-xzexkl5",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526150317-xzexkl5",
				"updated": "20230526150333"
			},
			"Children": [
				{
					"ID": "20230526150328-niiemfy",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526150328-niiemfy",
						"updated": "20230526150333"
					},
					"Children": [
						{
							"ID": "20230526150328-c82w3v6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526150328-c82w3v6",
								"updated": "20230526150328"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "参数"
								}
							]
						},
						{
							"ID": "20230526150329-09v2jwr",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526150329-09v2jwr",
								"updated": "20230526150333"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "-h  --help       usage information\n\n    --config     set the path of config file, this file need to be created before starting synchronization, default\n                 config file is at \"current/working/directory/config.json\". (This flag can be replaced with flag --auth\n                 and --images which for better orgnization.)\n\n    --auth       set the path of authentication file, this file need to be created before starting synchronization, default\n                 config file is at \"current/working/directory/auth.json\". This flag need to be pair used with --images.\n\n    --images     set the path of image rules file, this file need to be created before starting synchronization, default\n                 config file is at \"current/working/directory/images.json\". This flag need to be pair used with --auth.\n\n    --log        set the path of log file, logs will be printed to Stderr by default \n\n    --namespace  set default-namespace, default-namespace can also be set by environment variable \"DEFAULT_NAMESPACE\",\n                 if they are both set at the same time, \"DEFAULT_NAMESPACE\" will not work at this synchronization,\n                 default-namespace will work only if default-registry is not empty.\n\n    --registry   set default-registry, default-registry can also be set by environment variable \"DEFAULT_REGISTRY\",\n                 if they are both set at the same time, \"DEFAULT_REGISTRY\" will not work at this synchronization, \n                 default-registry will work only if default-namespace is not empty.\n\n    --proc       number of goroutines, default value is 5\n\n    --records    image-syncer will record the information of synchronized image blobs to a disk file, this parameter will\n                 set the path of the records file, default path is \"current/working/directory/records\", a records file can be \n                 reused to make incremental synchronization if it is really generated by yourself. image-syncer remove the \n                 dependence of records file after v1.1.0\n\n    --retries    number of retries, default value is 2, the retries of failed sync tasks will start after all sync tasks\n                 are executed once, reties of failed sync tasks will resolve most occasional network problems during \n                 synchronization\n\n    --os         os list to filter source tags, not works for docker v2 schema1 media, takes no effect if empty\n  \n    --arch       architecture list to filter source tags, takes no effect if empty\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526143513-ijwx9xd",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230526143513-ijwx9xd",
				"updated": "20230526143519"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. 使用"
				}
			]
		},
		{
			"ID": "20230526143544-c2m5fn2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230526143544-c2m5fn2",
				"updated": "20230526143558"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 Harbor To Aliyun ACR"
				}
			]
		},
		{
			"ID": "20230526143619-9ejyuqq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526143619-9ejyuqq",
				"updated": "20230526144231"
			},
			"Children": [
				{
					"ID": "20230526143950-tk3900d",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526143950-tk3900d",
						"updated": "20230526144231"
					},
					"Children": [
						{
							"ID": "20230526143950-e698amf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526143950-e698amf",
								"updated": "20230526143950"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "配置文件模板"
								}
							]
						},
						{
							"ID": "20230526144104-qe305n6",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144104-qe305n6",
								"updated": "20230526144209"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "{\n    \"auth\": {                   // 认证字段，其中每个对象为一个registry的一个账号和\n                                // 密码；通常，同步源需要具有pull以及访问tags权限，\n                                // 同步目标需要拥有push以及创建仓库权限，如果没有提供，则默认匿名访问\n        \"quay.io\": {            // registry的url，需要和下面images中对应registry的url相同\n            \"username\": \"xxx\",               // 用户名，可选\n            \"password\": \"xxxxxxxxx\",         // 密码，可选\n            \"insecure\": true                 // registry是否是http服务，如果是，insecure字段需要为true\n        },\n        \"registry.cn-beijing.aliyuncs.com\": {\n            \"username\": \"xxx\",\n            \"password\": \"xxxxxxxxx\"\n        },\n        \"registry.hub.docker.com\": {\n            \"username\": \"xxx\",\n            \"password\": \"xxxxxxxxxx\"\n        }\n    },\n    images: {\n    \t        \"quay.io/coreos/kube-rbac-proxy\": \"quay.io/ruohe/kube-rbac-proxy\",\n        \t\"xxxx\":\"xxxxx\",\n        \t\"xxx/xxx/xx:tag1,tag2,tag3\":\"xxx/xxx/xx\"\n    }\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						},
						{
							"ID": "20230526144219-m45npr7",
							"Type": "NodeBlockquote",
							"Properties": {
								"id": "20230526144219-m45npr7",
								"updated": "20230526144231"
							},
							"Children": [
								{
									"Type": "NodeBlockquoteMarker",
									"Data": "\u003e"
								},
								{
									"ID": "20230526144231-ljodm9q",
									"Type": "NodeBlockquote",
									"Properties": {
										"id": "20230526144231-ljodm9q",
										"updated": "20230526144231"
									},
									"Children": [
										{
											"Type": "NodeBlockquoteMarker",
											"Data": "\u003e"
										},
										{
											"ID": "20230526144231-d3pbu11",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-d3pbu11",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "1、同步镜像规则字段，其中一条规则包括一个源仓库（键）和一个目标仓库（值）"
												}
											]
										},
										{
											"ID": "20230526144231-3xj54cb",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-3xj54cb",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "2、同步的最大单位是仓库（repo），不支持通过一条规则同步整个namespace以及registry"
												}
											]
										},
										{
											"ID": "20230526144231-lflxy9x",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-lflxy9x",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "3、源仓库和目标仓库的格式与docker pull/push命令使用的镜像url类似（registry/namespace/repository:tag）"
												}
											]
										},
										{
											"ID": "20230526144231-8t6hubr",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-8t6hubr",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "4、源仓库和目标仓库（如果目标仓库不为空字符串）都至少包含registry/namespace/repository"
												}
											]
										},
										{
											"ID": "20230526144231-prf9jtv",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-prf9jtv",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "5、源仓库字段不能为空，如果需要将一个源仓库同步到多个目标仓库需要配置多条规则"
												}
											]
										},
										{
											"ID": "20230526144231-ccr9avg",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-ccr9avg",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "6、目标仓库名可以和源仓库名不同（tag也可以不同），此时同步功能类似于：docker pull + docker tag + docker push"
												}
											]
										},
										{
											"ID": "20230526144231-2lmo0o4",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-2lmo0o4",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "7、当源仓库字段中不包含tag时，表示将该仓库所有tag同步到目标仓库，此时目标仓库不能包含tag 8、当源仓库字段中包含tag时，表示只同步源仓库中的一个tag到目标仓库，如果目标仓库中不包含tag，则默认使用源tag 9、源仓库字段中的tag可以同时包含多个（比如\"a/b/c:1,2,3\"），tag之间通过\",\"隔开，此时目标仓库不能包含tag，并且默认使用原来的tag"
												}
											]
										},
										{
											"ID": "20230526144231-mb6jb93",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20230526144231-mb6jb93",
												"updated": "20230526144231"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "10、当目标仓库为空字符串时，会将源镜像同步到默认registry的默认namespace下，并且repo以及tag与源仓库相同，默认registry和默认namespace可以通过命令行参数以及环境变量配置，参考下面的描述"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526143853-ht6414k",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526143853-ht6414k",
				"updated": "20230526144052"
			},
			"Children": [
				{
					"ID": "20230526143946-ab3aqa7",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526143946-ab3aqa7",
						"updated": "20230526144052"
					},
					"Children": [
						{
							"ID": "20230526143946-3gmbj8p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526143946-3gmbj8p",
								"updated": "20230526143946"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建配置文件："
								}
							]
						},
						{
							"ID": "20230526144050-mf8pjvc",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144050-mf8pjvc",
								"updated": "20230526144052"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "{\n    \"auth\": {\n        \"172.20.5.10\": {\n            \"username\": \"admin\",\n            \"password\": \"Xxzx@789\",\n            \"insecure\": true\n        },\n        \"registry.cn-beijing.aliyuncs.com\": {\n            \"username\": \"352@qq.com\",\n            \"password\": \"docker\"\n        }\n    },\n    \"images\": {\n        \"172.20.5.10/library/kube-apiserver\": \"\"\n    }\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526143934-jjjj2an",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526143934-jjjj2an",
				"updated": "20230526144432"
			},
			"Children": [
				{
					"ID": "20230526143953-b2wcmf2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526143953-b2wcmf2",
						"updated": "20230526144432"
					},
					"Children": [
						{
							"ID": "20230526143953-3beo4zc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526143953-3beo4zc",
								"updated": "20230526143953"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "开始迁移："
								}
							]
						},
						{
							"ID": "20230526144002-ief91uw",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144002-ief91uw",
								"updated": "20230526144013"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "# 并发数为10，重试次数为10\n# 日志输出到./log文件下，不存在会自动创建，不指定的话默认会将日志打印到Stderr\n# 指定配置文件为harbor-to-acr.json，内容如上所述\n\nimage-syncer --proc=10 --config=./harbor_to_acr.json --registry=registry.cn-beijing.aliyuncs.com --namespace=cloud-devops --retries=10 --log=./log  \nStart to generate sync tasks, please wait ...\nStart to handle sync tasks, please wait ...\nFinished, 0 sync tasks failed, 0 tasks generate failed\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						},
						{
							"ID": "20230526144415-wq8k69v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526144415-wq8k69v",
								"updated": "20230526144421"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "日志打印"
								}
							]
						},
						{
							"ID": "20230526144422-o8lznpa",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144422-o8lznpa",
								"updated": "20230526144432"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "{\"level\":\"info\",\"msg\":\"Get tags of 172.20.5.10/library/kube-apiserver successfully: [v1.20.1]\",\"time\":\"2021-01-08 10:54:23\"}\n{\"level\":\"info\",\"msg\":\"Generate a task for 172.20.5.10/library/kube-apiserver:v1.20.1 to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1\",\"time\":\"2021-01-08 10:54:23\"}\n{\"level\":\"info\",\"msg\":\"Get manifest from 172.20.5.10/library/kube-apiserver:v1.20.1\",\"time\":\"2021-01-08 10:54:23\"}\n{\"level\":\"info\",\"msg\":\"Get a blob sha256:f398b465657ed53ee83af22197ef61be9daec6af791c559ee5220dee5f3d94fe(647423) from 172.20.5.10/library/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:23\"}\n{\"level\":\"info\",\"msg\":\"Put blob sha256:f398b465657ed53ee83af22197ef61be9daec6af791c559ee5220dee5f3d94fe(647423) to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Get a blob sha256:cbcdf8ef32b41cd954f25c9d85dee61b05acc3b20ffa8620596ed66ee6f1ae1d(723022) from 172.20.5.10/library/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Put blob sha256:cbcdf8ef32b41cd954f25c9d85dee61b05acc3b20ffa8620596ed66ee6f1ae1d(723022) to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Get a blob sha256:d7d21f5bdd8303a60bac834f99867a58e6f3e1abcb6d486158a1ccb67dbf85bf(29033259) from 172.20.5.10/library/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Put blob sha256:d7d21f5bdd8303a60bac834f99867a58e6f3e1abcb6d486158a1ccb67dbf85bf(29033259) to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Get a blob sha256:75c7f711208082c548b935ab31e681ea30acccdce6b7abeecabae5bbfd326627(2630) from 172.20.5.10/library/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:24\"}\n{\"level\":\"info\",\"msg\":\"Put blob sha256:75c7f711208082c548b935ab31e681ea30acccdce6b7abeecabae5bbfd326627(2630) to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1 success\",\"time\":\"2021-01-08 10:54:25\"}\n{\"level\":\"info\",\"msg\":\"Put manifest to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1\",\"time\":\"2021-01-08 10:54:25\"}\n{\"level\":\"info\",\"msg\":\"Synchronization successfully from 172.20.5.10/library/kube-apiserver:v1.20.1 to registry.cn-beijing.aliyuncs.com/cloud-devops/kube-apiserver:v1.20.1\",\"time\":\"2021-01-08 10:54:25\"}\n{\"level\":\"info\",\"msg\":\"Finished, 0 sync tasks failed, 0 tasks generate failed\",\"time\":\"2021-01-08 10:54:25\"}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526144436-r0eh92g",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230526144436-r0eh92g",
				"updated": "20230526144450"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2 Harbor To Huawei SWR"
				}
			]
		},
		{
			"ID": "20230526144456-xwss8h2",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526144456-xwss8h2",
				"updated": "20230526144517"
			},
			"Children": [
				{
					"ID": "20230526144500-kr9epe8",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526144500-kr9epe8",
						"updated": "20230526144517"
					},
					"Children": [
						{
							"ID": "20230526144500-d6zd2ht",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526144500-d6zd2ht",
								"updated": "20230526144504"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建配置文件"
								}
							]
						},
						{
							"ID": "20230526144505-fny1x0l",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144505-fny1x0l",
								"updated": "20230526144517"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "{\n    \"auth\": {\n        \"172.20.5.10\": {\n            \"username\": \"admin\",\n            \"password\": \"Xxzx@789\",\n            \"insecure\": true\n        },\n        \"swr.cn-east-3.myhuaweicloud.com\": {\n            \"username\": \"cn-east-3@8B5B8GC\",\n            \"password\": \"8b0f1e69f2\"\n        }\n    },\n    \"images\": {\n        \"172.20.5.10/library/kube-apiserver\": \"\",\n        \"172.20.5.10/library/controller\": \"\"\n    }\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526144644-oz0xj09",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526144644-oz0xj09",
				"updated": "20230526144722"
			},
			"Children": [
				{
					"ID": "20230526144711-ziido7s",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526144711-ziido7s",
						"updated": "20230526144722"
					},
					"Children": [
						{
							"ID": "20230526144711-qkguvt7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526144711-qkguvt7",
								"updated": "20230526144714"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "启动任务"
								}
							]
						},
						{
							"ID": "20230526144715-76dnhv6",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144715-76dnhv6",
								"updated": "20230526144722"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "image-syncer --proc=10 --config=./harbor_to_swr.json --registry=swr.cn-east-3.myhuaweicloud.com --namespace=cloud-devops --retries=10 --log=./log\nStart to generate sync tasks, please wait ...\nStart to handle sync tasks, please wait ...\nFinished, 0 sync tasks failed, 0 tasks generate failed\n\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526144728-5fzoid9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230526144728-5fzoid9",
				"updated": "20230526144733"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3 Huawei SWR To Aliyun ACR"
				}
			]
		},
		{
			"ID": "20230526144748-cpezqu2",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526144748-cpezqu2",
				"updated": "20230526144809"
			},
			"Children": [
				{
					"ID": "20230526144750-te02cql",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526144750-te02cql",
						"updated": "20230526144809"
					},
					"Children": [
						{
							"ID": "20230526144750-se551ho",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526144750-se551ho",
								"updated": "20230526144756"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建日志文件"
								}
							]
						},
						{
							"ID": "20230526144756-a09wanh",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144756-a09wanh",
								"updated": "20230526144809"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "{\n    \"auth\": {\n        \"swr.cn-east-3.myhuaweicloud.com\": {\n            \"username\": \"cn-east-3@8B5B8GC\",\n            \"password\": \"8b0f1e6a46af8dff0ae519a09f2\"\n        },\n        \"registry.cn-beijing.aliyuncs.com\": {\n            \"username\": \"352@qq.com\",\n            \"password\": \"docker\"\n        }\n    },\n    \"images\": {\n        \"swr.cn-east-3.myhuaweicloud.com/cloud-devops/kube-apiserver\": \"\",\n        \"swr.cn-east-3.myhuaweicloud.com/cloud-devops/controller\": \"\"\n    }\n}\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526144810-fo8o0f5",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230526144810-fo8o0f5",
				"updated": "20230526144832"
			},
			"Children": [
				{
					"ID": "20230526144811-qeftbvu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230526144811-qeftbvu",
						"updated": "20230526144832"
					},
					"Children": [
						{
							"ID": "20230526144811-rx6bxo4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230526144811-rx6bxo4",
								"updated": "20230526144818"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "开始迁移"
								}
							]
						},
						{
							"ID": "20230526144825-c1mnuhg",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230526144825-c1mnuhg",
								"updated": "20230526144832"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "image-syncer --proc=10 --config=./harbor_to_swr.json --registry=registry.cn-beijing.aliyuncs.com --namespace=cloud-devops --retries=10 --log=./log\nStart to generate sync tasks, please wait ...\nStart to handle sync tasks, please wait ...\nFinished, 0 sync tasks failed, 0 tasks generate failed\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230526144823-gg2xbpz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230526144823-gg2xbpz"
			}
		}
	]
}