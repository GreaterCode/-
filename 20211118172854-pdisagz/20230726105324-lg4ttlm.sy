{
	"ID": "20230726105324-lg4ttlm",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230726105324-lg4ttlm",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20230726141513-bur5vvn\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230726110651-72s4bt2\u0026quot;,\u0026quot;scrollTop\u0026quot;:3280,\u0026quot;focusId\u0026quot;:\u0026quot;20230726105938-t0kj0bl\u0026quot;,\u0026quot;focusStart\u0026quot;:431,\u0026quot;focusEnd\u0026quot;:431}",
		"title": "ipvsadm",
		"updated": "20230726142947"
	},
	"Children": [
		{
			"ID": "20230726141513-bur5vvn",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230726141513-bur5vvn",
				"updated": "20230726141533"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "0. 概述及安装"
				}
			]
		},
		{
			"ID": "20230726141546-qlrmgvq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-qlrmgvq",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "【基本描述】\nipvsadm是linux下的LVS虚拟服务器的管理工具，LVS工作于内核空间，而ipvsadm则提供了用户空间的接口；"
				}
			]
		},
		{
			"ID": "20230726141546-q3js15t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-q3js15t",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "【用法】\n基本用法如下，分别用于设置虚拟服务算法和后端真实服务器"
				}
			]
		},
		{
			"ID": "20230726141546-x6wplyy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-x6wplyy",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "ipvsadm 选项 服务器地址 -s 算法\nipvsadm 选项 服务器地址 -r 真实服务器地址 [工作模式][权重]..."
				}
			]
		},
		{
			"ID": "20230726141546-nnes9eh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-nnes9eh",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可使用yum安装或者从官网下载安装包源码安装，两种方式皆可"
				}
			]
		},
		{
			"ID": "20230726141546-4q5k02n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-4q5k02n",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "先检查是否已经安装ipvsadm\n[root@v_machine1 ~]# yum list installed | grep ipvsadm\n若没有安装，则使用以下命令安装ipvsadm"
				}
			]
		},
		{
			"ID": "20230726141546-2b8qhu7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141546-2b8qhu7",
				"updated": "20230726141546"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "[root@v_machine1 ~]# yum -y install ipvsadm"
				}
			]
		},
		{
			"ID": "20230726141549-my1koeh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726141549-my1koeh"
			}
		},
		{
			"ID": "20230726105351-wjq7ttz",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230726105351-wjq7ttz",
				"updated": "20230726105427"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1. ipvsadm的使用"
				}
			]
		},
		{
			"ID": "20230726105429-9972eu7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726105429-9972eu7",
				"updated": "20230726105434"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\tipvsadm是一个工具，同时它也是一条命令，用于管理LVS的策略规则。"
				}
			]
		},
		{
			"ID": "20230726105324-edlsxri",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230726105324-edlsxri",
				"updated": "20230726105608"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.1  命令语法、子命令和选项"
				}
			]
		},
		{
			"ID": "20230726105608-cfvqyuf",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230726105608-cfvqyuf",
				"updated": "20230726105758"
			},
			"Children": [
				{
					"ID": "20230726105711-96cm1uw",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230726105711-96cm1uw",
						"updated": "20230726105758"
					},
					"Children": [
						{
							"ID": "20230726105711-l2ycy79",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230726105711-l2ycy79",
								"updated": "20230726105724"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "语法"
								}
							]
						},
						{
							"ID": "20230726105746-l6dimwv",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230726105746-l6dimwv",
								"updated": "20230726105758"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": " ipvsadm -A|E -t|u|f \u003c集群服务地址\u003e [-s \u003c调度算法\u003e] [-p \u003c超时时间\u003e] [-M \u003c掩码\u003e] [-b \u003c标志\u003e]\n ipvsadm -D -t|u|f \u003c集群服务地址\u003e\n ipvsadm -C\n ipvsadm -R\n ipvsadm -S [-n]\n ipvsadm -a|e -t|u|f \u003c集群服务地址\u003e -r \u003c真实服务器地址\u003e [选项]\n ipvsadm -d -t|u|f \u003c集群服务地址\u003e -r \u003c真实服务器地址\u003e\n ipvsadm -L|l [options]\n ipvsadm -Z [-t|u|f \u003c集群服务地址\u003e]\n ipvsadm --set \u003c超时时间\u003e\n ipvsadm --start-daemon \u003c主或备\u003e [--mcast-interface \u003c组播接口\u003e] [--syncid \u003cSID\u003e]\n ipvsadm --stop-daemon \u003c主或备\u003e\n ipvsadm -h\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230726105600-fndu0e9",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230726105600-fndu0e9",
				"updated": "20230726105637"
			},
			"Children": [
				{
					"ID": "20230726105618-m0qlt2g",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230726105618-m0qlt2g",
						"updated": "20230726105637"
					},
					"Children": [
						{
							"ID": "20230726105618-664qwlh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230726105618-664qwlh",
								"updated": "20230726105618"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "子命令"
								}
							]
						},
						{
							"ID": "20230726105627-lyrfnps",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230726105627-lyrfnps",
								"updated": "20230726105637"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": " --add-service     -A        添加一个集群服务，需要使用选项\n --edit-service    -E        编辑一个集群服务，需要使用选项\n --delete-service  -D        删除指定集群服务，需要使用选项\n --clear           -C        删除所有集群服务，包括真实服务器转发策略规则\n --restore         -R        从标准输入中恢复策略规则\n --save            -S        保存策略规则到标准输出\n --add-server      -a        添加一个真实服务器，需要使用选项\n --edit-server     -e        编辑一个真实服务器，需要使用选项\n --delete-server   -d        删除一个真实服务器，需要使用选项\n --list            -L|-l     查看集群服务列表，包括真实服务器转发策略规则\n --zero            -Z        计数器清零。清除连接数、包转发等数量统计信息\n --set \u003c超时时间\u003e             设置TCP、TCPFIN（TCP关闭连接状态）、UDP连接超时时间，用于会话保持。一般情况下TCP和UDP超时时间保持默认就好，TCPFIN   可以根据情况设定，指定它则用户请求连接关闭，该连接则会变 为非活跃（InActive）空闲等待状态，在空闲等待时间内，如果来自同一源IP的请求，则还会转发给后端的同一台真实服务器上\n\n --start-daemon              开启连接同步守护进程。在选项后面指定自己是Master（主）还是backup（备），主负载调度器会同步所有策略及连接状态到备负载调度器，当主故障，备可以接替其工作\n --stop-daemon               停止连接同步守护进程\n  \n --help            -h        显示帮助信息\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230726105625-bp4torx",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20230726105625-bp4torx",
				"updated": "20230726105835"
			},
			"Children": [
				{
					"ID": "20230726105827-jpfb480",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20230726105827-jpfb480",
						"updated": "20230726105835"
					},
					"Children": [
						{
							"ID": "20230726105827-pagvs48",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230726105827-pagvs48",
								"updated": "20230726105830"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "选项"
								}
							]
						},
						{
							"ID": "20230726105830-x3gz3zz",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230726105830-x3gz3zz",
								"updated": "20230726105835"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "\n --tcp-service  -t  \u003c集群服务地址\u003e   允许集群服务使用的传输协议为TCP。\u003cIP:Port\u003e\n --udp-service  -u \u003c集群服务地址\u003e    允许集群服务使用的传输协议为UDP。\u003cIP:Port\u003e\n --fwmark-service  -f \u003c防火墙标识\u003e   使用一个整数值来防火墙标识集群服务，而不是地址、端口和协议使用它，我们可以通过结合IPtables将多个以调度器为目标的端口定义成一个防火墙标识，由ipvsdam通过此项关联标识，则可以实现对一个IP多端口调度，即实现后端服务器可以开放多个服务\n\n --scheduler    -s scheduler         指定集群服务使用的调度算法：rr|wrr|lc|wlc|lblc|lblcr|dh|sh|sed|nq，默认为wlc\n\n --persistent   -p \u003c超时时间\u003e        开启持久化服务，开启它则表示在指定时间内，来自同 一IP的请求都会转发到后端同一台真实服务器上\n\n --netmask      -M \u003c网络掩码\u003e        使用网络掩码来屏蔽持久化来源IP的地址范围，默认值为255.255.255.255，即所有来源IP请求都会享受持久\n化服务\n\n --real-server  -r \u003c真实服务器地址\u003e    指定真实服务器的主机IP与端口\n\n --gatewaying   -g                   指定真实服务器转发工作模式，使用DR模式，默认\n\n --ipip         -i                   指定真实服务器转发工作模式，使用TUN模式\n\n --masquerading -m                   指定真实服务器转发工作模式，使用NAT模式\n\n --weight       -w \u003c权重值\u003e           指定真实服务器的权重值\n\n --u-threshold  -x \u003c上阀值\u003e           设置转发请求的最大上连接阀值，范围为0~65535，当连接数超过指定上限时，LVS则不会转发求                                \n\n --l-threshold  -y \u003c下阀值\u003e           设置转发请求的下连接阀值，范围为0~65535，当连接数降低至指定值时，LVS则继续提供服务，默认值为0\n\n --mcast-interface interface         设置用于连接同步守护进程的组播接口\n\n --syncid sid                        设置连接同步守护进程的SID号，用于标识，范围0~255\n\n --connection   -c                   显示连接信息，一般与\"-l\"连用\n\n --timeout                           显示TCP、TCPFIN、UDP超时时间信息，一般与\"-l\"连用\n\n --daemon                            显示连接同步守护信息，一般与\"-l\"连用\n\n --stats                             显示统计信息，一般与\"-l\"连用\n\n --rate                              显示转发速率信息，一般与\"-l\"连用\n\n --exact                             显示数据包和字节计数器的确切值，扩大字符长度\n\n --thresholds                        显示阀值信息，一般与\"-l\"连用\n\n --persistent-conn                   显示持久化连接信息，一般与\"-l\"连用\n\n --numeric      -n                   地址和端口以数字格式显示，一般与\"-l\"连用\n\n --sched-flags  -b \u003c标识\u003e            设置调度算法的范围标识，用于SH算法，有两个标识： sh-fallback，如果真实服务器不可用，则将其转发到 其他真实服务器上。  sh-port,将源地址的端口号也添加到散列键=值中\n\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230726105846-td96mdw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230726105846-td96mdw",
				"updated": "20230726105856"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2 集群服务管理"
				}
			]
		},
		{
			"ID": "20230726105910-canw5cr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726105910-canw5cr",
				"updated": "20230726105916"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对集群服务条目的增删查改"
				}
			]
		},
		{
			"ID": "20230726105917-sz5mwg0",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726105917-sz5mwg0",
				"updated": "20230726105933"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2.1 查看"
				}
			]
		},
		{
			"ID": "20230726105938-t0kj0bl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726105938-t0kj0bl",
				"updated": "20230726142947"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -ln\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n\n \n查看lvs的连接状态命令： ipvsadm  -l  --stats\n说明：\n1. Conns    (connections scheduled)  已经转发过的连接数\n2. InPkts   (incoming packets)       入包个数\n3. OutPkts  (outgoing packets)       出包个数\n4. InBytes  (incoming bytes)         入流量（字节）  \n5. OutBytes (outgoing bytes)         出流量（字节）\n\n2. 查看lvs速率  ：ipvsadm   -l  --rate\n说明：\n1. CPS      (current connection rate)   每秒连接数\n2. InPPS    (current in packet rate)    每秒的入包个数\n3. OutPPS   (current out packet rate)   每秒的出包个数\n4. InBPS    (current in byte rate)      每秒入流量（字节）\n5. OutBPS   (current out byte rate)      每秒入流量（字节）\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726105929-y7yosam",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726105929-y7yosam",
				"updated": "20230726110000"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2.2 添加一个集群服务"
				}
			]
		},
		{
			"ID": "20230726110016-uxmv3iq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110016-uxmv3iq",
				"updated": "20230726110035"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -A -t 192.168.1.100:80 -s rr\n# ipvsadm -ln\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\nTCP  192.168.1.100:80 rr\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110037-yoj2smz",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110037-yoj2smz",
				"updated": "20230726110048"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2.3 修改一个集群服务"
				}
			]
		},
		{
			"ID": "20230726110100-6763dlj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110100-6763dlj",
				"updated": "20230726110107"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -E -t 192.168.1.100:80 -s wlc\n# ipvsadm -ln\n\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\nTCP  192.168.1.100:80 wlc\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110115-j9af9rs",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110115-j9af9rs",
				"updated": "20230726110127"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2.4 删除一个集群服务"
				}
			]
		},
		{
			"ID": "20230726110128-g6afb9q",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110128-g6afb9q",
				"updated": "20230726110141"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#ipvsadm -D -t 192.168.1.100:80\n#ipvsadm -ln\n\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n为空\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110144-u77e2d2",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110144-u77e2d2",
				"updated": "20230726110159"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2.5 删除所有集群服务"
				}
			]
		},
		{
			"ID": "20230726110203-9oefu99",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110203-9oefu99",
				"updated": "20230726110211"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#ipvsadm -C\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110212-k0vslpq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230726110212-k0vslpq",
				"updated": "20230726110315"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3 真实服务器管理"
				}
			]
		},
		{
			"ID": "20230726110315-1duv03q",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726110315-1duv03q",
				"updated": "20230726110325"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对要转发的真实服务器条目的增删查改。绑定集群服务、指定LVS转发的工作模式。"
				}
			]
		},
		{
			"ID": "20230726110326-hz98sjo",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110326-hz98sjo",
				"updated": "20230726110422"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3.1 往集群服务中添加一个真实服务器"
				}
			]
		},
		{
			"ID": "20230726110346-h15q693",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110346-h15q693",
				"updated": "20230726110351"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -a -t 192.168.1.100:80 -r 172.16.16.2:80 -m -w 1\n\n# ipvsadm -a -t 192.168.1.100:80 -r 172.16.16.3:80 -m -w 1\n\n# ipvsadm -ln\n\nIP Virtual Server version 1.2.1 (size=4096)\n\nProt LocalAddress:Port Scheduler Flags\n\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n\nTCP  192.168.1.100:80 wlc\n\n -\u003e 172.16.16.2:80               Masq    1      0          0      \n\n -\u003e 172.16.16.3:80               Masq    1      0          0   \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110410-cjxc2m3",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110410-cjxc2m3",
				"updated": "20230726110438"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3.2 修改集群服务中的一个真实服务器"
				}
			]
		},
		{
			"ID": "20230726110447-edcltwc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726110447-edcltwc",
				"updated": "20230726110447"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "修改集群服务中的一个真实服务器的权重值。"
				}
			]
		},
		{
			"ID": "20230726110504-emrg5na",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110504-emrg5na",
				"updated": "20230726110522"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -e -t 192.168.1.100:80 -r 172.16.16.2:80 -m -w 2\n\n# ipvsadm -ln\n\nIP Virtual Server version 1.2.1 (size=4096)\n\nProt LocalAddress:Port Scheduler Flags\n\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n\nTCP  192.168.1.100:80 wlc\n\n -\u003e 172.16.16.2:80               Masq    2      0          0    \n\n -\u003e 172.16.16.3:80               Masq    1      0          0   \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110538-y5yydfn",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110538-y5yydfn",
				"updated": "20230726110538"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3.3 删除集群服务中的一个真实服务器"
				}
			]
		},
		{
			"ID": "20230726110538-afwli46",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110538-afwli46",
				"updated": "20230726110538"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c2hlbGw="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ipvsadm -d -t 192.168.1.100:80 -r 172.16.16.2:80\n\n# ipvsadm -ln\n\nIP Virtual Server version 1.2.1 (size=4096)\n\nProt LocalAddress:Port Scheduler Flags\n\n -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n\nTCP  192.168.1.100:80 wlc\n\n -\u003e 已被删除\n\n -\u003e 172.16.16.3:80               Masq    1      0          0   \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230726110550-98tuhyi",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20230726110550-98tuhyi",
				"updated": "20230726110550"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.3.4 清空转发请求计数器"
				}
			]
		},
		{
			"ID": "20230726110607-pzj8zub",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230726110607-pzj8zub"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\t​"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "code",
					"TextMarkTextContent": "ipvsadm -Z"
				},
				{
					"Type": "NodeText",
					"Data": "​​"
				}
			]
		},
		{
			"ID": "20230726110651-7epu9x9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230726110651-7epu9x9",
				"updated": "20230726110713"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.4 规则表备份与还原："
				}
			]
		},
		{
			"ID": "20230726110651-72s4bt2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230726110651-72s4bt2",
				"updated": "20230726110651"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c2hlbGw="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[root@v_machine1 ~]# ipvsadm -S \u003e /tmp/ip_vs.bak\n[root@v_machine1 ~]# cat /tmp/ip_vs.bak\n-A -t v_machine1:http -s rr\n-a -t v_machine1:http -r 192.168.237.171:http -m -w 1\n-a -t v_machine1:http -r 192.168.237.172:http -m -w 1\n[root@v_machine1 ~]# ipvsadm -C\n[root@v_machine1 ~]# ipvsadm -L\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n  -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\n[root@v_machine1 ~]# ipvsadm -R \u003c /tmp/ip_vs.bak\n[root@v_machine1 ~]# ipvsadm -Ln\nIP Virtual Server version 1.2.1 (size=4096)\nProt LocalAddress:Port Scheduler Flags\n  -\u003e RemoteAddress:Port           Forward Weight ActiveConn InActConn\nTCP  192.168.237.131:80 rr\n  -\u003e 192.168.237.171:80           Masq    1      0          0\n  -\u003e 192.168.237.172:80           Masq    1      0          0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}