{
	"ID": "20240406232024-g18byd9",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20240406232024-g18byd9",
		"title": "通用的Makefile文件模板",
		"updated": "20240410114535"
	},
	"Children": [
		{
			"ID": "20240406232024-og1rbdn",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20240406232024-og1rbdn",
				"updated": "20240406232024"
			}
		},
		{
			"ID": "20240406232024-2o2pn2q",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240406232024-2o2pn2q",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "写在前面"
				}
			]
		},
		{
			"ID": "20240406232024-l919he7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-l919he7",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对于Windows下开发，很多IDE都集成了编译器，如Visual Studio，提供了“一键编译”，编码完成后只需一个操作即可完成编译、链接、生成目标文件。"
				}
			]
		},
		{
			"ID": "20240406232024-w6d5rfr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-w6d5rfr",
				"updated": "20240410114535"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Linux开发与Windows不同，Linux下一般用的ƒ的gcc/g++编译器，如果是开发ARM下的Linux程序，还需用到arm-linux-gcc/arm-linux-g++交叉编译器。"
				}
			]
		},
		{
			"ID": "20240406232024-um4mf5e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-um4mf5e",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Linux下也可以实现“一键编译”功能，此时需要一个编译脚本“Makefile”，Makefile可以手动编写，也可以借助自动化构建工具（如scons、CMake）生成。手动编写Makefile是Linux和Windows程序员的区别之一，一般地一个通用的Makefile能够适合大部分Linux项目程序。"
				}
			]
		},
		{
			"ID": "20240406232024-c738b1d",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240406232024-c738b1d",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3个Makefile模板"
				}
			]
		},
		{
			"ID": "20240406232024-jgz7z41",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-jgz7z41",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 编译可执行文件Makefile"
				}
			]
		},
		{
			"ID": "20240406232024-e9h31sr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-e9h31sr",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "VERSION  =1.00\nCC   =gcc\nDEBUG   =-DUSE_DEBUG\nCFLAGS  =-Wall\nSOURCES   =$(wildcard ./source/*.c)\nINCLUDES   =-I./include\nLIB_NAMES  =-lfun_a -lfun_so\nLIB_PATH  =-L./lib\nOBJ   =$(patsubst %.c, %.o, $(SOURCES))\nTARGET  =app#links\n$(TARGET):$(OBJ)\n @mkdir -p output\n $(CC) $(OBJ) $(LIB_PATH) $(LIB_NAMES) -o output/$(TARGET)$(VERSION)\n @rm -rf $(OBJ) #compile\n%.o: %.c\n $(CC) $(INCLUDES) $(DEBUG) -c $(CFLAGS) $\u003c -o $@.PHONY:clean\nclean:\n @echo \"Remove linked and compiled files......\"\n rm -rf $(OBJ) $(TARGET) output \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-nv1bqhj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-nv1bqhj",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【要点说明】"
				}
			]
		},
		{
			"ID": "20240406232024-te73heo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-te73heo",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【1】程序版本"
				}
			]
		},
		{
			"ID": "20240406232024-rt0z6g7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-rt0z6g7",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "开发调试过程可能产生多个程序版本，可以在目标文件后（前）增加版本号标识。"
				}
			]
		},
		{
			"ID": "20240406232024-p7bw4gc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-p7bw4gc",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "VERSION = 1.00\n$(CC) $(OBJ) $(LIB_PATH) $(LIB_NAMES) -o output/$(TARGET)$(VERSION)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-0nlql62",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-0nlql62",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【2】编译器选择"
				}
			]
		},
		{
			"ID": "20240406232024-wwb6igp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-wwb6igp",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Linux下为gcc/g++；arm下为arm-linux-gcc；不同CPU厂商提供的定制交叉编译器名称可能不同，如Hisilicon“arm-hisiv300-linux-gcc”。"
				}
			]
		},
		{
			"ID": "20240406232024-hfzvixi",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-hfzvixi",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "CC = gcc\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-dvnf994",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-dvnf994",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【3】宏定义"
				}
			]
		},
		{
			"ID": "20240406232024-36295jr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-36295jr",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "开发过程，特殊代码一般增加宏条件来选择是否编译，如调试打印输出代码。-D是标识，后面接着的是“宏”。"
				}
			]
		},
		{
			"ID": "20240406232024-z1ixje7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-z1ixje7",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "DEBUG =-DUSE_DEBUG\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-2o0c0pk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-2o0c0pk",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【4】编译选项"
				}
			]
		},
		{
			"ID": "20240406232024-2hmvaq5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-2hmvaq5",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以指定编译条件，如显示警告（-Wall），优化等级（-O）。"
				}
			]
		},
		{
			"ID": "20240406232024-d2wmrx8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-d2wmrx8",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "CFLAGS =-Wall -O\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-dp54m0e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-dp54m0e",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【5】源文件"
				}
			]
		},
		{
			"ID": "20240406232024-ki7d5ne",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-ki7d5ne",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "指定源文件目的路径，利用“wildcard”获取路径下所有依赖源文件。"
				}
			]
		},
		{
			"ID": "20240406232024-bdpmrpp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-bdpmrpp",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "SOURCES =$(wildcard ./source/*.c)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-jcjk7ap",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-jcjk7ap",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【6】头文件"
				}
			]
		},
		{
			"ID": "20240406232024-5irh6h5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-5irh6h5",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "包含依赖的头文件，包括源码文件和库文件的头文件。"
				}
			]
		},
		{
			"ID": "20240406232024-nbey0ww",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-nbey0ww",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "INCLUDES =-I./include\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-1noaf8h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-1noaf8h",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【7】库文件名称"
				}
			]
		},
		{
			"ID": "20240406232024-hils7tl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-hils7tl",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "指定库文件名称，库文件有固定格式，静态库为libxxx.a;动态库为libxxx.so，指定库文件名称只需写“xxx”部分，"
				}
			]
		},
		{
			"ID": "20240406232024-9j98865",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-9j98865",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "LIB_NAMES =-lfun_a -lfun_so\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-bfsa61c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-bfsa61c",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【8】库文件路径"
				}
			]
		},
		{
			"ID": "20240406232024-dfbyjeb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-dfbyjeb",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "指定依赖库文件的存放路径。注意如果引用的是动态库，动态库也许拷贝到“/lib”或者“/usr/lib”目录下，执行应用程序时，系统默认在该文件下索引动态库。"
				}
			]
		},
		{
			"ID": "20240406232024-cafed11",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-cafed11",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "LIB_PATH =-L./lib\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-8rf8f3u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-8rf8f3u",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【9】目标文件"
				}
			]
		},
		{
			"ID": "20240406232024-vhsof2r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-vhsof2r",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "调用“patsubst”将源文件（.c）编译为目标文件（.o）。"
				}
			]
		},
		{
			"ID": "20240406232024-07x77tv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-07x77tv",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "OBJ =$(patsubst %.c, %.o, $(SOURCES))\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-ikd5aqk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-ikd5aqk",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【10】执行文件"
				}
			]
		},
		{
			"ID": "20240406232024-ojchsmm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-ojchsmm",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行文件名称"
				}
			]
		},
		{
			"ID": "20240406232024-hyv6b18",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-hyv6b18",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "TARGET =app\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-rws07ae",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-rws07ae",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【11】编译"
				}
			]
		},
		{
			"ID": "20240406232024-4jrp33l",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-4jrp33l",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "%.o: %.c\n $(CC) $(INCLUDES) $(DEBUG) $(CFLAGS) $\u003c -o $@\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-3lgp4bh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-3lgp4bh",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【12】链接"
				}
			]
		},
		{
			"ID": "20240406232024-ctzass9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-ctzass9",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可创建一个“output”文件夹存放目标执行文件。链接完输出目标执行文件，可以删除编译产生的临时文件（.o）。"
				}
			]
		},
		{
			"ID": "20240406232024-pofwl70",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-pofwl70",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "$(TARGET):$(OBJ)\n @mkdir -p output\n $(CC) $(OBJ) $(LIB_PATH) $(LIB_NAMES) -o output/$(TARGET).$(VERSION)\n @rm -rf $(OBJ)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-cikd656",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-cikd656",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【13】清除编译信息"
				}
			]
		},
		{
			"ID": "20240406232024-extty6p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-extty6p",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行“make clean”清除编译产生的临时文件。"
				}
			]
		},
		{
			"ID": "20240406232024-yku8smx",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-yku8smx",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": ".PHONY:clean\nclean:\n @echo \"Remove linked and compiled files......\"\n rm -rf $(OBJ) $(TARGET) output \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-kzvceeu",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-kzvceeu",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2 编译静态库Makefile"
				}
			]
		},
		{
			"ID": "20240406232024-8k774ku",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-8k774ku",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "VERSION     =\nCC          =gcc\nDEBUG   =\nCFLAGS  =-Wall\nAR   =ar\nARFLAGS     =rv\nSOURCES   =$(wildcard *.c)\nINCLUDES    =-I.\nLIB_NAMES   =\nLIB_PATH  =\nOBJ         =$(patsubst %.c, %.o, $(SOURCES))\nTARGET      =libfun_a#link\n$(TARGET):$(OBJ)\n @mkdir -p output\n $(AR) $(ARFLAGS) output/$(TARGET)$(VERSION).a $(OBJ)\n @rm -rf $(OBJ)#compile\n%.o: %.c\n $(CC) $(INCLUDES) $(DEBUG) -c $(CFLAGS) $\u003c -o $@  .PHONY:clean\nclean:\n @echo \"Remove linked and compiled files......\"\n rm -rf $(OBJ) $(TARGET) output \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-n2vavag",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-n2vavag",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【要点说明】"
				}
			]
		},
		{
			"ID": "20240406232024-u6d3f1z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-u6d3f1z",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "基本格式与“编译可执行Makefile”一致，不同点包括以下。"
				}
			]
		},
		{
			"ID": "20240406232024-m5j8f4x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-m5j8f4x",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "【1】使用到“ar”命令将目标文件（.o）链接成静态库文件（.a）。静态库文件固定命名格式为：libxxx.a。"
				}
			]
		},
		{
			"ID": "20240406232024-gs2wa8k",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-gs2wa8k",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3 编译动态库Makefile"
				}
			]
		},
		{
			"ID": "20240406232024-jzg834b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-jzg834b",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "VERSION   =\nCC        =gcc\nDEBUG     =\nCFLAGS    =-fPIC -shared \nLFLAGS   =-fPIC -shared \nSOURCES   =$(wildcard *.c)\nINCLUDES  =-I.\nLIB_NAMES =\nLIB_PATH  =\nOBJ       =$(patsubst %.c, %.o, $(SOURCES))\nTARGET    =libfun_so#link\n$(TARGET):$(OBJ)\n @mkdir -p output\n $(CC) $(OBJ) $(LIB_PATH) $(LIB_NAMES) $(LFLAGS) -o output/$(TARGET)$(VERSION).so\n @rm -rf $(OBJ) #compile\n%.o: %.c\n $(CC) $(INCLUDES) $(DEBUG) -c $(CFLAGS) $\u003c -o $@.PHONY:clean\nclean:\n @echo \"Remove linked and compiled files......\"\n rm -rf $(OBJ) $(TARGET) output \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-xehymg1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-xehymg1",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "【要点说明】"
				}
			]
		},
		{
			"ID": "20240406232024-4xjsfbg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-4xjsfbg",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "基本格式与“编译可执行Makefile”一致，不同点包括以下。"
				}
			]
		},
		{
			"ID": "20240406232024-zg7563v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-zg7563v",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "【1】编译选项和链接选项增加“-fPIC -shared ”选项。动态库文件固定命名格式为libxxx.so。"
				}
			]
		},
		{
			"ID": "20240406232024-nvqr8fw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20240406232024-nvqr8fw",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Demo"
				}
			]
		},
		{
			"ID": "20240406232024-0uk1l2j",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-0uk1l2j",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 编译应用程序"
				}
			]
		},
		{
			"ID": "20240406232024-yixlpdg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-yixlpdg",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编写测试例程，文件存放目录结构如下，头文件存放在“include”目录，库文件存放在“lib”目录，源文件存放在“source”目录，Makefile在当前目录下。"
				}
			]
		},
		{
			"ID": "20240406232024-q4ighox",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-q4ighox",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-og54a9c"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240406232024-fwq03yq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-fwq03yq",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源码1:"
				}
			]
		},
		{
			"ID": "20240406232024-4f2zy62",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-4f2zy62",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/*头文件*/\n#ifndef _FUN0_H_\n#define _FUN0_H_\n#endifextern void fun0_printf(void);\nextern void fun1_printf(void);/*源文件*/\n#include \u003cstdio.h\u003e\n#include \"fun0.h\"void fun0_printf(void)\n{\n    printf(\"Call \\'fun0\\'. \\r\\n\");\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-ihy5pap",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-ihy5pap",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源码2:"
				}
			]
		},
		{
			"ID": "20240406232024-4p0h50x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-4p0h50x",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/*头文件*/\n#ifndef _FUN1_H_\n#define _FUN1_H_\n#endifextern void fun1_printf(void);/*源文件*/\n#include \u003cstdio.h\u003e\n#include \"fun1.h\"void fun1_printf(void)\n{\n    printf(\"Call \\'fun1\\'.\\r\\n\");\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-jete138",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-jete138",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "主函数源码:"
				}
			]
		},
		{
			"ID": "20240406232024-i5m7qyz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-i5m7qyz",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/*源文件*/\n#include \u003cstdio.h\u003e\n#include \"fun0.h\"\n#include \"fun1.h\"\n#include \"fun_lib_a.h\"\n#include \"fun_lib_so.h\"int main(void)\n{\n    #ifdef USE_DEBUG\n        printf(\"Debug Application startup.\\r\\n\");\n    #endif            fun0_printf();\n        fun1_printf();\n        fun_lib_a_printf();\n        fun_lib_so_printf();\n        return 0;\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-3pmf4ab",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-3pmf4ab",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "库文件，“./lib”目录下存放两个库文件，一个静态库libfun_a.a，一个动态库libfun_so.so。"
				}
			]
		},
		{
			"ID": "20240406232024-tkib40v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-tkib40v",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Makefile文件即为“2.1节”的Makefile模板。"
				}
			]
		},
		{
			"ID": "20240406232024-dcbp4pz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-dcbp4pz",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "测试运行："
				}
			]
		},
		{
			"ID": "20240406232024-3t22kiy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-3t22kiy",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-kdfilw2"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240406232024-6diljlj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-6diljlj",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "【如果执行文件提示无“libfun_so.so”,则需拷贝“libfun_so.so”到根目录下的“/lib”或者“/usr/lib”目录下，因为系统执行程序，默认从该路径引脚动态库】"
				}
			]
		},
		{
			"ID": "20240406232024-9m8ypju",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-9m8ypju",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. 2 生成静态库"
				}
			]
		},
		{
			"ID": "20240406232024-kve72db",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-kve72db",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编写测试例程，生产的库文件即为“3.1节”调用的库文件（libfun_a.a）。文件存放目录结构如下："
				}
			]
		},
		{
			"ID": "20240406232024-h80xryo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-h80xryo",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-njwcvff"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240406232024-3rbkvpp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-3rbkvpp",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源文件:"
				}
			]
		},
		{
			"ID": "20240406232024-2oasj2u",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-2oasj2u",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/*头文件*/\n#ifndef _FUN_LIB_A_H_\n#define _FUN_LIB_A_H_\n#endifextern void fun_lib_a_printf(void);/*源文件*/\n#include \u003cstdio.h\u003e\n#include \"fun_lib_a.h\"void fun_lib_a_printf(void)\n{\n    printf(\"Call \\'fun_lib_a\\'.\\r\\n\");\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-o6dhzs3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-o6dhzs3",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Makefile文件即为“2.2节”的Makefile模板。"
				}
			]
		},
		{
			"ID": "20240406232024-sj51eym",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-sj51eym",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编译生成静态库："
				}
			]
		},
		{
			"ID": "20240406232024-rf3ub3j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-rf3ub3j",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-epezwvs"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240406232024-wbj38z4",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20240406232024-wbj38z4",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. 3 生成动态库"
				}
			]
		},
		{
			"ID": "20240406232024-vj2j4vv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-vj2j4vv",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编写测试例程，生产的库文件即为“3.1节”调用的库文件（libfun_so.so）。文件存放目录结构如下:"
				}
			]
		},
		{
			"ID": "20240406232024-o3uuaxi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-o3uuaxi",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-djp1iea"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20240406232024-gbssjwc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-gbssjwc",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源文件："
				}
			]
		},
		{
			"ID": "20240406232024-qye781i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20240406232024-qye781i",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/*头文件*/\n#ifndef _FUN_LIB_SO_H_\n#define _FUN_LIB_SO_H_\n#endifextern void fun_lib_so_printf(void);/*头文件*/#include \u003cstdio.h\u003e\n#include \"fun_lib_so.h\"void fun_lib_so_printf(void)\n{\n    printf(\"Call \\'fun_lib_so\\'.\\r\\n\");\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20240406232024-6gpj3l0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-6gpj3l0",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编译生成动态库："
				}
			]
		},
		{
			"ID": "20240406232024-p1epx9h",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20240406232024-p1epx9h",
				"updated": "20240406232024"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "图片"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/640-20240406232024-tslw13x"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		}
	]
}