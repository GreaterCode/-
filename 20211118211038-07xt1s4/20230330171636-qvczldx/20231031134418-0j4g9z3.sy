{
	"ID": "20231031134418-0j4g9z3",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20231031134418-0j4g9z3",
		"scroll": "{\u0026quot;startId\u0026quot;:\u0026quot;20231031134418-jzgtqrk\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231106112040-04wqv0y\u0026quot;,\u0026quot;scrollTop\u0026quot;:3751,\u0026quot;focusId\u0026quot;:\u0026quot;20231031134418-jzgtqrk\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0}",
		"title": "存储基础和FC SAN存储介绍",
		"updated": "20231106112916"
	},
	"Children": [
		{
			"ID": "20231031134418-jzgtqrk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134418-jzgtqrk",
				"updated": "20231031134429"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "存储就是根据不同的应用环境通过采取合理、 安全、有效的方式将数据保存到某些介质上并能保证有效的访问。总的来讲可以包含两个方面的含义：一方面它是数据临时或长期驻留的物理媒介；另一方面，它是保证数据完整安全存放的方式或行为。"
				}
			]
		},
		{
			"ID": "20231031140804-bvibxtx",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231031140804-bvibxtx",
				"updated": "20231031140804"
			},
			"Children": [
				{
					"ID": "20231031140804-s47dl0y",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231031140804-s47dl0y",
						"updated": "20231031140804"
					},
					"Children": [
						{
							"ID": "20231031140804-u7yaju9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031140804-u7yaju9",
								"updated": "20231031140804"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "存储区域网络"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231031140804-m44uebo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031140804-m44uebo",
				"updated": "20231031140804"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "存储区域网络 (Storage Area Network, SAN) 是企业最常用的存储网络架构，要求高吞吐量和低延迟的业务关键型业务往往采用这类架构运行。如今，采用"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "https://www.zhihu.com/people/Network-GongChengShi",
					"TextMarkTextContent": "全"
				},
				{
					"Type": "NodeText",
					"Data": "闪存存储的 SAN 部署数量增速迅猛。与旋转磁盘相比，全闪存存储可提供更出色的性能、稳定一致的低延迟以及更低的总成本。SAN 将数据存储在集中式共享存储中，使企业能够运用一致的方法和工具来实施安全防护、数据保护和灾难恢复。"
				}
			]
		},
		{
			"ID": "20231031140804-kfd97k3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031140804-kfd97k3",
				"updated": "20231031140804"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "SAN 是一种基于块的存储，利用高速架构将服务器与其逻辑磁盘单元 (Logical Disk Unit, LUN) 相连。LUN 是一系列通过共享存储池配置的块，以逻辑磁盘的形式呈现给服务器。服务器会对这些块进行分区和格式化，通常使用文件系统，以便可以像在本地磁盘存储上一样在 LUN 上存储数据。"
				}
			]
		},
		{
			"ID": "20231031140804-vkpjpt5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031140804-vkpjpt5",
				"updated": "20231031140804"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "SAN约占网络存储市场总额的三分之二。SAN 的设计可消除单点故障，因此具有极高的可用性和故障恢复能力。设计完善的SAN 可以轻松承受多个组件或设备的故障。"
				}
			]
		},
		{
			"ID": "20231031203039-75ell61",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231031203039-75ell61",
				"updated": "20231031203039"
			},
			"Children": [
				{
					"ID": "20231031203039-5gu7pfp",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231031203039-5gu7pfp",
						"updated": "20231031203039"
					},
					"Children": [
						{
							"ID": "20231031203039-wo7jf6q",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031203039-wo7jf6q",
								"updated": "20231031203039"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "SAN 用例"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231031203039-qyffa4d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031203039-qyffa4d",
				"updated": "20231031203039"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "存储区域网络部署通常用于支持性能要求较高的业务关键型应用，例如："
				}
			]
		},
		{
			"ID": "20231031203039-hv8f1tb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031203039-hv8f1tb",
				"updated": "20231031203039"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Oracle数据库。这类数据库往往对业务至关重要，并且对性能和可用性的要求最高。。这类数据库往往对业务至关重要，并且对性能和可用性的要求最高。Microsft SQL Server 数据库。与 Oracle数据库一样，MS SQLServer 数据库通常存储着企业最有价值的数据，因此也需要最高的性能和可用性。VMware ,KVM 或Microsoft hyper-v 的大型虚拟化部署。这些环境经常涉及到成千上万台运行各种操作系统和应用程序、性能要求各不相同的虚拟机。虚拟化环境集中了许多应用程序，一个故障可能导致多个应用程序中断，因此基础架构的可靠性就变得愈加重要。这类环境为企业的庞大用户群提供虚拟桌面服务。有些 VDI 环境的虚拟桌面数量很容易就能达到数万个。通过集中管理虚拟桌面，企业可以更轻松地进行数据保护和数据安全性管理。"
				}
			]
		},
		{
			"ID": "20231031203041-x08gqsx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031203041-x08gqsx"
			}
		},
		{
			"ID": "20231031134523-os95qww",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134523-os95qww",
				"updated": "20231031134523"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "SAN存储方式创造了存储的网络化。存储网络化顺应了计算机服务器体系结构网络化的趋势。FC-SAN的支撑技术是光纤通道 (FC Fiber Channel) 技术。FC技术支持HIPPI、IPI、SCSI、IP、ATM等多种高级协议，其最大特性是将网络和设备的通信协议与传输物理介质隔离开， 这样多种协议可在同一个物理连接上同时传送。当然SAN也可以使用IP通道进行部署：IP-SAN。"
				}
			]
		},
		{
			"ID": "20231031134523-immpy22",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134523-immpy22",
				"updated": "20231031134523"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "FC-SAN的硬件基础设施是光纤通道，用光纤通道构建的 SAN由以下三个部分组成："
				}
			]
		},
		{
			"ID": "20231031134523-qxgx6jv",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20231031134523-qxgx6jv",
				"updated": "20231031134523"
			},
			"Children": [
				{
					"ID": "20231031134523-sx6j3h4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20231031134523-sx6j3h4",
						"updated": "20231031134523"
					},
					"Children": [
						{
							"ID": "20231031134523-upduxvb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134523-upduxvb",
								"updated": "20231031134523"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "存储和备份设备：包括磁带、磁盘和光盘库等。"
								}
							]
						}
					]
				},
				{
					"ID": "20231031134523-z1azmml",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20231031134523-z1azmml",
						"updated": "20231031134523"
					},
					"Children": [
						{
							"ID": "20231031134523-g7cp9it",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134523-g7cp9it",
								"updated": "20231031134523"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "光纤通道网络连接部件：包括主机总线适配卡、驱动程序、光缆、集线器、交换机、光纤通道和 SCSI间的桥接器"
								}
							]
						}
					]
				},
				{
					"ID": "20231031134523-6hh47uc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20231031134523-6hh47uc",
						"updated": "20231031134523"
					},
					"Children": [
						{
							"ID": "20231031134523-qbuxz9d",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134523-qbuxz9d",
								"updated": "20231031134523"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "应用和管理软件：包括备份软件、存储资源管理软件和存储设备管理软件。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231031134523-c4rznyw",
			"Type": "NodeHeading",
			"HeadingLevel": 6,
			"Properties": {
				"id": "20231031134523-c4rznyw",
				"updated": "20231031134523"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "FC-SAN的优势："
				}
			]
		},
		{
			"ID": "20231031134808-eqxam21",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134808-eqxam21",
				"updated": "20231031134816"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "​"
				},
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "image"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/image-20231031134816-0gi9tlg.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "​"
				}
			]
		},
		{
			"ID": "20231031134950-lbx5al4",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20231031134950-lbx5al4",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "DAS、NAS和SAN三种存储方式比较"
				}
			]
		},
		{
			"ID": "20231031134950-p5iicv5",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20231031134950-p5iicv5",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1、连接方式对比"
				}
			]
		},
		{
			"ID": "20231031134950-26jk0k5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134950-26jk0k5",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从连接方式上对比，DAS采用了存储设备直接连接应用服务器，具有一定的灵活性和限制性；NAS通过网络（TCP/IP,ATM,FDDI）技术连接存储设备和应用服务器，存储设备位置灵活，随着万兆网的出现，传输速率有了很大的提高；FC-SAN则是通过光纤通道（Fibre Channel）技术连接存储设备和应用服务器，具有很好的传输速率和扩展性能。三种存储方式各有优势，相互共存，占到了磁盘存储市场的70%以上。SAN和NAS产品的价格仍然远远高于 DAS.许多用户出于价格因素考虑选择了低效率的直连存储而不是高效率的共享存储。"
				}
			]
		},
		{
			"ID": "20231031134950-fq7dtda",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231031134950-fq7dtda",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "客观的说，SAN和NAS系统已经可以利用类似自动精简配置（thinprovisioning ）这样的技术来弥补早期存储分配不灵活的短板。然而，之前它们消耗了太多的时间来解决存储分配的问题增加内链， 以至于给DAS留有足够的时间在数据中心领域站稳脚跟。此外， SAN和NAS依然问题多多，至今无法解决。但是SAN常用于大型网络存储的建设，并且在混合存储技术成熟的未来， 是颇具潜力的。"
				}
			]
		},
		{
			"ID": "20231031134950-7f484k2",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20231031134950-7f484k2",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2、应用场景对比"
				}
			]
		},
		{
			"ID": "20231031134950-kcx4yqq",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231031134950-kcx4yqq",
				"updated": "20231031134950"
			},
			"Children": [
				{
					"ID": "20231031134950-1w86swu",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231031134950-1w86swu",
						"updated": "20231031134950"
					},
					"Children": [
						{
							"ID": "20231031134950-p1r42og",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134950-p1r42og",
								"updated": "20231031134950"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "DAS虽然比较古老了，但是还是很适用于那些数据量不大， 对磁盘访问速度要求较高的中小企业；"
								}
							]
						}
					]
				},
				{
					"ID": "20231031134950-2dabver",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231031134950-2dabver",
						"updated": "20231031134950"
					},
					"Children": [
						{
							"ID": "20231031134950-g6861ev",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134950-g6861ev",
								"updated": "20231031134950"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "NAS多适用于文件服务器，用来存储非结构化数据，虽然受限于以太网的速度，但是部署灵活，成本低；"
								}
							]
						}
					]
				},
				{
					"ID": "20231031134950-7of90cf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231031134950-7of90cf",
						"updated": "20231031134950"
					},
					"Children": [
						{
							"ID": "20231031134950-w3psy6j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231031134950-w3psy6j",
								"updated": "20231031134950"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "SAN则适用于大型应用或数据库系统，缺点是成本高、较复杂。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231106112350-vx5s2uv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-vx5s2uv",
				"updated": "20231106112350"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "什么是ALUA多路径机制"
				}
			]
		},
		{
			"ID": "20231106112350-iwq1yv8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-iwq1yv8",
				"updated": "20231106112350"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "       ALUA是异步逻辑单元访问("
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "Asymmetric Logical Unit Access"
				},
				{
					"Type": "NodeText",
					"Data": ")的缩写，ALUA是"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "SPC3 (SCSI Primary commands-3)协议"
				},
				{
					"Type": "NodeText",
					"Data": "中规定的目标器端口组T"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "PGS (Target Port Group Support)"
				},
				{
					"Type": "NodeText",
					"Data": "访问模型中的一类子集，可用于处理"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A/A-A (Active/ Active-Asymmetric) "
				},
				{
					"Type": "NodeText",
					"Data": "和 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A/P(Active /Passive)"
				},
				{
					"Type": "NodeText",
					"Data": "阵列的多端口访问管理。所以通常情况下，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ALUA被认为是一种多路径访问模型"
				},
				{
					"Type": "NodeText",
					"Data": "。但实际上ALUA需要多路径和存储阵列同时支持才能实现路径优化访问，它更是前端控制器多路径机制。"
				}
			]
		},
		{
			"ID": "20231106112350-yafrxy5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-yafrxy5",
				"updated": "20231106112350"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "存储前端控制器多路径机制在"
				},
				{
					"Type": "NodeText",
					"Data": "一定程度上决定存储的读写性能和可靠性，现有的前端控制器多路径机制大致可分为"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A/A-S(Active/Acivie-Symmetric)、ALUA和A/P(Active/Passive)三大类"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20231106112350-vy502go",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-vy502go",
				"updated": "20231106112350"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      先说说"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A/A-S(Active/Acivie-Symmetric)"
				},
				{
					"Type": "NodeText",
					"Data": "机制，对于特定的LUN来说，在它的路径中，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "多个存储控制器的目标端口均处于主动/优化(Active/optimized)状态"
				},
				{
					"Type": "NodeText",
					"Data": "。多个控制器之间通过PCIe或Infiniband等实现高速互联的通讯，从主机侧发送一个IO到控制器端后，多个控制器可同时参与IO处理；存储系统会自动负载均衡，当一个控制器繁忙或业务压力较大时，存储系统不需要主机端多路径负载均衡软件参与就可以自动实现负载均衡。"
				}
			]
		},
		{
			"ID": "20231106112350-4qvp2hq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-4qvp2hq",
				"updated": "20231106112350"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "     对于"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ALUA(Active/Active-Asymmetric)"
				},
				{
					"Type": "NodeText",
					"Data": "机制来说，特定的LUN在控制器的路径组中，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "只有一个控制器的目标端口组处于主动/优化(Active/Optimized)状态，其他控制器的目标端口组处于主动/非优化(Active/Unoptimized)状态"
				},
				{
					"Type": "NodeText",
					"Data": "。某个时刻一个特定LUN只属于某一个优选控制器，在多路径的配合下，"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "IO从优选控制的IO组(Active/Optimized)下发IO"
				},
				{
					"Type": "NodeText",
					"Data": "，多路径不会发送该LUN的IO到其他控制器，一般通过将LUN A归属控制器A，将LUNB归属给控制器B实现两边的负载均衡，归属操作可以手动或自动完成。"
				}
			]
		},
		{
			"ID": "20231106112350-dqmv9m9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112350-dqmv9m9",
				"updated": "20231106112420"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      还有一种是"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "A/P(Active/Passive)机制"
				},
				{
					"Type": "NodeText",
					"Data": "，一般只用在低端双活存储阵列中。现在这种架构已经很少见了。"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "对于特定的LUN来说，在对应存储的路径中只有一个控制器的目标端口处于主动/优化(Active/Optimized)状态，其他控制器的目标端口处于备用或平时不工作状态"
				},
				{
					"Type": "NodeText",
					"Data": "，其负载均衡处理方式与ALUA类似("
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "即根据优选控制器来决定"
				},
				{
					"Type": "NodeText",
					"Data": ")，但是由于多路径和存储互不相识("
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "多路径不知道那些路径是优选路径"
				},
				{
					"Type": "NodeText",
					"Data": ")，IO很难选到合适的路径，IO的下发可以说这完全取决于上层多路径的心情，解决方案是提供自研多路径来配合阵列选路，通过私有协议实现IO到优选路径的匹配"
				}
			]
		},
		{
			"ID": "20231106112429-qvywvpr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112429-qvywvpr",
				"updated": "20231106112429"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ALUA在双活中如何应用"
				}
			]
		},
		{
			"ID": "20231106112429-xzr1cka",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112429-xzr1cka",
				"updated": "20231106112429"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      前面在双活解决方案系列中，不知一次提到基于多路径ALUA实现IO优选路径下发，从而避免IO在主备数据中心来回转发带来的IO时延问题。多路径主要有以下几个功能。"
				}
			]
		},
		{
			"ID": "20231106112429-tlhhyuk",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231106112429-tlhhyuk",
				"updated": "20231106112429"
			},
			"Children": [
				{
					"ID": "20231106112429-yark7ld",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112429-yark7ld",
						"updated": "20231106112429"
					},
					"Children": [
						{
							"ID": "20231106112429-jtagfp7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112429-jtagfp7",
								"updated": "20231106112429"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "1、通过路径管理把SCSI上报的物理路径管理起来，对主机呈现一个虚拟的路径(SCSI设备)，这样可以防止主机在读写设备时带来的数据不一致问题。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112429-mjjs48m",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112429-mjjs48m",
						"updated": "20231106112429"
					},
					"Children": [
						{
							"ID": "20231106112429-h3r25f7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112429-h3r25f7",
								"updated": "20231106112429"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2、基于IO策略选择物理路径，实现IO业务负载均衡和业务分担。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112429-wtfermb",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112429-wtfermb",
						"updated": "20231106112429"
					},
					"Children": [
						{
							"ID": "20231106112429-it1rz6o",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112429-it1rz6o",
								"updated": "20231106112429"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "3、当主路径发生故障时，可以对IO进行透明的主从切换(FailOver)，当路径恢复后自动进行回切(FailBack)。"
								}
							]
						},
						{
							"ID": "20231106112429-tnxfsfr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112429-tnxfsfr",
								"updated": "20231106112429"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "这些特性主要是针对一个Volume或LUN而言的，那么在一套存储系统中，如何识别多个路径上报的设备是同一个LUN呢？答案其实很简单，只需要LUN在上报时采用同样的"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "WWN或LUN ID"
								},
								{
									"Type": "NodeText",
									"Data": "多路径就会认为这些不同路径上报的LUN是同一个设备。"
								}
							]
						},
						{
							"ID": "20231106112429-y0h9xyc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112429-y0h9xyc",
								"updated": "20231106112429"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在双活的两个存储系统中，通过在阵列侧把不同阵列LUN(双活Pair)的WWN或LUN ID设置成一样，配合可靠的冗余交叉组网上报设备时，在主机上就会把两个存储系统的LUN识别为是同一个LUN，在主机IO下发时，如果多路径支持ALUA模式 ，那就可以把本地存储路径设置成"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active/optimized"
								},
								{
									"Type": "NodeText",
									"Data": "，把对端存储路径设置成"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong strong",
									"TextMarkTextContent": "Active/unoptimized"
								},
								{
									"Type": "NodeText",
									"Data": "来实现IO和性能优化。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231106112452-j0bau6r",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112452-j0bau6r",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ALUA的路径状态和相关概念"
				}
			]
		},
		{
			"ID": "20231106112452-9dn8jeq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112452-9dn8jeq",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "Active/ optimized、Active/ unoptimized、Standby和Unavailable"
				},
				{
					"Type": "NodeText",
					"Data": "是目标端口的四种访问状态，在相应访问状态下，阵列控制器只能回应相应的命令标准("
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "命令标准由ISO/IEC SPC-3制定"
				},
				{
					"Type": "NodeText",
					"Data": ")，这就决定了在某一时刻是否可以通过某个目标端口访问逻辑单元。"
				}
			]
		},
		{
			"ID": "20231106112452-5gzuexz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112452-5gzuexz",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      ALUA是一种多路径模式，包括"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "显式ALUA(Explicit ALUA或EALUA)和隐式ALUA(Implicit ALUA或IALUA)两种模式"
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20231106112452-ltcf6ry",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112452-ltcf6ry",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "      隐式ALUA"
				},
				{
					"Type": "NodeText",
					"Data": "支持查询LUN的端口组不对称访问状态；正常情况下，主机查询LUN的端口组信息，识别控制器的优先级，从优先级最高(Active/Optimized)的控制器下发业务，当Active/Optimized链路故障后，主机选择其他的链路下(Active/Unoptimized)发业务。"
				}
			]
		},
		{
			"ID": "20231106112452-1vltmeq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112452-1vltmeq",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "      "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "显式ALUA"
				},
				{
					"Type": "NodeText",
					"Data": "支持查询和设置LUN的端口组不对称访问状态，当Active/Optimized链路断开后，主机设置其他控制器的优先级为最优；主机从新的最优的控制器下发业务("
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "通过LUN TresPass实现优选控制器切换"
				},
				{
					"Type": "NodeText",
					"Data": ")。在阅读本文档前，需要知道以下多路径概念。"
				}
			]
		},
		{
			"ID": "20231106112452-fi4qqvg",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231106112452-fi4qqvg",
				"updated": "20231106112452"
			},
			"Children": [
				{
					"ID": "20231106112452-yk6ubwi",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-yk6ubwi",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-dwy1b1f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-dwy1b1f",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active/Active(A/A): "
								},
								{
									"Type": "NodeText",
									"Data": "所有路径上的IO具有相同的性能；同时也用来表示阵列架构。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112452-drpk2ke",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-drpk2ke",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-rmf88us",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-rmf88us",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active/Active-Asymmetric(A/A-A): "
								},
								{
									"Type": "NodeText",
									"Data": "所有路径都可以响应IO，但路径之间存在性能差异；ALUA就是用来表征这种性能差异的SCSI协议标准，同时也用来表示阵列架构。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112452-di98rw1",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-di98rw1",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-7wsq2u2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-7wsq2u2",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active/Passive(A/P):"
								},
								{
									"Type": "NodeText",
									"Data": "只有主路径可以响应IO，备路上不能响应IO；同时也用来表示阵列架构。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112452-8tsy5d9",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-8tsy5d9",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-ofenplp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-ofenplp",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Path Failover:"
								},
								{
									"Type": "NodeText",
									"Data": " 主机多路径软件将IO路径从主路径切换到备用路径上。基本所有多路径软件都支持该项功能。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112452-j7sehaq",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-j7sehaq",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-5tawhtk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-5tawhtk",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "LUN Failover: "
								},
								{
									"Type": "NodeText",
									"Data": "LUN的工作控制器从归属控制器切换到非归属控制器(LUN Trespass)。支持显式ALUA的多路径软件可以发起LUN Failover。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112452-td3kr04",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112452-td3kr04",
						"updated": "20231106112452"
					},
					"Children": [
						{
							"ID": "20231106112452-lr76cgx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112452-lr76cgx",
								"updated": "20231106112452"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Path Failback: "
								},
								{
									"Type": "NodeText",
									"Data": "主机多路径软件将IO路径从备用路径切换回主路径上。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20231106112405-zt620w2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112405-zt620w2"
			}
		},
		{
			"ID": "20231106112040-bzdwysr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20231106112040-bzdwysr",
				"updated": "20231106112040"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ALUA主要功能和能力"
				}
			]
		},
		{
			"ID": "20231106112040-04wqv0y",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20231106112040-04wqv0y",
				"updated": "20231106112040"
			},
			"Children": [
				{
					"ID": "20231106112040-ebw4aw4",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112040-ebw4aw4",
						"updated": "20231106112040"
					},
					"Children": [
						{
							"ID": "20231106112040-1rjoc1p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112040-1rjoc1p",
								"updated": "20231106112040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "IO路径选择: "
								},
								{
									"Type": "NodeText",
									"Data": "在ALUA模式下，主机只会对A/O路径下发IO，即对LUN工作控制器下发IO。只有当A/O路径不存在时，IALUA的主机多路径会对A/N路径下发IO，阵列将IO重定向到LUN工作控制器。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112040-kxge9ac",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112040-kxge9ac",
						"updated": "20231106112040"
					},
					"Children": [
						{
							"ID": "20231106112040-yso4bku",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112040-yso4bku",
								"updated": "20231106112040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "内部错误处理: "
								},
								{
									"Type": "NodeText",
									"Data": "在某些错误场景下，单个LUN在单边控制器不可访问情况，这些内部错误可以转化为ALUA端口组状态，隐藏内部错误的差异，通过统一共用的接口暴露给主机。这样做的好处在于，可确保错误不扩散，提高多路径可靠性。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112040-lx2k2ak",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112040-lx2k2ak",
						"updated": "20231106112040"
					},
					"Children": [
						{
							"ID": "20231106112040-5k429jv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112040-5k429jv",
								"updated": "20231106112040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "路径故障和恢复: "
								},
								{
									"Type": "NodeText",
									"Data": "路径故障包括光纤、HBA卡、交换机等故障，如果故障发生在LUN 的A/O路径上，且没有可用A/O路径时， IALUA会通过A/N路径下发IO，EALUA则将A/N路径切换为A/O路径。如果故障发生在A/N路径上，IO行为不受影响。\n故障路径恢复后，对于EALAU方式的连接，需要在CLI模式下确认受影响的LUN的工作控制器和归属控制器是否一致，如果不一致，需要手工将工作控制器切换到归属控制器侧，以确保LUN的负载均衡。"
								}
							]
						}
					]
				},
				{
					"ID": "20231106112040-0vzn8jh",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20231106112040-0vzn8jh",
						"updated": "20231106112040"
					},
					"Children": [
						{
							"ID": "20231106112040-v6ciilq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112040-v6ciilq",
								"updated": "20231106112040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "控制器故障和恢复: "
								},
								{
									"Type": "NodeText",
									"Data": "如果控制器发生故障时，阵列内部系统流程会自动将故障端LUN的工作控制器Failover到对端，同时会通过UA状态知会主机路径状态变化。控制器故障恢复后，阵列内部系统流程会自动将受影响的LUN进行Failback。"
								}
							]
						},
						{
							"ID": "20231106112040-zzsyc2j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20231106112040-zzsyc2j",
								"updated": "20231106112040"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": " 简单总结:"
								},
								{
									"Type": "NodeText",
									"Data": " 阵列没有开启或实现ALUA之前，第三方多路径无法知道阵列中LUN的工作控制器在哪边，往往采用随机的方式下发IO，这就造成部分IO需要向归属控制器转发，影响IO性能("
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "第三方多路径可以选择支持和不支持ALUA"
								},
								{
									"Type": "NodeText",
									"Data": ")。支持或实现ALUA后，通过"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active/Optimized"
								},
								{
									"Type": "NodeText",
									"Data": "状态标识LUN工作控制器，通过对"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Active /Optimized"
								},
								{
									"Type": "NodeText",
									"Data": "路径下发IO，这样就可以提升IO性能。"
								}
							]
						}
					]
				}
			]
		}
	]
}