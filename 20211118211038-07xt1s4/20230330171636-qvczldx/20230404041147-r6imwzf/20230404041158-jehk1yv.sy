{
	"ID": "20230404041158-jehk1yv",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20230404041158-jehk1yv",
		"title": "002-Ceph运维",
		"updated": "20230411154248"
	},
	"Children": [
		{
			"ID": "20230404041158-597h15u",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230404041158-597h15u",
				"updated": "20230411022200"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控集群"
				}
			]
		},
		{
			"ID": "20230411022205-uyxagdk",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022205-uyxagdk",
				"updated": "20230411022211"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.1 UPSTART"
				}
			]
		},
		{
			"ID": "20230411022213-dsn46nb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022213-dsn46nb",
				"updated": "20230411022214"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Ubuntu系统下，基于ceph-deploy部署集群后，可以用这种方法来操控集群。"
				}
			]
		},
		{
			"ID": "20230411022219-tsqol2l",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022219-tsqol2l",
				"updated": "20230411022219"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "列出节点上所有Ceph进程："
				}
			]
		},
		{
			"ID": "20230411022220-iejhi15",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022220-iejhi15",
				"updated": "20230411022227"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "initctl list | grep ceph\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022231-rqxi2ff",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022231-rqxi2ff",
				"updated": "20230411022232"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "启动节点上所有Ceph进程："
				}
			]
		},
		{
			"ID": "20230411022233-s0b9yce",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022233-s0b9yce",
				"updated": "20230411022240"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "start ceph-all\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022242-akovlsf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022242-akovlsf",
				"updated": "20230411022243"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "启动节点上特定类型的Ceph进程："
				}
			]
		},
		{
			"ID": "20230411022244-ui82lo4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022244-ui82lo4",
				"updated": "20230411022252"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sudo start ceph-osd-all\nsudo start ceph-mon-all\nsudo start ceph-mds-all\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022305-irapqsc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022305-irapqsc",
				"updated": "20230411022310"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "停止特定类型的Ceph进程的某个实例："
				}
			]
		},
		{
			"ID": "20230411022258-q0oyop7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022258-q0oyop7",
				"updated": "20230411022316"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sudo start ceph-osd id={id}\nsudo start ceph-mon id={hostname}\nsudo start ceph-mds id={hostname}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022322-o6fdpgb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022322-o6fdpgb",
				"updated": "20230411022327"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "停止特定类型的Ceph进程的某个实例："
				}
			]
		},
		{
			"ID": "20230411022323-4t4beld",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022323-4t4beld",
				"updated": "20230411022331"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sudo stop ceph-osd id={id}\nsudo stop ceph-mon id={hostname}\nsudo stop ceph-mds id={hostname}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022335-qhk8c5n",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022335-qhk8c5n",
				"updated": "20230411022358"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1.2 SYSVINIT"
				}
			]
		},
		{
			"ID": "20230411022356-kc0746i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022356-kc0746i",
				"updated": "20230411022402"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在 CentOS 、 Redhat 、 Fedora 和 SLES 发行版上可以通过传统的 sysvinit 运行 Ceph ， Debian/Ubuntu 的较老的版本也可以用此方法。"
				}
			]
		},
		{
			"ID": "20230411022409-hxrq8nr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022409-hxrq8nr",
				"updated": "20230411022410"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "命令格式："
				}
			]
		},
		{
			"ID": "20230411022413-7frhgjb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022413-7frhgjb",
				"updated": "20230411022415"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 启动、重启或停止\nsudo /etc/init.d/ceph [options] [start|restart|stop] [daemonType|daemonID]\n \n# 示例：\n \n# -a 表示在所有节点执行\nsudo /etc/init.d/ceph -a start\nsudo /etc/init.d/ceph -a stop\nsudo /etc/init.d/ceph start osd\nsudo /etc/init.d/ceph -a stop osd\nsudo /etc/init.d/ceph start osd.0\nsudo /etc/init.d/ceph stop osd.0 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022422-p0xavto",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411022422-p0xavto",
				"updated": "20230411022432"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "监控集群"
				}
			]
		},
		{
			"ID": "20230411022433-2apeszt",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022433-2apeszt",
				"updated": "20230411022439"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "检查集群状态"
				}
			]
		},
		{
			"ID": "20230411022442-atcsp2x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022442-atcsp2x",
				"updated": "20230411022443"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "status"
				},
				{
					"Type": "NodeText",
					"Data": "或则 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "-"
				},
				{
					"Type": "NodeText",
					"Data": "s可以查看集群的状态："
				}
			]
		},
		{
			"ID": "20230411022452-l1j5tw4",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411022452-l1j5tw4",
				"updated": "20230411022611"
			},
			"Children": [
				{
					"ID": "20230411022452-8qw6mkx",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411022452-8qw6mkx"
					},
					"Children": [
						{
							"ID": "20230411022452-0r0jp6n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411022452-0r0jp6n"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "active+clean：说明集群健康运行"
								}
							]
						}
					]
				},
				{
					"ID": "20230411022452-sonypub",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411022452-sonypub"
					},
					"Children": [
						{
							"ID": "20230411022452-p5nzspq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411022452-p5nzspq"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "undersized+degraded：如果有OSD节点宕机，可能进入此状态。降级后还是可以正常读写数据"
								}
							]
						}
					]
				},
				{
					"ID": "20230411022452-92769t8",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411022452-92769t8"
					},
					"Children": [
						{
							"ID": "20230411022452-xxklrh2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411022452-xxklrh2",
								"updated": "20230411022606"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "undersized+degraded+peered：如果超过min size要求的OSD宕机，则不可读写，显示为此状态。min size默认2，副本份数默认3。执行下面的命令可以修改min size： "
								}
							]
						},
						{
							"ID": "20230411022510-hwmfmcn",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411022510-hwmfmcn",
								"updated": "20230411022524"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "ceph osd pool set rbd min_size 1\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						},
						{
							"ID": "20230411022520-7fx677f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411022520-7fx677f",
								"updated": "20230411022607"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "peered相当于已经配对（PG - OSDs），但是正在等待OSD上线"
								}
							]
						}
					]
				},
				{
					"ID": "20230411022611-63tgoqg",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20230411022611-63tgoqg",
						"updated": "20230411022611"
					},
					"Children": [
						{
							"ID": "20230411022618-v12a1yz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411022618-v12a1yz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "remapped+backfilling：默认情况下，OSD宕机5分钟后会被标记为out状态，Ceph认为它已经不属于集群了。Ceph会按照一定的规则，将已经out的OSD上的PG重映射到其它OSD，并且从现存的副本来回填（Backfilling）数据到新OSD"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411022627-qe6kfra",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022627-qe6kfra",
				"updated": "20230411022633"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "health"
				},
				{
					"Type": "NodeText",
					"Data": "可以查看简短的健康状态。"
				}
			]
		},
		{
			"ID": "20230411022638-zlyxnxc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022638-zlyxnxc",
				"updated": "20230411022638"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "-"
				},
				{
					"Type": "NodeText",
					"Data": "w可以持续的监控发生在集群中的各种事件。"
				}
			]
		},
		{
			"ID": "20230411022643-s0v5av5",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022643-s0v5av5",
				"updated": "20230411022659"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.2  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "检查存储用量"
				}
			]
		},
		{
			"ID": "20230411022702-s5okt2g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022702-s5okt2g",
				"updated": "20230411022702"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行命令 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "df"
				},
				{
					"Type": "NodeText",
					"Data": "可以查看集群的数据用量及其在存储池内的分布情况："
				}
			]
		},
		{
			"ID": "20230411022708-0u392g4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022708-0u392g4",
				"updated": "20230411022711"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "GLOBAL:\n                       # 已用存储空间总量（包括所有副本）\n    SIZE     AVAIL     RAW USED     %RAW USED \n    323G      318G        4966M          1.50 \n \n# 这一段显示的数值，不包含副本、克隆、快照的用量\nPOOLS:\n                             # 大概使用率              # 大概对象数\n    NAME     ID     USED      %USED     MAX AVAIL     OBJECTS \n    rbd      1      3539M      1.14          300G        1018 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022718-nvppg4c",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022718-nvppg4c",
				"updated": "20230411022750"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "检查MON状态"
				}
			]
		},
		{
			"ID": "20230411022754-94hdjt4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022754-94hdjt4",
				"updated": "20230411022757"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 基本信息\nceph mon stat\n# 详细信息\nceph mon dump\n# 法定人数状态、monmap内容\nceph quorum_status -f json-pretty\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022731-3mw9pw6",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022731-3mw9pw6",
				"updated": "20230411022749"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.4 检查MDS状态"
				}
			]
		},
		{
			"ID": "20230411022759-u7kdfwm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022759-u7kdfwm",
				"updated": "20230411022805"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds stat\nceph mds dump\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022806-yyojijl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022806-yyojijl",
				"updated": "20230411022820"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "检查OSD状态"
				}
			]
		},
		{
			"ID": "20230411022825-eqsaasq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022825-eqsaasq",
				"updated": "20230411022825"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "通过PG这个中间层，Ceph确保了数据不会被绑死在某个特定的OSD。要追踪错误根源，你需要检查归置组、以及底层的OSD。"
				}
			]
		},
		{
			"ID": "20230411022825-ru8v7s5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022825-ru8v7s5",
				"updated": "20230411022825"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行下面的命令，获取最简短的OSD状态："
				}
			]
		},
		{
			"ID": "20230411022833-kgio2wr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022833-kgio2wr",
				"updated": "20230411022841"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd stat\n# 输出\n12 osds: 12 up, 12 in \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022845-s0rtmij",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022845-s0rtmij",
				"updated": "20230411022846"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "osd"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "dump"
				},
				{
					"Type": "NodeText",
					"Data": "则可以获得详细信息，包括在CRUSH map中的权重、UUID、是in还是out："
				}
			]
		},
		{
			"ID": "20230411022910-53dfiog",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022910-53dfiog",
				"updated": "20230411022911"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "osd.0 up   out weight 0 up_from 70 up_thru 172 down_at 65 last_clean_interval [51,60) 10.5.39.13:6800/48 10.5.39.13:6801/48 10.5.39.13:6802/48 10.5.39.13:6803/48 exists,up 354a6547-3437-46d6-a928-f5633eb7f059\nosd.1 up   in  weight 1 up_from 74 up_thru 327 down_at 63 last_clean_interval [55,60) 10.5.39.42:6800/48 10.5.39.42:6801/48 10.5.39.42:6802/48 10.5.39.42:6803/48 exists,up 0fb4bb77-7c84-45ac-919a-2cc350fc62b9\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022922-wbjvgre",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411022922-wbjvgre",
				"updated": "20230411022923"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "osd"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "tree"
				},
				{
					"Type": "NodeText",
					"Data": "可以在OSD树中打印各OSD的位置、状态、权重。如果OSD的in数量大于up数量，可以通过此命令快速定位："
				}
			]
		},
		{
			"ID": "20230411022916-vdp1lzs",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411022916-vdp1lzs",
				"updated": "20230411022932"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 仅仅包含out的OSD\nceph osd tree out\n# ID CLASS WEIGHT  TYPE NAME               STATUS REWEIGHT PRI-AFF \n# -1       4.89999 root default                                \n# -2             0     host k8s-10-5-38-25                     \n#  2   hdd       0         osd.2              DNE        0 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411022943-jmu3isd",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411022943-jmu3isd",
				"updated": "20230411023003"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2.6 检查PG状态"
				}
			]
		},
		{
			"ID": "20230411023009-recu1b2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023009-recu1b2",
				"updated": "20230411023011"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行命令 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "pg"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "stat"
				},
				{
					"Type": "NodeText",
					"Data": "可以查看全局性的PG统计信息。"
				}
			]
		},
		{
			"ID": "20230411023025-lveqf0p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023025-lveqf0p",
				"updated": "20230411023025"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以获取PG列表："
				}
			]
		},
		{
			"ID": "20230411023012-i97prxy",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023012-i97prxy",
				"updated": "20230411023019"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 输出的第一列为PG ID\nceph pg dump\n# 导出为JSON\nceph pg dump -o {filename} --format=json\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023029-sfvc2nb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023029-sfvc2nb",
				"updated": "20230411023029"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行下面的命令可以查看PG到OSD的映射关系："
				}
			]
		},
		{
			"ID": "20230411023033-1er3ww4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023033-1er3ww4",
				"updated": "20230411023043"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# PG ID 格式为 存储池号.归置组ID，归置组ID为一个十六进制数字\nceph pg map 1.13d\n# 输出\nosdmap e790 pg 1.13d (1.13d) -\u003e up [4,6,5] acting [4,6,5]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023056-smmpad7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023056-smmpad7",
				"updated": "20230411023056"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "status"
				},
				{
					"Type": "NodeText",
					"Data": "也可以看到PG的统计性信息。"
				}
			]
		},
		{
			"ID": "20230411023056-z7w0dg9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023056-z7w0dg9",
				"updated": "20230411023056"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "pg"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "1.13d"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "query"
				},
				{
					"Type": "NodeText",
					"Data": "可以查看某个PG的非常细节的信息。"
				}
			]
		},
		{
			"ID": "20230411023105-i80cwg5",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411023105-i80cwg5",
				"updated": "20230411023120"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控MON"
				}
			]
		},
		{
			"ID": "20230411023123-1ah0uls",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023123-1ah0uls",
				"updated": "20230411023140"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.1 增加"
				}
			]
		},
		{
			"ID": "20230411023140-3hi4c3f",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023140-3hi4c3f",
				"updated": "20230411023150"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "MONID=Neon\nMONADDR=10.0.3.1:6789\n \n# 创建目录\nmkdir /var/lib/ceph/mon/ceph-$MONID\n \n# 获取密钥和monmap\nceph auth get mon. -o /tmp/keyring\nceph mon getmap -o /tmp/monmap\n \n# 初始化Mon\nsudo ceph-mon -i $MONID --mkfs --monmap /tmp/monmap --keyring /tmp/keyring\n \n# 启动Mon\nceph-mon -i $MONID --public-addr $MONADDR\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023134-esrvkft",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023134-esrvkft",
				"updated": "20230411023206"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.2 删除"
				}
			]
		},
		{
			"ID": "20230411023207-hptp6z3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023207-hptp6z3",
				"updated": "20230411023214"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mon rm Xenon \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023215-xtnrbp4",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023215-xtnrbp4",
				"updated": "20230411023224"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3.3 monmap"
				}
			]
		},
		{
			"ID": "20230411023226-on03l88",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023226-on03l88",
				"updated": "20230411023226"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "导出monmap："
				}
			]
		},
		{
			"ID": "20230411023230-1xmxuxr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023230-1xmxuxr",
				"updated": "20230411023249"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mon getmap -o monmap\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023251-hrk39as",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023251-hrk39as",
				"updated": "20230411023254"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "打印monmap的内容："
				}
			]
		},
		{
			"ID": "20230411023257-r0h6i9u",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023257-r0h6i9u",
				"updated": "20230411023300"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "monmaptool --print monmap\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023303-tti1zze",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023303-tti1zze",
				"updated": "20230411023304"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从monmap中删除一个MON："
				}
			]
		},
		{
			"ID": "20230411023307-srnwy63",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023307-srnwy63",
				"updated": "20230411023310"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "monmaptool  monmap --rm xenon\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023313-1vv9vcv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023313-1vv9vcv",
				"updated": "20230411023314"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "添加一个MON到monmap中："
				}
			]
		},
		{
			"ID": "20230411023316-n4d3n81",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023316-n4d3n81",
				"updated": "20230411023319"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "monmaptool  monmap --add Xenon 10.0.5.1:6789\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023322-3jxa4zp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023322-3jxa4zp",
				"updated": "20230411023323"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "导入monmap到MON节点："
				}
			]
		},
		{
			"ID": "20230411023326-ckb8v7r",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023326-ckb8v7r",
				"updated": "20230411023329"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph-mon -i Xenon --inject-monmap monmap \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023423-38cuw7u",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411023423-38cuw7u",
				"updated": "20230411023436"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控OSD"
				}
			]
		},
		{
			"ID": "20230411023437-9ba37eu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023437-9ba37eu",
				"updated": "20230411023450"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.1 增加"
				}
			]
		},
		{
			"ID": "20230411023450-nb8t146",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023450-nb8t146",
				"updated": "20230411023501"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 空间使用率达到 near full 比率后， OSD 失败可能导致集群空间占满。因此，你需要提前扩容\n# 执行下面的命令创建一个新的OSD，其OSD号会输出到控制台：\n \n# uuid、id可选，如果不指定则自动生成。不能和现有OSD的uuid、id重复。不建议手工指定id\nceph osd create [{uuid} [{id}]]\n \n \n# 如果希望OSD使用独立磁盘或者分区，可以先创建好文件系统，再挂载到适当位置\nsudo mkfs -t {fstype} /dev/{drive}\n# 示例\nmkfs -t xfs -f /dev/sda3\n# 挂载点\nmkdir /var/lib/ceph/osd/ceph-{osd-num}\n# 挂载\nmount /dev/sda3 /var/lib/ceph/osd/ceph-14\n \n# 初始化OSD数据目录：\nceph-osd -i {osd-num} --mkfs --mkkey\n \n# 注册OSD认证密钥：\nceph auth add osd.{osd-num} osd 'allow *' mon 'allow rwx' -i /var/lib/ceph/osd/${cluster-name}-{osd-num}/keyring\n# 示例\nceph auth add osd.14 osd 'allow *' mon 'allow rwx' -i /var/lib/ceph/osd/ceph-14/keyring\n \n# 你需要把OSD加入到CRUSH map，这样数据才会分配到此OSD上： \n# 把OSD加入到CRUSH树的适当位置（桶）\n# 如果指定了不止一个桶，则将OSD加入到最靠近叶子节点的桶中，并把此桶移动到你指定的其它桶中\n# 如果你指定了root桶，则此OSD直接挂在root下，则是不建议的，CRUSH规则期望OSD位于主机这种桶类型的下级节点\nceph osd crush add {id-or-name} {weight}  [{bucket-type}={bucket-name} ...]\n# 示例\nceph osd crush add 14 0.11589\n# 如果设置osd_crush_update_on_start=true，则可以OSD启动后自动加入到CRUSH树并更新权重\n# 警告，如果上述参数设置为false，且你没有将osd添加到适当位置，则osd可能无法承载PG\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023522-rg5pf63",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023522-rg5pf63",
				"updated": "20230411023529"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.2 查询"
				}
			]
		},
		{
			"ID": "20230411023530-x3ousg6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023530-x3ousg6",
				"updated": "20230411023542"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd find 14\n{\n    \"osd\": 14,\n    \"ip\": \"10.0.1.1:6804/3146\",\n    \"crush_location\": {\n        \"host\": \"Carbon\",\n        \"root\": \"default\"\n    }\n} \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023551-3nk17n4",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023551-3nk17n4",
				"updated": "20230411023557"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.3 启动"
				}
			]
		},
		{
			"ID": "20230411023615-ajz2ua5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023615-ajz2ua5",
				"updated": "20230411023615"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一旦启动了 OSD ，其状态就变成了 up+in ，此时可以通过ceph -w来观察数据迁移。归置组状态会变为active, some degraded objects，最终变回active+clean"
				}
			]
		},
		{
			"ID": "20230411023557-ulxngmd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023557-ulxngmd",
				"updated": "20230411023605"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# Debian/Ubuntu 上用 Upstart：\nstart ceph-osd id={osd-num}\n# CentOS/RHEL 上用 sysvinit：\n/etc/init.d/ceph start osd.{osd-num}\n# 基于systemd的系统\nsystemctl start ceph-osd@14.service \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023609-gv8skdw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023609-gv8skdw",
				"updated": "20230411023626"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.4 删除"
				}
			]
		},
		{
			"ID": "20230411023630-uveyyca",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023630-uveyyca",
				"updated": "20230411023630"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "删除OSD之前，应该评估集群容量，保证操作之后，集群不会到达 near full 比率"
				}
			]
		},
		{
			"ID": "20230411023634-tblfqat",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023634-tblfqat",
				"updated": "20230411023642"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 首先从CRUSH map中移除\nceph osd crush remove {name}\n# 删除其认证密钥\nceph auth del osd.{osd-num}\n# 删除OSD\nceph osd rm {osd-num}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023647-oz4jfj2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023647-oz4jfj2",
				"updated": "20230411023654"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "标记为宕机"
				}
			]
		},
		{
			"ID": "20230411023659-9a6pf81",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023659-9a6pf81",
				"updated": "20230411023701"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd down {osd-num}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023704-539yh3y",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023704-539yh3y",
				"updated": "20230411023711"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.6 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "标记为踢出"
				}
			]
		},
		{
			"ID": "20230411023710-fn94d5u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023710-fn94d5u",
				"updated": "20230411023715"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "踢出OSD后，Ceph会进行数据迁移，达到再平衡。归置组状态会变为active, some degraded objects，最终变回active+clean。"
				}
			]
		},
		{
			"ID": "20230411023720-a8f7z0p",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023720-a8f7z0p",
				"updated": "20230411023722"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd out {osd-num}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023727-4ddbc2x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023727-4ddbc2x",
				"updated": "20230411023728"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "对于某些小型测试集群，踢出一个OSD即导致CRUSH进入临界状态，某些归置组一直卡在active+remapped状态。如果遇到这种情况，你可以："
				}
			]
		},
		{
			"ID": "20230411023736-pktxhvl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023736-pktxhvl",
				"updated": "20230411023738"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 把被踢出的集群重新加进来\nceph osd in {osd-num}\n# 将其权重标记为0，而非踢出\nceph osd crush reweight osd.{osd-num} 0 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023810-vvzv434",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023810-vvzv434",
				"updated": "20230411023811"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "等待数据迁移完毕后，再将OSD踢出。"
				}
			]
		},
		{
			"ID": "20230411023812-u320f74",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023812-u320f74",
				"updated": "20230411023819"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.7 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "标记为进入"
				}
			]
		},
		{
			"ID": "20230411023822-wp5cdox",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023822-wp5cdox",
				"updated": "20230411023822"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可能需要更新CRUSH map才能让新进入的OSD接受数据："
				}
			]
		},
		{
			"ID": "20230411023825-qh3aaau",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023825-qh3aaau",
				"updated": "20230411023830"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd in {osd-num}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023836-6ty9y9x",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023836-6ty9y9x",
				"updated": "20230411023846"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.8 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "标记为丢失"
				}
			]
		},
		{
			"ID": "20230411023847-2o1nlj4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411023847-2o1nlj4",
				"updated": "20230411023901"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "标记OSD为lost，可能导致数据丢失，谨慎："
				}
			]
		},
		{
			"ID": "20230411023850-iyk1xuf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023850-iyk1xuf",
				"updated": "20230411023856"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd lost {id} [--yes-i-really-mean-it]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023904-cqoclx8",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023904-cqoclx8",
				"updated": "20230411023911"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.9 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "设置权重"
				}
			]
		},
		{
			"ID": "20230411023917-aes9u5n",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023917-aes9u5n",
				"updated": "20230411023927"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 权重默认是以TB为单位\nceph osd reweight {osd-num} {weight} \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023929-mxtxc4r",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023929-mxtxc4r",
				"updated": "20230411023937"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.10 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "清理OSD"
				}
			]
		},
		{
			"ID": "20230411023940-tupxe8h",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411023940-tupxe8h",
				"updated": "20230411023942"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd scrub {osd-num}\n# 清理所有\nceph osd scrub all\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023944-r9vb2cj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023944-r9vb2cj",
				"updated": "20230411024004"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.11 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "深度清理OSD"
				}
			]
		},
		{
			"ID": "20230411024020-cwc4521",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024020-cwc4521",
				"updated": "20230411024022"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd deep-scrub all \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023948-k5hlj40",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023948-k5hlj40",
				"updated": "20230411024009"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.12 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修复OSD"
				}
			]
		},
		{
			"ID": "20230411024024-9vk9lsp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024024-9vk9lsp",
				"updated": "20230411024030"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd repair N\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411023951-wucn1mc",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411023951-wucn1mc",
				"updated": "20230411024014"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.13 测试OSD性能"
				}
			]
		},
		{
			"ID": "20230411024033-xlhgpp6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024033-xlhgpp6",
				"updated": "20230411024037"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph tell osd.N bench [TOTAL_DATA_BYTES] [BYTES_PER_WRITE]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024049-k735tt7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024049-k735tt7",
				"updated": "20230411024057"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4.14  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "空间不足处理"
				}
			]
		},
		{
			"ID": "20230411024103-u8bcdv6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024103-u8bcdv6",
				"updated": "20230411024103"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Ceph不允许向满的 OSD 写入数据，以免丢失数据。在运营着的集群中，你应该能收到集群空间将满的警告。mon osd full ratio 默认为 0.95 ，也就是说达到 95% 时它将阻止客户端写入数据； mon osd backfillfull ratio 默认为 0.90 ，也就是说达到容量的 90% 时它会阻塞，防止回填启动； OSD 将满比率默认为 0.85 ，也就是说达到容量的 85% 时它会产生健康警告。"
				}
			]
		},
		{
			"ID": "20230411024103-fsjnbph",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024103-fsjnbph",
				"updated": "20230411024103"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "使用下面的命令临时修改设置，否则你可能没有机会清理不需要的RBD以腾出空间："
				}
			]
		},
		{
			"ID": "20230411024113-ovp7gvy",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024113-ovp7gvy",
				"updated": "20230411024120"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd set-nearfull-ratio 0.95\nceph osd set-full-ratio 0.99\nceph osd set-backfillfull-ratio 0.99\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024135-x7lj62z",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411024135-x7lj62z",
				"updated": "20230411024154"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5. 操控MDS"
				}
			]
		},
		{
			"ID": "20230411024154-kw7rf0c",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024154-kw7rf0c",
				"updated": "20230411024200"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.1 增加"
				}
			]
		},
		{
			"ID": "20230411024245-8s04wi0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024245-8s04wi0",
				"updated": "20230411024245"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "首先，在/var/lib/ceph/mds/mds.N创建一个数据挂载点。N是MDS的ID，通常就是主机名。"
				}
			]
		},
		{
			"ID": "20230411024245-zgdoh03",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024245-zgdoh03",
				"updated": "20230411024245"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，修改Ceph配置，添加一个mds段。修改完毕后进行配置分发："
				}
			]
		},
		{
			"ID": "20230411024240-xdvepi7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024240-xdvepi7",
				"updated": "20230411024257"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[mds.N]\nhost = {hostname}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024302-ry9ulot",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024302-ry9ulot",
				"updated": "20230411024303"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": " 如果启用了CephX，需要创建认证密钥："
				}
			]
		},
		{
			"ID": "20230411024306-tlggqko",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024306-tlggqko",
				"updated": "20230411024318"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sudo ceph auth get-or-create mds.N mon 'profile mds' mgr 'profile mds' mds 'allow *' osd 'allow *' \u003e \\\n    /var/lib/ceph/mds/ceph-N/keyring\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024200-0n0j4ii",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024200-0n0j4ii",
				"updated": "20230411024212"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.2 移除"
				}
			]
		},
		{
			"ID": "20230411024327-bnqaqxx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024327-bnqaqxx",
				"updated": "20230411024331"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行下面的命令将目标mds标记为宕机："
				}
			]
		},
		{
			"ID": "20230411024332-swg5spz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024332-swg5spz",
				"updated": "20230411024338"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds fail \u003cmds name\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024321-6wrfm2g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024321-6wrfm2g",
				"updated": "20230411024342"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "移除MDS的/var/lib/ceph/mds/ceph-NAME下对应目录，然后，删除/etc/systemd/system/ceph-mds.target.wants/下的对应项目："
				}
			]
		},
		{
			"ID": "20230411024346-gfadr7b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024346-gfadr7b",
				"updated": "20230411024356"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "systemctl stop ceph-mds@Neon.service\nsystemctl disable ceph-mds@Neon.service\nrm -rf /var/lib/ceph/mds/ceph-Neon \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024352-80rnmis",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024352-80rnmis",
				"updated": "20230411024402"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果服务是通过/etc/init.d/ceph加载的，则："
				}
			]
		},
		{
			"ID": "20230411024408-rk6z6wj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024408-rk6z6wj",
				"updated": "20230411024409"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "service ceph stop\nupdate-rc.d ceph disable\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024411-kv661xj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024411-kv661xj",
				"updated": "20230411024422"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.3 状态"
				}
			]
		},
		{
			"ID": "20230411024440-jcc17og",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024440-jcc17og",
				"updated": "20230411024441"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "查看守护进程的简短状态："
				}
			]
		},
		{
			"ID": "20230411024442-petmd0a",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024442-petmd0a",
				"updated": "20230411024448"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds stat\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024423-f54z8fc",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024423-f54z8fc",
				"updated": "20230411024435"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.4 启动"
				}
			]
		},
		{
			"ID": "20230411024436-bau9lfe",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024436-bau9lfe",
				"updated": "20230411024455"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "service ceph start mds.NAME\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024459-7ioj8j3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024459-7ioj8j3",
				"updated": "20230411024511"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.5  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "引用守护进程"
				}
			]
		},
		{
			"ID": "20230411024514-zcvh6qe",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024514-zcvh6qe",
				"updated": "20230411024515"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可以使用多种方式来引用一个MDS守护进程："
				}
			]
		},
		{
			"ID": "20230411024524-u5t4yek",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024524-u5t4yek",
				"updated": "20230411024525"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds fail 5446     # 基于GID\nceph mds fail myhost   # 基于名称\nceph mds fail 3:0      # 基于FSCID:rank\nceph mds fail myfs:0   # 基于文件系统名称:rank\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024528-jscxt9p",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024528-jscxt9p",
				"updated": "20230411024532"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.6 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理故障转移"
				}
			]
		},
		{
			"ID": "20230411024536-t8no2oc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024536-t8no2oc",
				"updated": "20230411024536"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "和MDS进程的Standby行为相关的配置项包括："
				}
			]
		},
		{
			"ID": "20230411024541-cfe2c7p",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024541-cfe2c7p",
				"updated": "20230411024543"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 如果设置为true则standby会持续的从Rank中读取元数据日志，从而维持一个有效的元数据缓存，这可以加速Failover\nmds_standby_replay = true\n# 仅仅作为具有指定名称的MDS的Standby\nmds_standby_for_name = Carbon\n# 仅仅作为指定Rank的Standby\nmds_standby_for_rank\n# 仅仅作为指定文件系统的Standby\nmds_standby_for_fscid\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024552-6tc4tc4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024552-6tc4tc4",
				"updated": "20230411024552"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果不进行任何配置，没有持有Rank的那些MDS进程，可以作为任何Rank的Standby。"
				}
			]
		},
		{
			"ID": "20230411024552-mkv8d8q",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024552-mkv8d8q",
				"updated": "20230411024552"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "配置示例："
				}
			]
		},
		{
			"ID": "20230411024557-owpcwjz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024557-owpcwjz",
				"updated": "20230411024602"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# a、b两个MDS互备，负责Rank 0\n[mds.a]\nmds standby replay = true\nmds standby for rank = 0\n \n[mds.b]\nmds standby replay = true\nmds standby for rank = 0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024612-lgffl2y",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024612-lgffl2y",
				"updated": "20230411024621"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.7 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修改配置"
				}
			]
		},
		{
			"ID": "20230411024629-wrt7d40",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024629-wrt7d40",
				"updated": "20230411024634"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph tell mds.{mds-id} config set {setting} {value}\n# 示例\nceph tell mds.0 config set debug_ms 1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024623-e5wf6xz",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024623-e5wf6xz",
				"updated": "20230411024638"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.8 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "启用诊断信息"
				}
			]
		},
		{
			"ID": "20230411024638-loqr5we",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024638-loqr5we",
				"updated": "20230411024644"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds stat\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024620-9e01zok",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024620-9e01zok",
				"updated": "20230411024652"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5.9 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "手工故障转移"
				}
			]
		},
		{
			"ID": "20230411024654-3vdcvyl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024654-3vdcvyl",
				"updated": "20230411024657"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "标记当前活动MDS为失败，触发故障转移："
				}
			]
		},
		{
			"ID": "20230411024658-9dn6ksf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024658-9dn6ksf",
				"updated": "20230411024703"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mds fail 0 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024713-mkrf6q2",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411024713-mkrf6q2",
				"updated": "20230411024718"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控CephFS"
				}
			]
		},
		{
			"ID": "20230411024719-huzxmz0",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024719-huzxmz0",
				"updated": "20230411024726"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.1 创建"
				}
			]
		},
		{
			"ID": "20230411024733-v4e3str",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024733-v4e3str",
				"updated": "20230411024733"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要创建一个文件系统，你至少需要两个存储池，一个存放数据，另外一个存放元数据。注意："
				}
			]
		},
		{
			"ID": "20230411024733-sa78r3b",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411024733-sa78r3b",
				"updated": "20230411024733"
			},
			"Children": [
				{
					"ID": "20230411024733-z3rvj9n",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411024733-z3rvj9n"
					},
					"Children": [
						{
							"ID": "20230411024733-9kv6bze",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411024733-9kv6bze"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "元数据池的副本份数要设置的高，因为任何元数据的丢失都会导致整个文件系统不可用"
								}
							]
						}
					]
				},
				{
					"ID": "20230411024733-bdamum8",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411024733-bdamum8"
					},
					"Children": [
						{
							"ID": "20230411024733-5j7ye5c",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411024733-5j7ye5c"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "元数据池应该使用高速存储，例如SSD，因为这对客户端操作的延迟有直接影响"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411024745-b1o2o7t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024745-b1o2o7t",
				"updated": "20230411024745"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "示例："
				}
			]
		},
		{
			"ID": "20230411024749-5vq19j1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024749-5vq19j1",
				"updated": "20230411024756"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# ceph fs new \u003cfs_name\u003e \u003cmetadata\u003e \u003cdata\u003e\n# 示例，可以使用现有的存储池\nceph fs new cephfs rbd-ssd rbd-hdd\n \n# Error EINVAL: pool 'rbd-ssd' already contains some objects. Use an empty pool instead.\n# 出现上述错误，可以：\nceph fs new cephfs rbd-ssd rbd-hdd --force\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024808-xj780to",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024808-xj780to",
				"updated": "20230411024808"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建了文件系统之后，在Luminous版本中，集群状态中显示："
				}
			]
		},
		{
			"ID": "20230411024811-0qgldq4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024811-0qgldq4",
				"updated": "20230411024813"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mds: cephfs-1/1/1 up  {0=Carbon=up:active}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024815-e9qaz65",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024815-e9qaz65",
				"updated": "20230411024823"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "列出"
				}
			]
		},
		{
			"ID": "20230411024823-t6qldx5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024823-t6qldx5",
				"updated": "20230411024828"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph fs ls\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024830-u1776h1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024830-u1776h1",
				"updated": "20230411024836"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.3 状态"
				}
			]
		},
		{
			"ID": "20230411024844-92fip19",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411024844-92fip19",
				"updated": "20230411024845"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "查看CephFS的详细状态，包括MDS列表、Rank列表等："
				}
			]
		},
		{
			"ID": "20230411024837-ns892ph",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024837-ns892ph",
				"updated": "20230411024849"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph fs status\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024842-bxmqt7s",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024842-bxmqt7s",
				"updated": "20230411024902"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.4 删除"
				}
			]
		},
		{
			"ID": "20230411024906-mp3ij4r",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411024906-mp3ij4r",
				"updated": "20230411024909"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph fs rm \u003cfilesystem name\u003e [--yes-i-really-mean-it]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024913-erwy3tr",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024913-erwy3tr",
				"updated": "20230411024928"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.5  关闭"
				}
			]
		},
		{
			"ID": "20230411025044-w2y43b6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025044-w2y43b6",
				"updated": "20230411025048"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mds set \u003cfs_name\u003e down true\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024929-cshwf59",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024929-cshwf59",
				"updated": "20230411024938"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.6 查看选项"
				}
			]
		},
		{
			"ID": "20230411025053-tcixkq3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025053-tcixkq3",
				"updated": "20230411025053"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要获取某个文件系统的信息，可以："
				}
			]
		},
		{
			"ID": "20230411025054-qzc8sq3",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025054-qzc8sq3",
				"updated": "20230411025059"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph fs get cephfs\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024939-psxnhs7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024939-psxnhs7",
				"updated": "20230411024945"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.7 设置选项"
				}
			]
		},
		{
			"ID": "20230411025100-v2f8jir",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025100-v2f8jir",
				"updated": "20230411025108"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "fs set \u003cfilesystem name\u003e \u003cvar\u003e \u003cval\u003e\n \n# 示例\n# 设置单个文件的大小，默认1TB\nfs set cephfs max_file_size 1099511627776\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411024946-643xg1t",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411024946-643xg1t",
				"updated": "20230411025003"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.8 增减数据池"
				}
			]
		},
		{
			"ID": "20230411025122-lfbfe6k",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025122-lfbfe6k",
				"updated": "20230411025126"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "fs add_data_pool \u003cfilesystem name\u003e \u003cpool name/id\u003e\nfs rm_data_pool \u003cfilesystem name\u003e \u003cpool name/id\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025003-cgstu4h",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025003-cgstu4h",
				"updated": "20230411025018"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.9 设为默认"
				}
			]
		},
		{
			"ID": "20230411025135-1ekdjit",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025135-1ekdjit",
				"updated": "20230411025135"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果集群中有多个文件系统，而客户端在挂载时没有明确指定使用哪个，则使用默认文件系统："
				}
			]
		},
		{
			"ID": "20230411025128-kcbdzp7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025128-kcbdzp7",
				"updated": "20230411025140"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph fs set-default cephfs\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025019-zy7vbem",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025019-zy7vbem",
				"updated": "20230411025027"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.10 使用EC池"
				}
			]
		},
		{
			"ID": "20230411025146-y4wyfe8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025146-y4wyfe8",
				"updated": "20230411025146"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "EC池可以作为Ceph的数据池，但是需要启用overwirte："
				}
			]
		},
		{
			"ID": "20230411025141-pammbkn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025141-pammbkn",
				"updated": "20230411025151"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd pool set my_ec_pool allow_ec_overwrites true\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025156-q29uwky",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025156-q29uwky",
				"updated": "20230411025156"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意：EC池不能用来存储元数据。"
				}
			]
		},
		{
			"ID": "20230411025027-ukc78st",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025027-ukc78st",
				"updated": "20230411025033"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6.11 配额"
				}
			]
		},
		{
			"ID": "20230411025202-nmrrxo2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025202-nmrrxo2",
				"updated": "20230411025202"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "CephFS支持对任何一个子目录进行配额。但是，需要注意以下限制："
				}
			]
		},
		{
			"ID": "20230411025202-a2t1hyl",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411025202-a2t1hyl",
				"updated": "20230411025202"
			},
			"Children": [
				{
					"ID": "20230411025202-zmhe07k",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411025202-zmhe07k"
					},
					"Children": [
						{
							"ID": "20230411025202-tv4u77h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025202-tv4u77h"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "需要客户端协作，因此被篡改过的客户端可以突破配额"
								}
							]
						}
					]
				},
				{
					"ID": "20230411025202-mf48lqd",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411025202-mf48lqd"
					},
					"Children": [
						{
							"ID": "20230411025202-38a24e9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025202-38a24e9"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "配额不是非常精确的"
								}
							]
						}
					]
				},
				{
					"ID": "20230411025202-6y4wkir",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411025202-6y4wkir"
					},
					"Children": [
						{
							"ID": "20230411025202-pogvwiz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025202-pogvwiz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "内核客户端，仅仅在4.17+才支持配额。用户空间客户端fuse、libcephfs都支持配额"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411025202-m5xykhg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025202-m5xykhg",
				"updated": "20230411025202"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "设置配额（设置为0则移除配额）："
				}
			]
		},
		{
			"ID": "20230411025230-mcmlksu",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025230-mcmlksu",
				"updated": "20230411025254"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "setfattr -n ceph.quota.max_bytes -v 100000000 /some/dir     # 按字节数\nsetfattr -n ceph.quota.max_files -v 10000 /some/dir         # 按文件数\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025255-soiuo03",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025255-soiuo03",
				"updated": "20230411025305"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "查看配额："
				}
			]
		},
		{
			"ID": "20230411025305-iglkt46",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025305-iglkt46",
				"updated": "20230411025315"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "getfattr -n ceph.quota.max_bytes /some/dir\ngetfattr -n ceph.quota.max_files /some/dir \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025338-29y86d7",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411025338-29y86d7",
				"updated": "20230411025349"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "挂载CephFS"
				}
			]
		},
		{
			"ID": "20230411025352-y2zc126",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025352-y2zc126",
				"updated": "20230411025355"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "内核驱动"
				}
			]
		},
		{
			"ID": "20230411025358-mgq97n7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025358-mgq97n7",
				"updated": "20230411025358"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可以直接使用Linux内核提供的驱动来挂载CephFS："
				}
			]
		},
		{
			"ID": "20230411025401-azfawjq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025401-azfawjq",
				"updated": "20230411025407"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir /mnt/cephfs\nmount -t ceph 10.0.1.1:6789:/ /mnt/cephfs\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025410-vz063sq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025410-vz063sq",
				"updated": "20230411025411"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如何启用了CephX，需要指定访问密钥，否则会报22错误："
				}
			]
		},
		{
			"ID": "20230411025416-mn1bnxv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025416-mn1bnxv",
				"updated": "20230411025418"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mount -t ceph 10.0.1.1:6789:/ /mnt/cephfs -o name=admin,secret=AQDRNBZbCp3WMBAAynSCCFPtILwHeI3RLDADKA==\n# 或者指定包含密钥的文件\nmount -t ceph 10.0.1.1:6789:/ /mnt/cephfs -o name=admin,secretfile=/etc/ceph/admin.secret\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025422-okkwtq3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025422-okkwtq3",
				"updated": "20230411025422"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果报can't read superblock，说明客户端内核不支持。"
				}
			]
		},
		{
			"ID": "20230411025426-rjog2d6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025426-rjog2d6",
				"updated": "20230411025427"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要实现自动挂载，你需要修改fstab："
				}
			]
		},
		{
			"ID": "20230411025433-z1y499b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025433-z1y499b",
				"updated": "20230411025434"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "{ipaddress}:{port}:/ {mountpoint} {fs-type} [name=username,secret=key|secretfile=file],[{mount.options}]\n \n# 示例\n10.0.1.1:6789:/ /mnt/cephfs  ceph name=admin,secretfile=/etc/ceph/cephfs.key,noatime,_netdev    0       2\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025444-ejep2av",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025444-ejep2av",
				"updated": "20230411025453"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "7.2 FUSE"
				}
			]
		},
		{
			"ID": "20230411025453-alh4c39",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025453-alh4c39",
				"updated": "20230411025458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要在用户空间挂载CephFS，你需要："
				}
			]
		},
		{
			"ID": "20230411025502-rztkhth",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411025502-rztkhth",
				"updated": "20230411025512"
			},
			"Children": [
				{
					"ID": "20230411025502-87dx8gn",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411025502-87dx8gn"
					},
					"Children": [
						{
							"ID": "20230411025502-ikuuyod",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025502-ikuuyod"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "将Ceph配置文件拷贝到客户端，命名为/etc/ceph/ceph.conf"
								}
							]
						}
					]
				},
				{
					"ID": "20230411025502-q2f8vol",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411025502-q2f8vol",
						"updated": "20230411025512"
					},
					"Children": [
						{
							"ID": "20230411025502-33tm87f",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025502-33tm87f"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "将Keyring拷贝到客户端，命名为/etc/ceph/ceph.keyring："
								}
							]
						},
						{
							"ID": "20230411025509-cym4arx",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411025509-cym4arx",
								"updated": "20230411025512"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "sudo scp -i ~/Documents/puTTY/gmem.key root@xenon.gmem.cc:/etc/ceph/ceph.client.admin.keyring /etc/ceph/ceph.keyring \n\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411025515-zex1g4w",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411025515-zex1g4w",
				"updated": "20230411025540"
			},
			"Children": [
				{
					"ID": "20230411025520-m9icx4g",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411025520-m9icx4g",
						"updated": "20230411025540"
					},
					"Children": [
						{
							"ID": "20230411025520-07yzy2a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411025520-07yzy2a",
								"updated": "20230411025525"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "执行挂载："
								}
							]
						},
						{
							"ID": "20230411025532-nybg17h",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411025532-nybg17h",
								"updated": "20230411025540"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "sudo ceph-fuse -m 10.0.1.1:6789 /mnt/cephfs\n# ceph-fuse[847]: starting ceph client                                                                                                                                             \n# 2018-06-07 19:18:25.503086 7fa5c44e1000 -1 init, newargv = 0x7fa5cd643b40 newargc=9                                                                                              \n# ceph-fuse[847]: starting fuse  \n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411025604-qic6y14",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025604-qic6y14",
				"updated": "20230411025604"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果有多个CephFS，你可以为ceph-fuse指定命令行选项--client_mds_namespace，或者在客户端的ceph.conf中添加client_mds_namespace配置。"
				}
			]
		},
		{
			"ID": "20230411025604-n7barf5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411025604-n7barf5",
				"updated": "20230411025604"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要实现自动挂载，你需要修改fstab："
				}
			]
		},
		{
			"ID": "20230411025615-0fns0eg",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025615-0fns0eg",
				"updated": "20230411025620"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "none    /mnt/ceph  fuse.ceph ceph.id={user-ID}[,ceph.conf={path/to/conf.conf}],_netdev,defaults  0 0\n \n# 示例\nnone    /mnt/ceph  fuse.ceph ceph.id=admin,_netdev,defaults  0 0\nnone    /mnt/ceph  fuse.ceph ceph.id=admin,ceph.conf=/etc/ceph/ceph.conf,_netdev,defaults  0 0 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025625-6x7609r",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411025625-6x7609r",
				"updated": "20230411025634"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控存储池"
				}
			]
		},
		{
			"ID": "20230411025636-qtqu99d",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025636-qtqu99d",
				"updated": "20230411025642"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.1 设置默认参数"
				}
			]
		},
		{
			"ID": "20230411025711-zh4vxbn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025711-zh4vxbn",
				"updated": "20230411025719"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 设置新建存储池时使用的默认参数\nosd pool default pg num = 128\nosd pool default pgp num = 128\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025643-tuubk5n",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025643-tuubk5n",
				"updated": "20230411025652"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.2 运行时修改参数"
				}
			]
		},
		{
			"ID": "20230411025725-ccsfh0l",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025725-ccsfh0l",
				"updated": "20230411025726"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd pool set {pool-name} option-name num\n# 示例\nceph osd pool set  .rgw.root pg_num 128\nceph osd pool set  .rgw.root pgp_num 128 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025652-44sv5gg",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025652-44sv5gg",
				"updated": "20230411025703"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.3 创建存储池"
				}
			]
		},
		{
			"ID": "20230411025730-awm1w63",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411025730-awm1w63",
				"updated": "20230411025736"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 创建存储池\n# crush-ruleset-name：使用的默认CRUSH规则集名称\n# 复制型的默认规则集由选项osd pool default crush replicated ruleset控制\n# \nceph osd pool create {pool-name} {pg-num} [{pgp-num}] [replicated] \\\n        [crush-ruleset-name] [expected-num-objects]\nceph osd pool create {pool-name} {pg-num}  {pgp-num}   erasure \\\n        [erasure-code-profile] [crush-ruleset-name] [expected_num_objects]\n \n \n# 示例\nceph osd pool create rbd-ssd 384 replicated replicated_rule_ssd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411025752-c2cf1dn",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411025752-c2cf1dn",
				"updated": "20230411083930"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.4 初始化存储池"
				}
			]
		},
		{
			"ID": "20230411084138-samja9z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084138-samja9z",
				"updated": "20230411084138"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建存储池之后，在管理节点上，使用rbd工具来初始化池："
				}
			]
		},
		{
			"ID": "20230411084126-oe61sal",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084126-oe61sal",
				"updated": "20230411084129"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd pool init \u003cpool-name\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411083930-gx6x3xd",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411083930-gx6x3xd",
				"updated": "20230411084005"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.5  读写存储池配置"
				}
			]
		},
		{
			"ID": "20230411084132-4pv6j6o",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084132-4pv6j6o",
				"updated": "20230411084150"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 修改存储池配置\nceph osd pool set {pool-name} {key} {value}\n# 读取存储池配置\nceph osd pool get {pool-name} {key}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411083951-se5zqna",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411083951-se5zqna",
				"updated": "20230411084021"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.6 列出存储池"
				}
			]
		},
		{
			"ID": "20230411084156-ongjijt",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084156-ongjijt",
				"updated": "20230411084202"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd lspools\n# 输出\n# 1 rbd,3 rbd-ssd,4 rbd-hdd,\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411083946-k1i6rhf",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411083946-k1i6rhf",
				"updated": "20230411084046"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.7 列出存储池中的对象"
				}
			]
		},
		{
			"ID": "20230411084211-8wx1dnb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084211-8wx1dnb",
				"updated": "20230411084212"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 列出存储池中的对象\nrados -p rbd ls\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084046-ukgusgv",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084046-ukgusgv",
				"updated": "20230411084232"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.8 存储池用量"
				}
			]
		},
		{
			"ID": "20230411084232-nsoq7pr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084232-nsoq7pr",
				"updated": "20230411084255"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 显示所有存储池的使用情况\nrados df\n \n# 或者\nceph df\n \n# 更多细节\nceph df detail\n# USED       %USED       MAX AVAIL     OBJECTS     DIRTY     READ      WRITE      RAW USED \n# 用量       用量百分比                对象数量              读速度    写数量     用量x副本份数\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084419-07umye6",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084419-07umye6",
				"updated": "20230411084432"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.9 存储池配额"
				}
			]
		},
		{
			"ID": "20230411084432-yswmhs9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084432-yswmhs9",
				"updated": "20230411084438"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 设置最大对象数量、最大字节数\nceph osd pool set-quota {pool-name} [max_objects {obj-count}] [max_bytes {bytes}]\n# 示例：\nceph osd pool set-quota data max_objects 10000\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084442-esxgabx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084442-esxgabx",
				"updated": "20230411084443"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要取消配额，设置为0即可。"
				}
			]
		},
		{
			"ID": "20230411084444-0tbyusn",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084444-0tbyusn",
				"updated": "20230411084453"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.10 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "存储池快照"
				}
			]
		},
		{
			"ID": "20230411084454-gy4uw5x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084454-gy4uw5x",
				"updated": "20230411084501"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 制作存储池快照\nceph osd pool mksnap {pool-name} {snap-name}\n# 删除存储池快照\nceph osd pool rmsnap {pool-name} {snap-name}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084505-qun2q4j",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084505-qun2q4j",
				"updated": "20230411084509"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.11 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "删除存储池"
				}
			]
		},
		{
			"ID": "20230411084509-ra45an9",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084509-ra45an9",
				"updated": "20230411084520"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 删除存储池\nceph osd pool delete {pool-name} [{pool-name} --yes-i-really-really-mean-it]\n \n# 示例\nceph osd pool rm rbd-ssd rbd-ssd --yes-i-really-really-mean-it\nceph osd pool rm rbd-hdd rbd-hdd --yes-i-really-really-mean-it\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084534-la1kxac",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084534-la1kxac",
				"updated": "20230411084556"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "8.12 清空缓存池"
				}
			]
		},
		{
			"ID": "20230411084557-tx08lcs",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084557-tx08lcs",
				"updated": "20230411084610"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 列出池中对象，逐个删除\nfor i in `rados -p rbd-ssd ls`; do echo $i; rados -p rbd-ssd rm $i; done\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084653-mn3nleu",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411084653-mn3nleu",
				"updated": "20230411084704"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控镜像"
				}
			]
		},
		{
			"ID": "20230411084710-m06l1h7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084710-m06l1h7",
				"updated": "20230411084710"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "镜像就是块设备，所谓块是一系列连续的字节序列（例如512KB）。基于块的存储接口，是磁盘、CD、软盘、甚至磁带都使用的，是存储对象最广泛使用的方式。"
				}
			]
		},
		{
			"ID": "20230411084710-jaxhbiv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084710-jaxhbiv",
				"updated": "20230411084710"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Ceph的块设备具有以下特点：thin-provisioned（精简配备）、可改变大小、跨越多OSD存储。"
				}
			]
		},
		{
			"ID": "20230411084729-izxm0r2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084729-izxm0r2",
				"updated": "20230411084738"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "列出镜像"
				}
			]
		},
		{
			"ID": "20230411084741-poj9avj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084741-poj9avj",
				"updated": "20230411084746"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd ls {poolname}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084752-c9m3ilb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084752-c9m3ilb",
				"updated": "20230411084752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果不指定池名称，则列出默认池中的镜像。"
				}
			]
		},
		{
			"ID": "20230411084752-zgo3ma9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084752-zgo3ma9",
				"updated": "20230411084752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "下面的命令可以列出池中延迟删除的镜像："
				}
			]
		},
		{
			"ID": "20230411084755-zlsqonx",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084755-zlsqonx",
				"updated": "20230411084802"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd trash ls {poolname} \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084804-ux172e8",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084804-ux172e8",
				"updated": "20230411084810"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.2  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "查看镜像磁盘占用"
				}
			]
		},
		{
			"ID": "20230411084811-lb03d4q",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084811-lb03d4q",
				"updated": "20230411084818"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd du --pool rbd-ssd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084826-xypqi1f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084826-xypqi1f",
				"updated": "20230411084826"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意：rbd info输出的是thin provisioning的大小，不是实际磁盘空间占用。"
				}
			]
		},
		{
			"ID": "20230411084826-sq72lkw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084826-sq72lkw",
				"updated": "20230411084826"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "除了上面的命令，还可以："
				}
			]
		},
		{
			"ID": "20230411084922-jtswt2v",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084922-jtswt2v",
				"updated": "20230411084925"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd diff k8s/kubernetes-dynamic-pvc | awk '{ SUM += $2 } END { print SUM/1024/1024 \" MB\" }' \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084858-dfomi3p",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084858-dfomi3p",
				"updated": "20230411084905"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.3 查看镜像信息"
				}
			]
		},
		{
			"ID": "20230411084905-ttvpkqo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084905-ttvpkqo",
				"updated": "20230411084916"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd info {pool-name}/{image-name}\nrbd info {image-name}\n \n# 输出示例：\nrbd image 'kubernetes-dynamic-pvc-0783b011-6a04-11e8-a266-3e299ab03dc6':\n        # 总大小（thin-provisioning的大小，不是实际占用磁盘大小），分布在多少个对象中\n        size 2048 MB in 512 objects\n        order 22 (4096 kB objects)\n        block_name_prefix: rbd_data.7655b643c9869\n        format: 2\n        features: layering\n        flags:\n        create_timestamp: Thu Jun  7 11:36:58 2018\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084938-1tok2j9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084938-1tok2j9",
				"updated": "20230411084949"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.4  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "查看镜像状态"
				}
			]
		},
		{
			"ID": "20230411084954-69ws7af",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411084954-69ws7af",
				"updated": "20230411084955"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以看到什么客户端在使用（watch）镜像："
				}
			]
		},
		{
			"ID": "20230411084950-9zywh52",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411084950-9zywh52",
				"updated": "20230411085001"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd status k8s/kubernetes-dynamic-pvc-ca081cd3-01a0-11eb-99eb-ce0c4cdcd662\n# Watchers:\n#         watcher=192.168.106.18:0/756489925 client.254697953 cookie=18446462598732840981 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411084948-1zfxgr7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411084948-1zfxgr7",
				"updated": "20230411085013"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "创建镜像"
				}
			]
		},
		{
			"ID": "20230411085017-fgxx27w",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085017-fgxx27w",
				"updated": "20230411085028"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd create --size {megabytes} {pool-name}/{image-name}\n# 示例\n# 创建大小为1G的镜像\nrbd create test --size 1G\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085032-98nmftu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411085032-98nmftu",
				"updated": "20230411085033"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果不指定存储池，则在默认池中创建镜像。"
				}
			]
		},
		{
			"ID": "20230411085036-bzzkx2k",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085036-bzzkx2k",
				"updated": "20230411085038"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.6 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修改镜像大小"
				}
			]
		},
		{
			"ID": "20230411085046-3xzrqq2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085046-3xzrqq2",
				"updated": "20230411085051"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 修改镜像大小\nrbd --image test resize --size 2G\n# 不但可以扩大，还可以缩小\nrbd --image test resize --size 1G --allow-shrink\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085053-tyvlc10",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085053-tyvlc10",
				"updated": "20230411085101"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.7 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "映射为块设备"
				}
			]
		},
		{
			"ID": "20230411085106-kddyhfo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085106-kddyhfo",
				"updated": "20230411085108"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 将镜像映射为本地块设备，可以进行格式化、挂载\nrbd map test\n# 格式化\nmkfs.xfs -f /dev/rbd0\n# 挂载\nmount /dev/rbd0 /test\n \n# 显示映射到本地块设备的镜像\nrbd showmapped\n \n# 卸载\numount /dev/rbd0\n# 解除映射\nrbd unmap /dev/rbd0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085113-oojrdwi",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085113-oojrdwi",
				"updated": "20230411085125"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.8 删除镜像"
				}
			]
		},
		{
			"ID": "20230411085125-7r07qqd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085125-7r07qqd",
				"updated": "20230411085135"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd rm {pool-name}/{image-name}\n \nrbd --image test rm\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085138-txduqlz",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085138-txduqlz",
				"updated": "20230411085145"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.9 延迟删除"
				}
			]
		},
		{
			"ID": "20230411085145-0lno83u",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085145-0lno83u",
				"updated": "20230411085153"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 放入回收站\nrbd trash mv {pool-name}/{image-name}\n# 彻底删除\nrbd trash rm {pool-name}/{image-id}\n# 还原\nrbd trash restore {image-id}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085201-le7w0h8",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085201-le7w0h8",
				"updated": "20230411085209"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.10 快照管理"
				}
			]
		},
		{
			"ID": "20230411085210-5vli5lh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085210-5vli5lh",
				"updated": "20230411085212"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 创建快照\nrbd snap create --image test --snap test_snap\n# 列出镜像的所有快照\nrbd snap ls --image test\n \n# 回滚到指定快照\nrbd snap rollback --image test --snap test_snap\n# 另一种写法\nrbd snap rollback rbd/test@test_snap\n \n# 删除快照，注意删除是异步进行的，空间不会立刻释放\nrbd snap rm --image test --snap test_snap\nrbd snap purge --image test\n \n# 保护快照\nrbd snap protect --image test --snap test_snap\n# 取消保护\nrbd snap unprotect --image test --snap test_snap\n \n# 清除指定镜像的所有快照\nrbd snap purge {pool-name}/{image-name}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085227-h6cq8r2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085227-h6cq8r2",
				"updated": "20230411085232"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "9.11 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "镜像克隆"
				}
			]
		},
		{
			"ID": "20230411085233-a5ilxxt",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085233-a5ilxxt",
				"updated": "20230411085242"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 克隆镜像，注意只有镜像格式2才支持克隆\n# 从快照创建克隆\nrbd clone --image test --snap test_snap test_clone\n# 列出快照的所有克隆\nrbd children --image test --snap test_snap\n# 将父镜像（被克隆的镜像的快照）的数据扁平化到子镜像，从而解除父子关联\nrbd flatten --image test_clone\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085253-a3zgdua",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411085253-a3zgdua",
				"updated": "20230411085306"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "10. 镜像镜像"
				}
			]
		},
		{
			"ID": "20230411085316-ju4i43z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411085316-ju4i43z",
				"updated": "20230411085316"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从Jewel开始，RBD镜像可以异步的跨越两个集群进行镜像（Mirroring）。通过配置，你可以镜像池中的所有、或者一部分镜像。"
				}
			]
		},
		{
			"ID": "20230411085307-4ys5h8s",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085307-4ys5h8s",
				"updated": "20230411085312"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "10.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "启用镜像复制"
				}
			]
		},
		{
			"ID": "20230411085323-xli71yb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085323-xli71yb",
				"updated": "20230411085328"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd mirror pool enable {pool-name} {mode}\n \n# 启用名为local的集群的镜像复制，默认为pool\nrbd --cluster local mirror pool enable image-pool pool\nrbd --cluster remote mirror pool enable image-pool pool\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411085358-wzbqsvy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411085358-wzbqsvy",
				"updated": "20230411085358"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "mode取值："
				}
			]
		},
		{
			"ID": "20230411085358-dnwzqre",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411085358-dnwzqre",
				"updated": "20230411085358"
			},
			"Children": [
				{
					"ID": "20230411085358-s4hy831",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411085358-s4hy831"
					},
					"Children": [
						{
							"ID": "20230411085358-bwuy9oa",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411085358-bwuy9oa"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "pool，池中所有启用了journaling特性的镜像都被复制"
								}
							]
						}
					]
				},
				{
					"ID": "20230411085358-6zrfi83",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411085358-6zrfi83"
					},
					"Children": [
						{
							"ID": "20230411085358-i1m5de5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411085358-i1m5de5"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "image，只有明确配置的镜像才进行复制"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411085322-y4gx9xb",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411085322-y4gx9xb",
				"updated": "20230411085336"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "10.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "禁用镜像复制"
				}
			]
		},
		{
			"ID": "20230411085337-qx3k8qr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411085337-qx3k8qr",
				"updated": "20230411085345"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd mirror pool disable {pool-name}\n \nrbd --cluster local mirror pool disable image-pool\nrbd --cluster remote mirror pool disable image-pool\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411095117-s20ms8f",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411095117-s20ms8f",
				"updated": "20230411111726"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "11. 操控对象"
				}
			]
		},
		{
			"ID": "20230411111726-ljyjc3o",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411111726-ljyjc3o",
				"updated": "20230411111751"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "11.1  创建对象"
				}
			]
		},
		{
			"ID": "20230411111751-cnx0w8g",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411111751-cnx0w8g",
				"updated": "20230411111754"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 在池中创建一个对象，其内容来自文件\necho \"Hello World\" \u003e /tmp/file\nrados -p rbd put helloworld /tmp/file\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411111740-kahf9hk",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411111740-kahf9hk",
				"updated": "20230411111803"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "11.2 查看对象"
				}
			]
		},
		{
			"ID": "20230411111804-dpyb7ko",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411111804-dpyb7ko",
				"updated": "20230411111813"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " 查看对象\nrados -p rbd ls | grep helloworld\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411111827-8fnidg4",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411111827-8fnidg4",
				"updated": "20230411111901"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "12. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控CRUSH"
				}
			]
		},
		{
			"ID": "20230411111901-8dzp1t7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411111901-8dzp1t7",
				"updated": "20230411111907"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " # 根据CRUSH Map，列出OSD树\nceph osd tree\n#                 缩进显示树层次\n# ID  CLASS WEIGHT  TYPE NAME               STATUS REWEIGHT PRI-AFF \n#  -1       5.73999 root default                            \n#  -2       0.84000     host k8s-10-5-38-25                 \n#   0   hdd 0.84000         osd.0               up  1.00000 1.00000 \n#  -5       0.45000     host k8s-10-5-38-70                 \n#   1   hdd 0.45000         osd.1               up  1.00000 1.00000 \n \n# 移动桶的位置\n# 将rack01移动到{root=default} \nceph osd crush move rack01 root=default\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411111855-iwzh7r5",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411111855-iwzh7r5",
				"updated": "20230411111939"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13. 操控PG"
				}
			]
		},
		{
			"ID": "20230411111939-v1iby43",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411111939-v1iby43",
				"updated": "20230411111953"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "镜像和PG对应关系"
				}
			]
		},
		{
			"ID": "20230411111958-6efurmw",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411111958-6efurmw",
				"updated": "20230411112017"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 显示镜像和PG的关系\nceph osd map rbd  test\n#                                                 此镜像存放在1.b5这个PG中\n#                                                        此PG位于 osd.3 osd.1 osd.6中\n#                                                                      主副本 位于osd.3中\n# osdmap e26 pool 'rbd' (1) object 'test' -\u003e pg 1.40e8aab5 (1.b5) -\u003e up ([3,1,6], p3) acting ([3,1,6], p3)\n \n# 显示PG和镜像的关系\nceph pg map 1.c0\n# osdmap e1885 pg 1.c0 (1.c0) -\u003e up [9,8] acting [9,8]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411111948-x5l1lrs",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411111948-x5l1lrs",
				"updated": "20230411112053"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "Dump出PG统计信息"
				}
			]
		},
		{
			"ID": "20230411112114-df6vysx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112114-df6vysx",
				"updated": "20230411112115"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Dump出所有PG："
				}
			]
		},
		{
			"ID": "20230411112054-f8nzv24",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112054-f8nzv24",
				"updated": "20230411112103"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "pg dump {all|summary|sum|delta|pools|osds|pgs|pgs_brief [all|summary|sum|delta|pools|osds|pgs|pgs_brief...]}\n# 示例\nceph pg dump [--format {format}]  # format取值plain或json\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112108-ubk0my4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112108-ubk0my4",
				"updated": "20230411112110"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Dump出卡在指定状态中的PG的统计信息："
				}
			]
		},
		{
			"ID": "20230411112126-4c9qctn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112126-4c9qctn",
				"updated": "20230411112128"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# threshold默认30秒\nceph pg dump_stuck inactive|unclean|stale|undersized|degraded [--format {format}] [-t|--threshold {seconds}]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112131-svidtmi",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112131-svidtmi",
				"updated": "20230411112139"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修复PG"
				}
			]
		},
		{
			"ID": "20230411112142-kwwg1m0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112142-kwwg1m0",
				"updated": "20230411112148"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph pg repair 1.c0\n# instructing pg 1.c0 on osd.9 to repair\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112154-vx83hwq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112154-vx83hwq",
				"updated": "20230411112158"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "13.4 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "优先回填或修复"
				}
			]
		},
		{
			"ID": "20230411112159-1rrbke4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112159-1rrbke4",
				"updated": "20230411112213"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph pg force-backfill \u003cpgid\u003e [\u003cpgid\u003e...]  \nceph pg force-recovery \u003cpgid\u003e [\u003cpgid\u003e...] \n# 取消\nceph pg cancel-force-backfill \u003cpgid\u003e [\u003cpgid\u003e...]\nceph pg cancel-force-recovery \u003cpgid\u003e [\u003cpgid\u003e...]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112220-ej3s5on",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411112220-ej3s5on",
				"updated": "20230411112458"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "调整PG数量"
				}
			]
		},
		{
			"ID": "20230411112231-tmzddp7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112231-tmzddp7",
				"updated": "20230411112500"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "计算PG合理值"
				}
			]
		},
		{
			"ID": "20230411112334-pbm7msz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112334-pbm7msz",
				"updated": "20230411112334"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "参考"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "a",
					"TextMarkAHref": "http://ceph.com/pgcalc/",
					"TextMarkTextContent": "官网的算法"
				},
				{
					"Type": "NodeText",
					"Data": "进行计算。"
				}
			]
		},
		{
			"ID": "20230411112241-nk1lmyy",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112241-nk1lmyy",
				"updated": "20230411112501"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "确保集群健康"
				}
			]
		},
		{
			"ID": "20230411112339-892hz3u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112339-892hz3u",
				"updated": "20230411112340"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行调整之前，必须保证集群处于健康状态。"
				}
			]
		},
		{
			"ID": "20230411112249-jwy9kts",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112249-jwy9kts",
				"updated": "20230411112502"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "调整数据同步参数"
				}
			]
		},
		{
			"ID": "20230411112346-1tv3hll",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112346-1tv3hll",
				"updated": "20230411112347"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为避免调整PG数量导致业务性能受到严重影响，应该调整一些参数："
				}
			]
		},
		{
			"ID": "20230411112353-1buyso7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112353-1buyso7",
				"updated": "20230411112404"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph tell osd.* injectargs '--osd-max-backfills 1'\nceph tell osd.* injectargs '--osd-recovery-max-active 1'\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112411-8496t8w",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112411-8496t8w",
				"updated": "20230411112412"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "其它相关的参数还包括："
				}
			]
		},
		{
			"ID": "20230411112413-97ai7bp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112413-97ai7bp",
				"updated": "20230411112422"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " osd_backfill_scan_min = 4 \nosd_backfill_scan_max = 32 \nosd recovery threads = 1 \nosd recovery op priority = 1 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112300-1e0p2dv",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112300-1e0p2dv",
				"updated": "20230411112504"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14.4 调整PG数量"
				}
			]
		},
		{
			"ID": "20230411112348-29quqk0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112348-29quqk0",
				"updated": "20230411112436"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "按照2的幂进行翻倍增长，例如原来32个，可以先调整为64个。\n\n注意：不要一下子把PG设置为太大的值，这会导致大规模的rebalance，影响系统性能。\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112316-fdpo6in",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112316-fdpo6in",
				"updated": "20230411112506"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "14.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "调整PGP数量"
				}
			]
		},
		{
			"ID": "20230411112439-c5auuq5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112439-c5auuq5",
				"updated": "20230411112442"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "等到上一步操作后，集群变为Active+Clean状态后，再将pgp_num设置的和pg_num一致。 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112446-vrfv84q",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411112446-vrfv84q",
				"updated": "20230411112514"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "操控RGW"
				}
			]
		},
		{
			"ID": "20230411112515-fimflbi",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112515-fimflbi",
				"updated": "20230411112523"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "手工安装"
				}
			]
		},
		{
			"ID": "20230411112628-k3umtjo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112628-k3umtjo",
				"updated": "20230411112631"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 在RGW节点安装软件\n# yum install ceph-radosgw\n \nRGW_HOST=$(hostname -s)\n \n# 在RGW节点，配置ceph.conf\ncat \u003c\u003c EOF \u003e\u003e /etc/ceph/ceph.conf\n[client.rgw.$RGW_HOST]\nrgw_frontends = \"civetweb port=7480\"\nEOF\n \n# 拷贝配置到所有Ceph节点\n \n# 在RGW节点，创建数据目录\nmkdir -p /var/lib/ceph/radosgw/ceph-rgw.$RGW_HOST\n \n# 在RGW节点，创建用户，输出Keyring\nceph auth get-or-create client.rgw.$RGW_HOST osd 'allow rwx' mon 'allow rw' \\\n    -o /var/lib/ceph/radosgw/ceph-rgw.$RGW_HOST/keyring\nchown -R ceph:ceph /var/lib/ceph/radosgw\n \n# 在RGW节点，启用Systemd服务\nsystemctl enable ceph-radosgw.target\nsystemctl enable ceph-radosgw@rgw.$RGW_HOST\nsystemctl start ceph-radosgw@rgw.$RGW_HOST\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112527-jn1281q",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112527-jn1281q",
				"updated": "20230411112534"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.2 修改端口"
				}
			]
		},
		{
			"ID": "20230411112651-mne8lw6",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112651-mne8lw6",
				"updated": "20230411112653"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[client.rgw.Carbon]\nrgw_frontends = \"civetweb port=80\"\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112658-4z6mzas",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112658-4z6mzas",
				"updated": "20230411112659"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "推送修改后的配置文件后，重启RGW服务："
				}
			]
		},
		{
			"ID": "20230411112704-k17bsxa",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112704-k17bsxa",
				"updated": "20230411112708"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "systemctl restart ceph-radosgw.service\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112534-kzpkfa1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112534-kzpkfa1",
				"updated": "20230411112541"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.3 启用ssl"
				}
			]
		},
		{
			"ID": "20230411112710-gn8wjdb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112710-gn8wjdb",
				"updated": "20230411112724"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[client.rgw.Carbon]\n# 指定包含了私钥和证书的PEM\nrgw_frontends = civetweb port=443s ssl_certificate=/etc/ceph/private/keyandcert.pem\n# Luminous开始，可以同时绑定SSL和非SSL端口\nrgw_frontends = civetweb port=80+443s ssl_certificate=/etc/ceph/private/keyandcert.pem\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112547-yluuh4h",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112547-yluuh4h",
				"updated": "20230411112556"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.4 配置桶分片"
				}
			]
		},
		{
			"ID": "20230411112738-3jjnmqk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112738-3jjnmqk",
				"updated": "20230411112738"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "RGW在index_pool池中存放桶（Bucket）索引数据，此池默认名为.rgw.buckets.index。"
				}
			]
		},
		{
			"ID": "20230411112738-wn283ak",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112738-wn283ak",
				"updated": "20230411112738"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "从0.94版本开始，支持对桶索引进行分片，避免单个桶中对象数量过多时出现性能瓶颈："
				}
			]
		},
		{
			"ID": "20230411112740-l54zz4j",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112740-l54zz4j",
				"updated": "20230411112749"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 每个桶的最大索引分片数，默认0，表示不支持分片\nrgw_override_bucket_index_max_shards = 0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411112806-fxeuumu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112806-fxeuumu",
				"updated": "20230411112807"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你可以在global段配置上面的选项。"
				}
			]
		},
		{
			"ID": "20230411112556-i61c4qx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411112556-i61c4qx",
				"updated": "20230411112603"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.5 启用用户"
				}
			]
		},
		{
			"ID": "20230411112814-v8dcajc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112814-v8dcajc",
				"updated": "20230411112814"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要使用RGW的RESTful接口，你需要："
				}
			]
		},
		{
			"ID": "20230411112814-05fcxem",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411112814-05fcxem",
				"updated": "20230411112814"
			},
			"Children": [
				{
					"ID": "20230411112814-y97iy2i",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411112814-y97iy2i"
					},
					"Children": [
						{
							"ID": "20230411112814-u0rcmjx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411112814-u0rcmjx"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建初始的S3接口的用户"
								}
							]
						}
					]
				},
				{
					"ID": "20230411112814-otwq4zu",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411112814-otwq4zu"
					},
					"Children": [
						{
							"ID": "20230411112814-ygzhdzx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411112814-ygzhdzx"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建Swift接口的子用户"
								}
							]
						}
					]
				},
				{
					"ID": "20230411112814-6xff9l3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411112814-6xff9l3"
					},
					"Children": [
						{
							"ID": "20230411112814-0lxa8d7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411112814-0lxa8d7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "验证用户可以访问网关"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411112814-5ym484i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411112814-5ym484i",
				"updated": "20230411112814"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要创建S3接口用户，需要在网关机上执行："
				}
			]
		},
		{
			"ID": "20230411112824-crff47r",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112824-crff47r",
				"updated": "20230411112826"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "radosgw-admin user create --uid=\"rgw\" --display-name=\"rgw\"\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113633-bojsr0b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113633-bojsr0b",
				"updated": "20230411113634"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "access_key、secret_key会打印在屏幕上，要访问网关，客户端必须提供这两个key："
				}
			]
		},
		{
			"ID": "20230411112542-fzyu83d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411112542-fzyu83d",
				"updated": "20230411113516"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "{\n    \"user_id\": \"rgw\",\n    \"display_name\": \"rgw\",\n    \"email\": \"\",\n    \"suspended\": 0,\n    \"max_buckets\": 1000,\n    \"auid\": 0,\n    \"subusers\": [],\n    \"keys\": [\n        {\n            \"user\": \"rgw\",\n            \"access_key\": \"IN01UCU1M1996LK6OM88\",\n            \"secret_key\": \"AuuAbroSUlWLykbQHCbFLVO6RU2ozUEjIFkYeoqc\"\n        }\n    ],\n    \"swift_keys\": [],\n    \"caps\": [],\n    \"op_mask\": \"read, write, delete\",\n    \"default_placement\": \"\",\n    \"placement_tags\": [],\n    \"bucket_quota\": {\n        \"enabled\": false,\n        \"check_on_raw\": false,\n        \"max_size\": -1,\n        \"max_size_kb\": 0,\n        \"max_objects\": -1\n    },\n    \"user_quota\": {\n        \"enabled\": false,\n        \"check_on_raw\": false,\n        \"max_size\": -1,\n        \"max_size_kb\": 0,\n        \"max_objects\": -1\n    },\n    \"temp_url_keys\": [],\n    \"type\": \"rgw\"\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113532-msugfwr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113532-msugfwr",
				"updated": "20230411113532"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要创建Swift子用户，需要在网关机上执行："
				}
			]
		},
		{
			"ID": "20230411113533-6b98i0s",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411113533-6b98i0s",
				"updated": "20230411113538"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "radosgw-admin subuser create --uid=alex --subuser=alex:swift --access=full\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113539-n953rul",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113539-n953rul",
				"updated": "20230411113543"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "你需要为Swift子用户创建secret key："
				}
			]
		},
		{
			"ID": "20230411113548-c6u5924",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411113548-c6u5924",
				"updated": "20230411113551"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "radosgw-admin key create --subuser=alex:swift --key-type=swift --gen-secret\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113555-swash2j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113555-swash2j",
				"updated": "20230411113555"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "现在，你可以用自己熟悉的语言的S3、Swift客户端来验证用户是否可用。"
				}
			]
		},
		{
			"ID": "20230411113652-kfgkgef",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411113652-kfgkgef",
				"updated": "20230411113706"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "15.6 操控桶"
				}
			]
		},
		{
			"ID": "20230411113706-6t9p6o5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411113706-6t9p6o5",
				"updated": "20230411113724"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "radosgw-admin bucket list                # 列出桶\nradosgw-admin bucket limit check         # 显示桶的分片情况\nradosgw-admin bucket link                # 将桶链接到用户\nradosgw-admin bucket unlink              # 取消桶到用户的链接\nradosgw-admin bucket stats               # 显示桶的统计信息\nradosgw-admin bucket rm                  # 删除桶\nradosgw-admin bucket check               # 检查桶索引\nradosgw-admin bucket reshard             # 对桶进行重分片\nradosgw-admin bucket sync disable        # 禁止桶同步\nradosgw-admin bucket sync enable         # 启用桶同步\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113735-ifl83ow",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113735-ifl83ow",
				"updated": "20230411113735"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要创建桶，你需要使用合法的User ID + AWS Access Key发起请求，Ceph没有提供对应的命令行。需要注意以下约束："
				}
			]
		},
		{
			"ID": "20230411113735-twd803n",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411113735-twd803n",
				"updated": "20230411113735"
			},
			"Children": [
				{
					"ID": "20230411113735-z60teej",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411113735-z60teej"
					},
					"Children": [
						{
							"ID": "20230411113735-a5ow64x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-a5ow64x"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称必须唯一"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113735-y3d3pxa",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411113735-y3d3pxa"
					},
					"Children": [
						{
							"ID": "20230411113735-fkpox0m",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-fkpox0m"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称不能格式化为IP地址"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113735-jbbg2y0",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411113735-jbbg2y0"
					},
					"Children": [
						{
							"ID": "20230411113735-76pz6xh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-76pz6xh"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称在3-63字符之间"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113735-g22e8qc",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20230411113735-g22e8qc"
					},
					"Children": [
						{
							"ID": "20230411113735-zc0wk4v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-zc0wk4v"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称不得包含大写字母、下划线，但是可以包含短横线"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113735-t26lg3e",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20230411113735-t26lg3e"
					},
					"Children": [
						{
							"ID": "20230411113735-ilsvxnu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-ilsvxnu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称必须以小写字母或数字开头"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113735-cl60sw5",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20230411113735-cl60sw5"
					},
					"Children": [
						{
							"ID": "20230411113735-z8alsrg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113735-z8alsrg"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "桶名称必须由一系列的标签组成，每个标签用点号.分隔"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411113735-kvfkm5o",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113735-kvfkm5o",
				"updated": "20230411113735"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们可以使用MinIO客户端创建桶："
				}
			]
		},
		{
			"ID": "20230411113757-zfocqyb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411113757-zfocqyb",
				"updated": "20230411113806"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 添加配置\n#                                               access_key           secret_key\nmc config host add rgw https://rgw.gmem.cc:7480 IN01UCU1M1996LK6OM88 AuuAbroSUlWLykbQHCbFLVO6RU2ozUEjIFkYeoqc\n \n# 创建桶\nmc mb rgw/test\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113810-1yiy401",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113810-1yiy401",
				"updated": "20230411113811"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "现在通过Rgw命令行可以看到这个桶："
				}
			]
		},
		{
			"ID": "20230411113815-txgty0x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411113815-txgty0x",
				"updated": "20230411113820"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "radosgw-admin buckets list\n# [\n#     \"test\"\n# ]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411113824-fgqepa6",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411113824-fgqepa6",
				"updated": "20230411113831"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "16. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理身份验证"
				}
			]
		},
		{
			"ID": "20230411113835-596flzt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113835-596flzt",
				"updated": "20230411113835"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Ceph默认开启了cephx协议，加密认证需要消耗少量的资源。"
				}
			]
		},
		{
			"ID": "20230411113835-i222azg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113835-i222azg",
				"updated": "20230411113835"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "启用cephx后，Cephe会自动在包括/etc/ceph/ceph.$name.keyring在内的位置寻找钥匙串，你可以指定keyring选项来修改默认路径，但是不推荐"
				}
			]
		},
		{
			"ID": "20230411113845-1rwkxiz",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411113845-1rwkxiz",
				"updated": "20230411113850"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "16.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "手工启用"
				}
			]
		},
		{
			"ID": "20230411113857-f8j5gtn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411113857-f8j5gtn",
				"updated": "20230411113858"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在禁用了cephx的集群上，启用它的步骤为："
				}
			]
		},
		{
			"ID": "20230411113902-d7kjeuu",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411113902-d7kjeuu",
				"updated": "20230411114115"
			},
			"Children": [
				{
					"ID": "20230411113911-0q7pfiu",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411113911-0q7pfiu"
					},
					"Children": [
						{
							"ID": "20230411113911-dx028y5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113911-dx028y5"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建 client.admin 密钥："
								}
							]
						},
						{
							"ID": "20230411114000-9eccjc1",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114000-9eccjc1",
								"updated": "20230411114003"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "# 如果你使用的自动部署工具已经生成此文件，切勿执行此命令，会覆盖\nceph auth get-or-create client.admin mon 'allow *' mds 'allow *' osd 'allow *' -o /etc/ceph/ceph\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113917-1ghjhzq",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411113917-1ghjhzq"
					},
					"Children": [
						{
							"ID": "20230411113917-d9mmekr",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113917-d9mmekr",
								"updated": "20230411113917"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建mon集群所需的钥匙串、密钥："
								}
							]
						},
						{
							"ID": "20230411114007-o5ykp5q",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114007-o5ykp5q",
								"updated": "20230411114010"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "ceph-authtool --create-keyring /tmp/ceph.mon.keyring --gen-key -n mon. --cap mon 'allow *'\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113924-gzb9mj8",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411113924-gzb9mj8"
					},
					"Children": [
						{
							"ID": "20230411113924-3plypb4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113924-3plypb4",
								"updated": "20230411113924"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "将上述钥匙串复制到所有mon的mon data目录，例如："
								}
							]
						},
						{
							"ID": "20230411114016-f4h3zw0",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114016-f4h3zw0",
								"updated": "20230411114020"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "cp /tmp/ceph.mon.keyring /var/lib/ceph/mon/ceph-a/keyring\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113928-f6aoqjt",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20230411113928-f6aoqjt"
					},
					"Children": [
						{
							"ID": "20230411113928-xicwovo",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113928-xicwovo",
								"updated": "20230411113929"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "为每个OSD生成密钥："
								}
							]
						},
						{
							"ID": "20230411114024-nn3ak1t",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114024-nn3ak1t",
								"updated": "20230411114029"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "ceph auth get-or-create osd.{$id} mon 'allow rwx' osd 'allow *' -o /var/lib/ceph/osd/ceph-{$id}/keyring\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113932-m5eg3o4",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20230411113932-m5eg3o4"
					},
					"Children": [
						{
							"ID": "20230411113932-h96eenp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113932-h96eenp",
								"updated": "20230411113933"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "为每个 MDS 生成密钥："
								}
							]
						},
						{
							"ID": "20230411114039-9f45cjn",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114039-9f45cjn",
								"updated": "20230411114042"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "ceph auth get-or-create mds.{$id} mon 'allow rwx' osd 'allow *' mds 'allow *' -o /var/lib/ceph/mds/ceph-{$id}/keyring\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113939-irtdz4t",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20230411113939-irtdz4t"
					},
					"Children": [
						{
							"ID": "20230411113939-8pafou2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113939-8pafou2",
								"updated": "20230411113939"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "添加以下内容到配置文件的global段："
								}
							]
						},
						{
							"ID": "20230411114052-p911zai",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114052-p911zai",
								"updated": "20230411114059"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "auth cluster required = cephx\nauth service required = cephx\nauth client required = cephx\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				},
				{
					"ID": "20230411113943-7yxt6na",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ny4=",
						"Num": 7
					},
					"Properties": {
						"id": "20230411113943-7yxt6na",
						"updated": "20230411114115"
					},
					"Children": [
						{
							"ID": "20230411113943-oag3jx1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411113943-oag3jx1",
								"updated": "20230411113943"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "启动或重启Ceph集群："
								}
							]
						},
						{
							"ID": "20230411114107-ogn2dvy",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411114107-ogn2dvy",
								"updated": "20230411114115"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": " # 停止当前节点上的所有Ceph守护进程\nsudo stop ceph-all\nsudo start ceph-all\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411113936-ay6cwsp",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411113936-ay6cwsp",
				"updated": "20230411114136"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "16.2  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "禁用认证"
				}
			]
		},
		{
			"ID": "20230411114138-l0gdyez",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411114138-l0gdyez",
				"updated": "20230411114138"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "修改配置文件global段："
				}
			]
		},
		{
			"ID": "20230411114143-zswhjnt",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411114143-zswhjnt",
				"updated": "20230411114149"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "auth cluster required = none\nauth service required = none\nauth client required = none\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411114152-epz5jsv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411114152-epz5jsv",
				"updated": "20230411114152"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后重启Ceph集群。"
				}
			]
		},
		{
			"ID": "20230411114154-jmjlxwl",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411114154-jmjlxwl",
				"updated": "20230411114201"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "16.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "身份验证命令"
				}
			]
		},
		{
			"ID": "20230411114202-v49d74r",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411114202-v49d74r",
				"updated": "20230411114213"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 列出keyring\nceph auth ls\n# 添加OSD的keyring\nceph auth add {osd} {--in-file|-i} {path-to-osd-keyring}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125534-x98k4gv",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411125534-x98k4gv",
				"updated": "20230411125547"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理CRUSH map"
				}
			]
		},
		{
			"ID": "20230411125601-xvtjbep",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411125601-xvtjbep",
				"updated": "20230411125620"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "手工管理"
				}
			]
		},
		{
			"ID": "20230411125624-ux99t7p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125624-ux99t7p",
				"updated": "20230411125624"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "任何时后你都可以Dump、反编译、修改、编译、注入CURSH map。如果要完全基于手工方式管理，不使用自动生成的CRUSH map，可以设置："
				}
			]
		},
		{
			"ID": "20230411125636-3szufs8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125636-3szufs8",
				"updated": "20230411125638"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "osd crush update on start = false\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125640-me4c3o9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411125640-me4c3o9",
				"updated": "20230411125651"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "查看Dump"
				}
			]
		},
		{
			"ID": "20230411125658-pm52qut",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125658-pm52qut",
				"updated": "20230411125659"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行命令 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "ceph"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "osd"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "crush"
				},
				{
					"Type": "NodeText",
					"Data": " "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "dump"
				},
				{
					"Type": "NodeText",
					"Data": "，可以将整个CRUSH导出为可读形式："
				}
			]
		},
		{
			"ID": "20230411125652-fdeg0nc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125652-fdeg0nc",
				"updated": "20230411125725"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 下面的输出时安装后最初的状态，没有任何OSD\n \n{   \n    # 设备列表，最初为空                                                                                                                                                                   \n    \"devices\": [],   \n    # 桶类型定义列表                                                                                                                                                           \n    \"types\": [                                                                                                                                                                       \n        {                                                                                                                                                                            \n            \"type_id\": 0,                                                                                                                                                            \n            \"name\": \"osd\"                                                                                                                                                            \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 1,                                                                                                                                                            \n            \"name\": \"host\"                                                                                                                                                           \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 2,                                                                                                                                                            \n            \"name\": \"chassis\"                                                                                                                                                        \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 3,                                                                                                                                                            \n            \"name\": \"rack\"                                                                                                                                                           \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 4,                                                                                                                                                            \n            \"name\": \"row\"                                                                                                                                                            \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 5,                                                                                                                                                            \n            \"name\": \"pdu\"                                                                                                                                                            \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 6,                                                                                                                                                            \n            \"name\": \"pod\"                                                                                                                                                            \n        },                                                                                                                                                                           \n        {                                                                                                                                                                            \n            \"type_id\": 7,                                                                                                                                                            \n            \"name\": \"room\"                                                                                                                                                           \n        },\n        {\n            \"type_id\": 8,\n            \"name\": \"datacenter\"\n        },\n        {\n            \"type_id\": 9,\n            \"name\": \"region\"\n        },\n        {\n            \"type_id\": 10,\n            \"name\": \"root\"\n        }\n    ],\n    # 桶列表，可以形成树状结构\n    \"buckets\": [\n        {\n            \"id\": -1,\n            \"name\": \"default\",\n            \"type_id\": 10,\n            \"type_name\": \"root\",\n            \"weight\": 0,\n            \"alg\": \"straw2\",\n            \"hash\": \"rjenkins1\",\n            \"items\": []\n        }\n        # 加入一个OSD节点（基于目录），自动生成如下两个Bucket：\n        {                                                                                                                                                                      \n            \"id\": -2,                                                                                                                                                          \n            \"name\": \"k8s-10-5-38-25\",                                                                                                                                          \n            \"type_id\": 1,                                                                                                                                                      \n            \"type_name\": \"host\",                                                                                                                                               \n            \"weight\": 55050,                                                                                                                                                   \n            \"alg\": \"straw2\",                                                                                                                                                   \n            \"hash\": \"rjenkins1\",                                                                                                                                               \n            \"items\": [                                                                                                                                                         \n                {                                                                                                                                                              \n                    \"id\": 0,                                                                                                                                                   \n                    \"weight\": 55050,                                                                                                                                           \n                    \"pos\": 0                                                                                                                                                   \n                }                                                                                                                                                              \n            ]                                                                                                                                                                  \n        },                                                                                                                                                                     \n        {                                                                                                                                                                      \n            \"id\": -3,                                                                                                                                                          \n            \"name\": \"k8s-10-5-38-25~hdd\",                                                                                                                                      \n            \"type_id\": 1,                                                                                                                                                      \n            \"type_name\": \"host\",                                                                                                                                               \n            \"weight\": 55050,                                                                                                                                                   \n            \"alg\": \"straw2\",                                                                                                                                                   \n            \"hash\": \"rjenkins1\",                                                                                                                                               \n            \"items\": [                                                                                                                                                         \n                {\n                    \"id\": 0,\n                    \"weight\": 55050,\n                    \"pos\": 0\n                }\n            ]\n        },\n \n    ],\n    # 规则列表\n    \"rules\": [\n        {\n            \"rule_id\": 0,\n            \"rule_name\": \"replicated_rule\",\n            # 所属规则集\n            \"ruleset\": 0,\n            # 此规则是否用于RAID，取值replicated 或 raid4\n            \"type\": 1,\n            # 如果Pool的副本份数不在此范围内，则CRUSH不会使用当前规则\n            \"min_size\": 1,\n            \"max_size\": 10,\n            \"steps\": [\n                {\n                    # 选择一个桶，并迭代其子树\n                    \"op\": \"take\",\n                    \"item\": -1,\n                    \"item_name\": \"default\"\n                },\n                {\n                    # 在上一步的基础上，确定每个副本如何放置\n                    \"op\": \"chooseleaf_firstn\",\n                    # 取值0，此Step适用pool-num-replicas个副本（所有）\n                    # 取值\u003e0 \u0026 \u003c pool-num-replicas，适用num个副本\n                    # 取值\u003c0，适用pool-num-replicas -num个副本\n                    \"num\": 0,\n                    \"type\": \"host\"\n                },\n                {\n                    \"op\": \"emit\"\n                }\n            ]\n        }\n    ],\n    # 可微调参数，以及一些状态信息\n    \"tunables\": {                                                                                                                                                                    \n        \"choose_local_tries\": 0,                                                                                                                                                     \n        \"choose_local_fallback_tries\": 0,                                                                                                                                            \n        \"choose_total_tries\": 50,                                                                                                                                                    \n        \"chooseleaf_descend_once\": 1,                                                                                                                                                \n        \"chooseleaf_vary_r\": 1,                                                                                                                                                      \n        \"chooseleaf_stable\": 1,                                                                                                                                                      \n        \"straw_calc_version\": 1,                                                                                                                                                     \n        \"allowed_bucket_algs\": 54,  \n        # 使用的Profile，执行ceph osd crush tunables hammer后此字段改变，连带其它tunables字段自动改变                                                                                                                                               \n        \"profile\": \"jewel\",                                                                                                                                                          \n        \"optimal_tunables\": 1,                                                                                                                                                       \n        \"legacy_tunables\": 0,                                                                                                                                                        \n        \"minimum_required_version\": \"jewel\",                                                                                                                                         \n        \"require_feature_tunables\": 1,                                                                                                                                               \n        \"require_feature_tunables2\": 1,                                                                                                                                              \n        \"has_v2_rules\": 0,                                                                                                                                                           \n        \"require_feature_tunables3\": 1,                                                                                                                                              \n        \"has_v3_rules\": 0,                                                                                                                                                           \n        \"has_v4_buckets\": 1,                                                                                                                                                         \n        \"require_feature_tunables5\": 1,\n        \"has_v5_rules\": 0\n    },\n    \"choose_args\": {}\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125726-key3015",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411125726-key3015",
				"updated": "20230411125749"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "编辑Dump"
				}
			]
		},
		{
			"ID": "20230411125752-hs0o4hk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125752-hs0o4hk",
				"updated": "20230411125752"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "执行下面的命令，导出当前Map："
				}
			]
		},
		{
			"ID": "20230411125755-dthp7bq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125755-dthp7bq",
				"updated": "20230411125759"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd getcrushmap -o curshmap\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125804-zpk49cn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125804-zpk49cn",
				"updated": "20230411125804"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "然后，需要反编译为文本："
				}
			]
		},
		{
			"ID": "20230411125809-mnk07zn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125809-mnk07zn",
				"updated": "20230411125811"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "crushtool -d curshmap -o curshmap.src\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125814-g7iewap",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125814-g7iewap",
				"updated": "20230411125814"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "源文件内容示例："
				}
			]
		},
		{
			"ID": "20230411125823-0lnu9cz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125823-0lnu9cz",
				"updated": "20230411125824"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# begin crush map\ntunable choose_local_tries 0\ntunable choose_local_fallback_tries 0\ntunable choose_total_tries 50\ntunable chooseleaf_descend_once 1\ntunable chooseleaf_vary_r 1\ntunable straw_calc_version 1\ntunable allowed_bucket_algs 54\n \n# devices\n \n# types\ntype 0 osd\ntype 1 host\ntype 2 chassis\ntype 3 rack\ntype 4 row\ntype 5 pdu\ntype 6 pod\ntype 7 room\ntype 8 datacenter\ntype 9 region.Values.storageclass.fsType\ntype 10 root\n \n# buckets\nroot default {\n        id -1           # do not change unnecessarily\n        # weight 0.000\n        alg straw2       \n        hash 0  # rjenkins1\n}\n# rules\nrule replicated_rule {\n        id 0\n        type replicated\n        min_size 1\n        max_size 10\n        step take default\n        step chooseleaf firstn 0 type host\n        step emit\n}\n \n# end crush map\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125837-131yk09",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125837-131yk09",
				"updated": "20230411125837"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "我们可以根据实际需要，对源文件进行修改，例如将算法改为straw，解决CentOS 7上CEPH_FEATURE_CRUSH_V4 1000000000000特性不满足的问题："
				}
			]
		},
		{
			"ID": "20230411125845-hzae8qq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125845-hzae8qq",
				"updated": "20230411125849"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "sed -i 's/straw2/straw/g' curshmap.src\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125855-iifk7ca",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125855-iifk7ca",
				"updated": "20230411125855"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "修改源文件完毕后，执行下面的命令编译："
				}
			]
		},
		{
			"ID": "20230411125858-dmo8l4h",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125858-dmo8l4h",
				"updated": "20230411125901"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "crushtool -c curshmap.src -o curshmap\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125905-swt35aa",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125905-swt35aa",
				"updated": "20230411125905"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "最后，注入最新编译的Map："
				}
			]
		},
		{
			"ID": "20230411125910-rxsehpv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125910-rxsehpv",
				"updated": "20230411125915"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " ceph osd setcrushmap -i curshmap\n# 会输出修订版号 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411125918-jwn6ph2",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411125918-jwn6ph2",
				"updated": "20230411125932"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.4  "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修改设备类型"
				}
			]
		},
		{
			"ID": "20230411125940-o3lijah",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411125940-o3lijah",
				"updated": "20230411125940"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "默认情况下，Ceph自动根据硬件类型，设置OSD的设备类型为hdd, ssd或nvme。你可以手工进行设置："
				}
			]
		},
		{
			"ID": "20230411125936-xy192qb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411125936-xy192qb",
				"updated": "20230411125951"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 你需要移除当前设置的设备类型，才能重新设置\nceph osd crush rm-device-class \u003cosd-name\u003e [...]\n# 示例\nceph osd crush rm-device-class osd.3 osd.4 osd.5 osd.6 osd.7 osd.8 osd.0 osd.10 osd.1 osd.12 osd.2 osd.13 \n \n \nceph osd crush set-device-class \u003cclass\u003e \u003cosd-name\u003e [...]\n# 示例\nceph osd crush set-device-class ssd osd.3 osd.4 osd.5 osd.6 osd.7 osd.8 osd.0 osd.10 osd.1 osd.12 osd.2 osd.13 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130056-rosk12s",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130056-rosk12s",
				"updated": "20230411130100"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "查看规则"
				}
			]
		},
		{
			"ID": "20230411130105-gc5d7h9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130105-gc5d7h9",
				"updated": "20230411130105"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "列出集群中的CRUSH rule："
				}
			]
		},
		{
			"ID": "20230411130106-btp8p9u",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130106-btp8p9u",
				"updated": "20230411130111"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush rule ls\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130116-fufa4c9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130116-fufa4c9",
				"updated": "20230411130116"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Dump出规则的内容："
				}
			]
		},
		{
			"ID": "20230411130117-xryeo3x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130117-xryeo3x",
				"updated": "20230411130123"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush rule dump\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130124-yo3ikgd",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130124-yo3ikgd",
				"updated": "20230411130131"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.6 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "删除规则"
				}
			]
		},
		{
			"ID": "20230411130134-bpq4tnv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130134-bpq4tnv",
				"updated": "20230411130138"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush rule rm replicated_rule_ssd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130145-44edpm4",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130145-44edpm4",
				"updated": "20230411130154"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.7 创建规则"
				}
			]
		},
		{
			"ID": "20230411130200-lgz61jt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130200-lgz61jt",
				"updated": "20230411130200"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "创建一个规则，仅仅使用指定类型的设备："
				}
			]
		},
		{
			"ID": "20230411130155-p1qcjmm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130155-p1qcjmm",
				"updated": "20230411130205"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush rule create-replicated \u003crule-name\u003e \u003croot\u003e \u003cfailure-domain\u003e \u003cclass\u003e\n# 示例：仅仅使用ssd类型的设备，失败域为host，也就是数据副本必须位于不同的主机上\nceph osd crush rule create-replicated replicated_rule_ssd default host ssd\nceph osd crush rule create-replicated replicated_rule_hdd default host hdd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130226-faf35ip",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130226-faf35ip",
				"updated": "20230411130234"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.8 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "应用规则"
				}
			]
		},
		{
			"ID": "20230411130248-sdwj2pz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130248-sdwj2pz",
				"updated": "20230411130249"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "为存储池指定所使用的规则："
				}
			]
		},
		{
			"ID": "20230411130235-hlz1k9y",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130235-hlz1k9y",
				"updated": "20230411130244"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd pool set \u003cpool-name\u003e crush_rule \u003crule-name\u003e\n# 修改规则\nceph osd pool set rbd-ssd crush_rule replicated_rule_ssd\n# 创建存储池时指定规则\nceph osd pool create rbd-ssd 384 replicated replicated_rule_ssd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130230-8m6ku44",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130230-8m6ku44",
				"updated": "20230411130307"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.9 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "编辑规则"
				}
			]
		},
		{
			"ID": "20230411130312-8iz3yhf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130312-8iz3yhf",
				"updated": "20230411130313"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "CRUSH rule的语法如下："
				}
			]
		},
		{
			"ID": "20230411130314-vr8fu20",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130314-vr8fu20",
				"updated": "20230411130325"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " rule \u003crulename\u003e {\n        ruleset \u003cruleset\u003e\n        type [ replicated | erasure ]\n        min_size \u003cmin-size\u003e\n        max_size \u003cmax-size\u003e\n        # 根据桶名称来选取CRUSH子树，并迭代，可限定设备类型\n        step take \u003cbucket-name\u003e [class \u003cdevice-class\u003e]\n        # choose：选择指定数量、类型的桶\n        # chooseleaf：选择指定数量、类型的桶，并选择每个这些桶的一个叶子节点\n        step [choose|chooseleaf] [firstn|indep] \u003cN\u003e \u003cbucket-type\u003e\n        step emit\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130333-vdmt256",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130333-vdmt256",
				"updated": "20230411130333"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "示例一，将主副本存放在SSD中，第二副本存放在HDD中："
				}
			]
		},
		{
			"ID": "20230411130335-j46gj6x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130335-j46gj6x",
				"updated": "20230411130341"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rule ssd-primary-affinity {\n    ruleset 0\n    type replicated\n    min_size 2\n    max_size 3\n    # 选择名为SSD的桶\n    step take ssd\n    # 在上述桶中的host类型的子树中选择叶子节点，存储1个副本（第一个）\n    step chooseleaf firstn 1 type host\n    # 执行\n    step emit\n    # 选择名为HDD的桶\n    step take hdd\n    # 在上述桶中的host类型的子树中选择叶子节点，存储N-1个副本（所有其它副本）\n    step chooseleaf firstn -1 type host\n    step emit\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130342-20okmeo",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130342-20okmeo",
				"updated": "20230411130352"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": " 示例二，在第一个机架上存储两个副本，第二个机架上存储一个副本："
				}
			]
		},
		{
			"ID": "20230411130355-yko6zo7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130355-yko6zo7",
				"updated": "20230411130409"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " rule 3_rep_2_racks {\n   ruleset 1\n   type replicated\n   min_size 2\n   max_size 3\n   step take default\n   # 选择一个Rack，存储2个副本\n   step choose firstn 2 type rack\n   # 在上述选定的Rack中选择Host\n   step chooseleaf firstn 2 type host\n   step emit\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130416-04w9mu1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130416-04w9mu1",
				"updated": "20230411130424"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.10 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "增加OSD"
				}
			]
		},
		{
			"ID": "20230411130427-2w7wk28",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130427-2w7wk28",
				"updated": "20230411130428"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果要添加OSD到CRUSH map中，执行："
				}
			]
		},
		{
			"ID": "20230411130437-qwqqvcw",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130437-qwqqvcw",
				"updated": "20230411130440"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush set {name} {weight} root={root} [{bucket-type}={bucket-name} ...]\n# 示例\nceph osd crush set osd.14 0 host=xenial-100\nceph osd crush set osd.0 1.0 root=default datacenter=dc1 room=room1 row=foo rack=bar host=foo-bar-1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130445-fawnqu7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130445-fawnqu7",
				"updated": "20230411130449"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.11 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "调整OSD权重"
				}
			]
		},
		{
			"ID": "20230411130449-c0v3deo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130449-c0v3deo",
				"updated": "20230411130455"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush reweight {name} {weight}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130500-81hegw3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130500-81hegw3",
				"updated": "20230411130513"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.12 移除OSD"
				}
			]
		},
		{
			"ID": "20230411130514-nvxnzki",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130514-nvxnzki",
				"updated": "20230411130521"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush remove {name}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130522-q81rese",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130522-q81rese",
				"updated": "20230411130529"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.13 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "增加Bucket"
				}
			]
		},
		{
			"ID": "20230411130530-wiqekgn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130530-wiqekgn",
				"updated": "20230411130535"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush add-bucket {bucket-name} {bucket-type}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130528-avvb4zw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130528-avvb4zw",
				"updated": "20230411130552"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.14 移动Bucket"
				}
			]
		},
		{
			"ID": "20230411130557-evqibym",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130557-evqibym",
				"updated": "20230411130602"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush move {bucket-name} {bucket-type}={bucket-name}, [...]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130603-pfh4uft",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130603-pfh4uft",
				"updated": "20230411130612"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.15 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "移除Bucket"
				}
			]
		},
		{
			"ID": "20230411130613-h9zimai",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130613-h9zimai",
				"updated": "20230411130619"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd crush remove {bucket-name} \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130620-mdhmrzi",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130620-mdhmrzi",
				"updated": "20230411130628"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.16 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "调整Tunable"
				}
			]
		},
		{
			"ID": "20230411130628-tazti24",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130628-tazti24",
				"updated": "20230411130636"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 自动优化\nceph osd crush tunables optimal\n# 最大兼容性，存在老旧内核的cephfs/rbd客户端时\nceph osd crush tunables legacy\n \n \n# 选择一个PROFILE，例如jewel\nceph osd crush tunables {PROFILE} \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130643-pl1wiwj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130643-pl1wiwj",
				"updated": "20230411130652"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.17 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "避免作为主OSD"
				}
			]
		},
		{
			"ID": "20230411130647-cfal4lj",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130647-cfal4lj",
				"updated": "20230411130658"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# weight在0-1之间，默认1，值越小，CRUSH 越避免将目标OSD作为主\nceph osd primary-affinity \u003cosd-id\u003e \u003cweight\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130700-a9g2x5o",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411130700-a9g2x5o",
				"updated": "20230411130709"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "17.18 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "分配Pool到特定OSD"
				}
			]
		},
		{
			"ID": "20230411130716-utqiuds",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130716-utqiuds",
				"updated": "20230411130716"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "使用CRUSH rule，可以限定某个Pool仅仅使用一部分OSD："
				}
			]
		},
		{
			"ID": "20230411130710-oy1h04c",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411130710-oy1h04c",
				"updated": "20230411130748"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# SSD主机\nhost ceph-osd-ssd-server-1 {\n      id -1\n      alg straw\n      hash 0\n      item osd.0 weight 1.00\n      item osd.1 weight 1.00\n}\n \n# HDD主机\nhost ceph-osd-hdd-server-1 {\n      id -3\n      alg straw\n      hash 0\n      item osd.4 weight 1.00\n      item osd.5 weight 1.00\n}\n \n# HDD的根桶\nroot hdd {\n      id -5\n      alg straw\n      hash 0\n      item ceph-osd-hdd-server-1 weight 2.00\n}\n \n# SSD的根桶\nroot ssd {\n      id -6\n      alg straw\n      hash 0\n      item ceph-osd-ssd-server-1 weight 2.00\n}\n \n \n# 仅仅使用HDD的规则\nrule hdd {\n      ruleset 3\n      type replicated\n      min_size 0\n      max_size 10\n      step take hdd\n      # 选择\n      step chooseleaf firstn 0 type host\n      step emit\n}\n \n# 仅仅使用SSD的规则\nrule ssd {\n      ruleset 4\n      type replicated\n      min_size 0\n      max_size 4\n      step take ssd\n      step chooseleaf firstn 0 type host\n      step emit\n}\n \n# 在SSD上存储主副本，其它副本存放在HDD\nrule ssd-primary {\n      ruleset 5\n      type replicated\n      min_size 5\n      max_size 10\n      step take ssd\n      step chooseleaf firstn 1 type host\n      step emit\n      step take hdd\n      step chooseleaf firstn -1 type host\n      step emit\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411130756-3f8ihj4",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411130756-3f8ihj4",
				"updated": "20230411130815"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "18. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "修改日志尺寸"
				}
			]
		},
		{
			"ID": "20230411130823-i3tknrd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130823-i3tknrd",
				"updated": "20230411130823"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "前提条件："
				}
			]
		},
		{
			"ID": "20230411130823-5kpq96h",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411130823-5kpq96h",
				"updated": "20230411130823"
			},
			"Children": [
				{
					"ID": "20230411130823-4xxrpza",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411130823-4xxrpza"
					},
					"Children": [
						{
							"ID": "20230411130823-3p07550",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-3p07550"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "集群处于OK状态"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130823-q7hykxz",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411130823-q7hykxz"
					},
					"Children": [
						{
							"ID": "20230411130823-of49dz5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-of49dz5"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "所有PG处于active+clean状态"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411130823-d0mqilu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411130823-d0mqilu",
				"updated": "20230411130823"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "步骤，针对每个需要改变尺寸的OSD，一个个的处理："
				}
			]
		},
		{
			"ID": "20230411130823-4b2n9c3",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411130823-4b2n9c3",
				"updated": "20230411130901"
			},
			"Children": [
				{
					"ID": "20230411130823-45robap",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "MS4=",
						"Num": 1
					},
					"Properties": {
						"id": "20230411130823-45robap"
					},
					"Children": [
						{
							"ID": "20230411130823-oacw1ru",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-oacw1ru"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "修改Cephe配置，设置 "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "osd_journal_size"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "="
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "NEWSIZE"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130823-niyw0sn",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Mi4=",
						"Num": 2
					},
					"Properties": {
						"id": "20230411130823-niyw0sn"
					},
					"Children": [
						{
							"ID": "20230411130823-gq45z8z",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-gq45z8z"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "禁止数据迁移（防止OSD进入out状态）： "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ceph"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "osd"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "set"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "noout"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130823-0qn0mup",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "My4=",
						"Num": 3
					},
					"Properties": {
						"id": "20230411130823-0qn0mup"
					},
					"Children": [
						{
							"ID": "20230411130823-nlhz385",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-nlhz385"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "停止目标OSD实例"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130823-kclnyqr",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NC4=",
						"Num": 4
					},
					"Properties": {
						"id": "20230411130823-kclnyqr"
					},
					"Children": [
						{
							"ID": "20230411130823-4xdgx7p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-4xdgx7p",
								"updated": "20230411130844"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "刷出缓存： "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ceph"
								},
								{
									"Type": "NodeText",
									"Data": "-"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "osd"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "-"
								},
								{
									"Type": "NodeText",
									"Data": "i  "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "OSDID"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "--"
								},
								{
									"Type": "NodeText",
									"Data": "flush"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "-"
								},
								{
									"Type": "NodeText",
									"Data": "journal"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130823-5tnce9m",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "NS4=",
						"Num": 5
					},
					"Properties": {
						"id": "20230411130823-5tnce9m",
						"updated": "20230411130901"
					},
					"Children": [
						{
							"ID": "20230411130823-diz86ac",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130823-diz86ac"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "删除日志："
								}
							]
						},
						{
							"ID": "20230411130847-3kj474j",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411130847-3kj474j",
								"updated": "20230411130901"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": " # 基于Helm部署时，需要到宿主机上的osd_directory下寻找对应目录\ncd /var/lib/ceph/osd/ceph-osd.OSDID\nrm journal \n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411130912-fx7zn5e",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411130912-fx7zn5e",
				"updated": "20230411130938"
			},
			"Children": [
				{
					"ID": "20230411130920-0bp9pw3",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ni4=",
						"Num": 6
					},
					"Properties": {
						"id": "20230411130920-0bp9pw3"
					},
					"Children": [
						{
							"ID": "20230411130920-gha0fqz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130920-gha0fqz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建一个新的日志文件： "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "ceph"
								},
								{
									"Type": "NodeText",
									"Data": "-"
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "osd"
								},
								{
									"Type": "NodeText",
									"Data": " "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "--"
								},
								{
									"Type": "NodeText",
									"Data": "mkjournal "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "-"
								},
								{
									"Type": "NodeText",
									"Data": "i "
								},
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "OSDID"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130923-room6e6",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "Ny4=",
						"Num": 7
					},
					"Properties": {
						"id": "20230411130923-room6e6"
					},
					"Children": [
						{
							"ID": "20230411130923-7g3uijl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130923-7g3uijl"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "启动OSD"
								}
							]
						}
					]
				},
				{
					"ID": "20230411130926-mkkmroe",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OC4=",
						"Num": 8
					},
					"Properties": {
						"id": "20230411130926-mkkmroe",
						"updated": "20230411130938"
					},
					"Children": [
						{
							"ID": "20230411130926-t8rzbqg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130926-t8rzbqg"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "验证新的日志尺寸被使用："
								}
							]
						},
						{
							"ID": "20230411130934-y9j5a99",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411130934-y9j5a99",
								"updated": "20230411130938"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "# Helm安装的情况下，需要在OSD容器中执行\nceph --admin-daemon /var/run/ceph/ceph-osd.OSDID.asok config get osd_journal_size\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411130942-gytjahg",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1
			},
			"Properties": {
				"id": "20230411130942-gytjahg",
				"updated": "20230411130959"
			},
			"Children": [
				{
					"ID": "20230411130945-toqg6mi",
					"Type": "NodeListItem",
					"ListData": {
						"Typ": 1,
						"Delimiter": 46,
						"Marker": "OS4=",
						"Num": 9
					},
					"Properties": {
						"id": "20230411130945-toqg6mi",
						"updated": "20230411130959"
					},
					"Children": [
						{
							"ID": "20230411130946-21a6bo6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20230411130946-21a6bo6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "确保集群处于OK状态，所有PG处于active+clean状态"
								}
							]
						},
						{
							"ID": "20230411130955-t0vf7z6",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"Properties": {
								"id": "20230411130955-t0vf7z6",
								"updated": "20230411130959"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```"
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker",
									"CodeBlockInfo": "XA=="
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "处理完所有OSD后，执行：  ceph osd unset noout，清除noout标记\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20230411131002-ndvsba2",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411131002-ndvsba2",
				"updated": "20230411131020"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "19. 性能测试"
				}
			]
		},
		{
			"ID": "20230411131041-m99btth",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131041-m99btth",
				"updated": "20230411131106"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "19.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "rbd bench"
				}
			]
		},
		{
			"ID": "20230411131023-qoa2lqr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131023-qoa2lqr",
				"updated": "20230411131035"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 默认4K，可以--io-size定制\n# 默认16线程，可以--io-threads定制\n \n# 随机读\nrbd bench -p rbd-hdd --image benchmark --io-total 128M --io-type read --io-pattern rand\n# elapsed: 25 ops:  32768 ops/sec:  1284.01  bytes/sec: 5259316.53\n# elapsed: 15 ops: 327680 ops/sec: 20891.46  bytes/sec: 85571410.91\n# HDD差20倍\n \n# 顺序读\nrbd bench -p rbd-hdd --image benchmark --io-total 64M --io-type read --io-pattern seq\n# elapsed: 46 ops:  163840 ops/sec:   3528.06  bytes/sec: 14450938.87\n# elapsed: 45 ops: 1638400 ops/sec:   35672.87 bytes/sec: 146116057.32\n# HDD差10倍\n \n# 随机写\nrbd bench -p rbd-hdd --image benchmark --io-total 128M --io-type write --io-pattern rand\n# elapsed: 85  ops:  32768 ops/sec: 383.24  bytes/sec: 1569743.22\n# elapsed: 111 ops: 327680 ops/sec: 2936.78 bytes/sec: 12029055.24\n# HDD差7倍\n \n# 顺序写\nrbd bench -p rbd-hdd --image benchmark --io-total 128M --io-type write --io-pattern seq\n# elapsed: 3  ops: 32768  ops/sec:  9382.16 bytes/sec: 38429334.91\n# elapsed: 17 ops: 327680 ops/sec: 18374.69 bytes/sec: 75262749.05\n# HDD差1倍\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131050-nekj982",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411131050-nekj982",
				"updated": "20230411131117"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "20. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "运行时修改参数"
				}
			]
		},
		{
			"ID": "20230411131112-so9z0as",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411131112-so9z0as",
				"updated": "20230411131121"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "要动态、临时（重启后消失）的修改组件的参数，可以使用tell命令。"
				}
			]
		},
		{
			"ID": "20230411131134-jhhf764",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131134-jhhf764",
				"updated": "20230411131147"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "20.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "控制恢复进程"
				}
			]
		},
		{
			"ID": "20230411131122-t3edf2g",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131122-t3edf2g",
				"updated": "20230411131131"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 临时修改所有OSD和恢复相关的选项\nceph tell osd.* injectargs '--osd-max-backfills 1'             # 并发回填操作数\nceph tell osd.* injectargs '--osd-recovery-threads 1'          # 恢复线程数量\nceph tell osd.* injectargs '--osd-recovery-op-priority 1'      # 恢复线程优先级  \nceph tell osd.* injectargs '--osd-client-op-priority 63'       # 客户端线程优先级\nceph tell osd.* injectargs '--osd-recovery-max-active 1'       # 最大活跃的恢复请求数 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131148-y4xkmz4",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411131148-y4xkmz4",
				"updated": "20230411131202"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "21. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理Watcher"
				}
			]
		},
		{
			"ID": "20230411131223-1r3eo9m",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131223-1r3eo9m",
				"updated": "20230411131227"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "21.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "加入黑名单"
				}
			]
		},
		{
			"ID": "20230411131223-uhrhk8c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20230411131223-uhrhk8c",
				"updated": "20230411131223"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以将RBD上的Watcher加入黑名单，这样可以解除RBD的Watcher，再其它机器上挂载RBD："
				}
			]
		},
		{
			"ID": "20230411131203-ywhglb2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131203-ywhglb2",
				"updated": "20230411131217"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rbd status  kubernetes-dynamic-pvc-22d9e659-6e31-11e8-92e5-c6b9f35768f0                                                                                           \n# Watchers:                                                                                                                                                                      \n#         watcher=10.0.3.1:0/158685765 client.3524447 cookie=18446462598732840965\n \n# 添加到黑名单\nceph osd blacklist add 10.0.3.1:0/158685765\n# blacklisting 10.0.3.1:0/158685765 until 2018-08-21 18:04:31.855791 (3600 sec)\n \nrbd status  kubernetes-dynamic-pvc-22d9e659-6e31-11e8-92e5-c6b9f35768f0\n# Watchers: none\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131240-34ep7m9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131240-34ep7m9",
				"updated": "20230411131254"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "21.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "显示黑名单"
				}
			]
		},
		{
			"ID": "20230411131254-5f1q88e",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131254-5f1q88e",
				"updated": "20230411131306"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd blacklist ls\n# listed 1 entries\n# 10.0.3.1:0/158685765 2018-08-21 18:04:31.855791\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131312-vwvljho",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131312-vwvljho",
				"updated": "20230411131318"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "21.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "移除黑名单"
				}
			]
		},
		{
			"ID": "20230411131319-ma4xyod",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131319-ma4xyod",
				"updated": "20230411131325"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd blacklist rm 10.0.3.1:0/158685765\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131326-29k6q1d",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131326-29k6q1d",
				"updated": "20230411131339"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "21.4 清空黑名单"
				}
			]
		},
		{
			"ID": "20230411131342-p420own",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131342-p420own",
				"updated": "20230411131346"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph osd blacklist clear\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131356-q1mcm3e",
			"Type": "NodeHeading",
			"HeadingLevel": 1,
			"Properties": {
				"id": "20230411131356-q1mcm3e",
				"updated": "20230411131405"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "RADOS管理"
				}
			]
		},
		{
			"ID": "20230411131404-ux06zkj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131404-ux06zkj",
				"updated": "20230411131417"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理池"
				}
			]
		},
		{
			"ID": "20230411131419-zn668fh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411131419-zn668fh",
				"updated": "20230411131425"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 列出池\nrados lspools\n.rgw.root\ndefault.rgw.control\ndefault.rgw.meta\ndefault.rgw.log\nrbd\nrbd-ssd\nrbd-hdd\n \n# 创建池pool-name，使用auid 123，使用crush规则4\nmkpool pool-name [123[ 4]] \n \n# 复制池的内容\ncppool pool-name dest-pool\n \n# 移除池\nrmpool pool-name pool-name --yes-i-really-really-mean-it\n \n# 清空池中对象\npurge pool-name --yes-i-really-really-mean-it\n \n# 显示每个池的对象数量、空间占用情况\nrados df\n \n# 列出池中对象\nrados ls -p rbd\n \n# 将池的所有者设置为auid 123\nrados chown 123  -p rbd\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411131446-apefso1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411131446-apefso1",
				"updated": "20230411134520"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.2 管理快照"
				}
			]
		},
		{
			"ID": "20230411134520-1lxzn0d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134520-1lxzn0d",
				"updated": "20230411134524"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 列出池快照\nrados lssnap -p rbd\n \n# 创建池快照\nrados mksnap snap-name -p rbd\n \n# 删除池快照\nrados rmsnap mksnap snap-name -p rbd\n \n# 从快照中恢复对象\nrados rollback \u003cobj-name\u003e \u003csnap-name\u003e\n \n# 列出对象的快照\nrados listsnaps \u003cobj-name\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134528-vfffssp",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134528-vfffssp",
				"updated": "20230411134535"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "读写对象"
				}
			]
		},
		{
			"ID": "20230411134535-o5xi9q0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134535-o5xi9q0",
				"updated": "20230411134552"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " # 读对象\nrados get object-name /tmp/obj -p rbd\n \n# 使用指定的偏移量写对象\nrados put object-name /tmp/obj --offset offset\n \n# 附加内容到对象\nrados append \u003cobj-name\u003e [infile\n \n# 截断对象为指定的长度\nrados truncate \u003cobj-name\u003e length\n \n# 创建对象\nrados create \u003cobj-name\u003e\n \n# 移除对象\nrados rm \u003cobj-name\u003e ...[--force-full]\n \n# 复制对象\nrados cp \u003cobj-name\u003e [target-obj]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134559-7sw5ff1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134559-7sw5ff1",
				"updated": "20230411134614"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.4 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "读写对象属性"
				}
			]
		},
		{
			"ID": "20230411134614-zvl97gi",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134614-zvl97gi",
				"updated": "20230411134626"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " # 列出扩展属性\nrados listxattr \u003cobj-name\u003e\n# 获取扩展属性\nrados getxattr \u003cobj-name\u003e attr\n# 设置扩展属性\nrados setxattr \u003cobj-name\u003e attr val\n# 移除扩展属性\nrados rmxattr \u003cobj-name\u003e attr\n \n# 显示属性\nrados stat \u003cobj-name\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134631-gqbevbr",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134631-gqbevbr",
				"updated": "20230411134635"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.5 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "列出不一致PG"
				}
			]
		},
		{
			"ID": "20230411134635-1klw2qg",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134635-1klw2qg",
				"updated": "20230411134643"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rados list-inconsistent-pg pool-name\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134644-hewdeuw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134644-hewdeuw",
				"updated": "20230411134658"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.6 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "列出不一致对象"
				}
			]
		},
		{
			"ID": "20230411134700-67awesz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134700-67awesz",
				"updated": "20230411134706"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rados list-inconsistent-obj  40.14  --format=json-pretty\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134707-4aadbp0",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134707-4aadbp0",
				"updated": "20230411134715"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "22.7 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "列出不一致快照"
				}
			]
		},
		{
			"ID": "20230411134716-ilth6bg",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134716-ilth6bg",
				"updated": "20230411134723"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "rados list-inconsistent-snapset 40.14 \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134726-vy4tnac",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134726-vy4tnac",
				"updated": "20230411134742"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "23. "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "配置仪表盘"
				}
			]
		},
		{
			"ID": "20230411134743-nkgiih3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134743-nkgiih3",
				"updated": "20230411134750"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "23.1 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "启用仪表盘"
				}
			]
		},
		{
			"ID": "20230411134754-0r1jex1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134754-0r1jex1",
				"updated": "20230411134756"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph mgr module enable dashboard\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134758-o8lmbb7",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134758-o8lmbb7",
				"updated": "20230411134805"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "23.2 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "SSL支持配置"
				}
			]
		},
		{
			"ID": "20230411134812-aka0x6x",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134812-aka0x6x",
				"updated": "20230411134815"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 使用自签名证书\nceph dashboard create-self-signed-cert\n \n# 使用外部提供的证书\nceph dashboard set-ssl-certificate -i dashboard.crt\nceph dashboard set-ssl-certificate-key -i dashboard.key\n \n# 禁用SSL\nceph config set mgr mgr/dashboard/ssl false\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134821-opyjfvm",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134821-opyjfvm",
				"updated": "20230411134834"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "23.3 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "设置用户"
				}
			]
		},
		{
			"ID": "20230411134835-j33kwmu",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134835-j33kwmu",
				"updated": "20230411134844"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ceph dashboard ac-user-create admin  administrator -i - \u003c\u003c\u003c\"pswd\"\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20230411134845-k39p8gx",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20230411134845-k39p8gx",
				"updated": "20230411134855"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "23.4 "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "管理RGW"
				}
			]
		},
		{
			"ID": "20230411134903-tvbs3hw",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20230411134903-tvbs3hw",
				"updated": "20230411134911"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "XA=="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "# 创建用户\nradosgw-admin user create --uid=rgw --display-name=rgw --system\n \n# 设置access_key和secret_key\nceph dashboard set-rgw-api-access-key -i - \u003c\u003c\u003c \"$(radosgw-admin user info --uid=rgw | jq -r .keys[0].access_key)\"\nceph dashboard set-rgw-api-secret-key -i - \u003c\u003c\u003c \"$(radosgw-admin user info --uid=rgw | jq -r .keys[0].secret_key)\"\n \n# 禁用SSL校验\nceph dashboard set-rgw-api-ssl-verify False\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		}
	]
}