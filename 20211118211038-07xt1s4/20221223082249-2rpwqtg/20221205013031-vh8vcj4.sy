{
	"ID": "20221205013031-vh8vcj4",
	"Spec": "1",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20221205013031-vh8vcj4",
		"title": "linux运维、架构之路-MongoDB集群部署 - 闫新江 - 博客园",
		"updated": "20221205013031"
	},
	"Children": [
		{
			"ID": "20221205013031-t2mmq7j",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20221205013031-t2mmq7j"
			}
		},
		{
			"ID": "20221205013031-ab9q9nc",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221205013031-ab9q9nc"
			},
			"Children": [
				{
					"ID": "20221205013031-wu3rehr",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-wu3rehr"
					},
					"Children": [
						{
							"ID": "20221205013031-ziyqkwb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-ziyqkwb"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "a",
									"TextMarkAHref": "https://www.cnblogs.com/yanxinjiang/p/14600568.html",
									"TextMarkTextContent": "https://www.cnblogs.com/yanxinjiang/p/14600568.html"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-k0yrxnt",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-k0yrxnt"
					},
					"Children": [
						{
							"ID": "20221205013031-lxgo82h",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-lxgo82h"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "一、集群模式介绍 Mongodb是时下流行的NoSql数据库，它的存储方式是文档式存储，并不是Key-Value形式。MongoDB 集群部署有三种模式，分别为主从复制（Master-Slaver）、"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-8eiibaf",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-8eiibaf"
					},
					"Children": [
						{
							"ID": "20221205013031-o3in8hl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-o3in8hl"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "2022-12-05 01:30:31"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-gtqtg3x",
			"Type": "NodeThematicBreak",
			"Properties": {
				"id": "20221205013031-gtqtg3x"
			}
		},
		{
			"ID": "20221205013031-joidy7f",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-joidy7f"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "一、集群模式介绍"
				}
			]
		},
		{
			"ID": "20221205013031-o3manhk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-o3manhk"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "**            Mongodb是时下流行的NoSql数据库，它的存储方式是文档式存储，并不是Key-Value形式。MongoDB 集群部署有三种模式，分别为主从复制（Master-Slaver）、副本集（Replica Set）和分片（Sharding）模式。**"
				}
			]
		},
		{
			"ID": "20221205013031-e4qnhqx",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221205013031-e4qnhqx"
			},
			"Children": [
				{
					"ID": "20221205013031-o6u9ygr",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-o6u9ygr"
					},
					"Children": [
						{
							"ID": "20221205013031-qhfjwhi",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-qhfjwhi"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Master-Slaver 是一种主从副本的模式，目前已经不推荐使用。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-am5ildk",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-am5ildk"
					},
					"Children": [
						{
							"ID": "20221205013031-c3f6jcn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-c3f6jcn"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Replica Set 模式取代了 Master-Slaver 模式，是一种互为主从的关系。Replica Set 将数据复制多份保存，不同服务器保存同一份数据，在出现故障时自动切换，实现故障转移，在实际生产中非常实用。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-czqngx6",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-czqngx6"
					},
					"Children": [
						{
							"ID": "20221205013031-0538b2t",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-0538b2t"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Sharding 模式适合处理大量数据，它将数据分开存储，不同服务器保存不同的数据，所有服务器数据的总和即为整个数据集。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-ygoik96",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-ygoik96"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "Sharding 模式追求的是高性能，而且是三种集群中最复杂的。在实际生产环境中，通常将 Replica Set 和 Sharding 两种技术结合使用。"
				}
			]
		},
		{
			"ID": "20221205013031-n44nikn",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-n44nikn"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "二、部署Replica Set集群"
				}
			]
		},
		{
			"ID": "20221205013031-nptpzeb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-nptpzeb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "**              Replica Set集群当中包含了多份数据，保证主节点挂掉了，备节点能继续提供数据服务，提供的前提就是数据需要和主节点一致。**"
				}
			]
		},
		{
			"ID": "20221205013031-fmqw80g",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-fmqw80g"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "https://img2020.cnblogs.com/blog/1188655/202103/1188655-20210331100851297-150543219.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-alqxtsw",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221205013031-alqxtsw"
			},
			"Children": [
				{
					"ID": "20221205013031-2ikdrve",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-2ikdrve"
					},
					"Children": [
						{
							"ID": "20221205013031-grqvqis",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-grqvqis"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "Mongodb(M)表示主节点，Mongodb(S)表示备节点，Mongodb(A)表示仲裁节点。主备节点存储数据，仲裁节点不存储数据。客户端同时连接主节点与备节点，不连接仲裁节点。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-g2jmi7v",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-g2jmi7v"
					},
					"Children": [
						{
							"ID": "20221205013031-rcfb59v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-rcfb59v"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "默认设置主节点提供所有增删查改服务，备节点不提供任何服务。但是可以通过设置使备节点提供查询服务，这样就可以减少主节点的压力，当客户端进行数据查询时，请求自动转到备节点上。这个设置叫做Read Preference Modes。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-qubiv0c",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-qubiv0c"
					},
					"Children": [
						{
							"ID": "20221205013031-dtdv9xg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-dtdv9xg"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "仲裁节点是一种特殊的节点，它本身并不存储数据，主要的作用是决定哪一个备节点在主节点挂掉之后提升为主节点，所以客户端不需要连接此节点。这里虽然只有一个备节点，但是仍然需要一个仲裁节点来提升备节点级别。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-mgvplet",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-mgvplet"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "1、下载软件包"
				}
			]
		},
		{
			"ID": "20221205013031-l4nyvf8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-l4nyvf8"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "官网地址：https://www.mongodb.com/try/download/community"
				}
			]
		},
		{
			"ID": "20221205013031-sog7sp1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-sog7sp1"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "https://img2020.cnblogs.com/blog/1188655/202103/1188655-20210331101528306-363585240.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-osvmsb9",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-osvmsb9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①创建所需目录"
				}
			]
		},
		{
			"ID": "20221205013031-fr2at1b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-fr2at1b"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /app/mongodb4.2/{logs,conf,data}\nmkdir -p /app/mongodb4.2/data/{master,slaver,arbiter}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-2snmjwp",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-2snmjwp"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②解压软件包"
				}
			]
		},
		{
			"ID": "20221205013031-mmjzbev",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-mmjzbev"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "tar xf mongodb-linux-x86_64-rhel70-4.2.13.tgz -C /app/mongodb4.2/\nmv /app/mongodb4.2/mongodb-linux-x86_64-rhel70-4.2.13/* /app/mongodb4.2/\nrm -fr /app/mongodb4.2/mongodb-linux-x86_64-rhel70-4.2.13\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-4rd62rb",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-4rd62rb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③创建MongoDB配置文件、日志文件"
				}
			]
		},
		{
			"ID": "20221205013031-r5ibnw8",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-r5ibnw8"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "touch /app/mongodb4.2/logs/mongodb.log\ntouch /app/mongodb4.2/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-z9ucwda",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-z9ucwda"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④配置mongodb.conf"
				}
			]
		},
		{
			"ID": "20221205013031-p8y4y8s",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-p8y4y8s"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-c07yt53",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-c07yt53"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "port=27018\n#以后台方式运行\nfork=true\n#数据库日志存放目录\nlogpath=/app/mongodb4.2/logs/mongodb.log\n#以追加的方式记录日志\nlogappend=true\n#replica set的名字\nreplSet=MongoDB-rs\n#为每一个数据库按照数据库名建立文件夹存放\ndirectoryperdb=true\n#mongodb操作日志文件的最大大小。单位为Mb，默认为硬盘剩余空间的5%\noplogSize=10000\n#数据库数据存放目录\ndbpath=/app/mongodb4.2/data/master   #分发到节点，此处需要修改\n#开启用户认证true\nauth=false\n#过滤一些无用的日志信息，若需要调试使用请设置为false\nquiet=true\n#auth=true\n##mongodb所绑定的ip地址\nbind_ip = 0.0.0.0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-79v3tl9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-79v3tl9"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-7fn36xi",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-7fn36xi"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "⑤分发软件到节点"
				}
			]
		},
		{
			"ID": "20221205013031-2aqfd0s",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-2aqfd0s"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp -rp mongodb4.2 192.168.56.175:/app/\nscp -rp mongodb4.2 192.168.56.182:/app/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-sdh4aph",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-sdh4aph"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2、启动MongoDB服务"
				}
			]
		},
		{
			"ID": "20221205013031-kdaoea7",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-kdaoea7"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①启动服务(三个节点都执行)"
				}
			]
		},
		{
			"ID": "20221205013031-121w301",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-121w301"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[root@k8s-node1 app]# /app/mongodb4.2/bin/mongod -f /app/mongodb4.2/conf/mongodb.conf\nabout to fork child process, waiting until server is ready for connections.\nforked process: 3317\nchild process started successfully, parent exiting\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-l4sfkt8",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-l4sfkt8"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②配置主、备、仲裁节点"
				}
			]
		},
		{
			"ID": "20221205013031-c9bnnqm",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-c9bnnqm"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "连接任意一台节点"
				}
			]
		},
		{
			"ID": "20221205013031-kq1v71s",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-kq1v71s"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-djx1kup",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-djx1kup"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[root@k8s-node1 app]# /app/mongodb4.2/bin/mongo 192.168.56.175:27018\nMongoDB shell version v4.2.13\nconnecting to: mongodb://192.168.56.175:27018/test?compressors=disabled\u0026gssapiServiceName=mongodb\nImplicit session: session { \"id\" : UUID(\"01ac5aa9-4ae0-446e-bda7-084d12c48683\") }\nMongoDB server version: 4.2.13\nWelcome to the MongoDB shell.\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-myselzc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-myselzc"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-z5y56c2",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-z5y56c2"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "执行节点配置命令"
				}
			]
		},
		{
			"ID": "20221205013031-af5nwcp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-af5nwcp"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-2yo8oyy",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-2yo8oyy"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "\u003e use admin\nswitched to db admin\n\u003e cfg={ _id:\"MongoDB-rs\", members:[ {_id:0,host:'192.168.56.175:27018',priority:2}, {_id:1,host:'192.168.56.176:27018',priority:1}, {_id:2,host:'192.168.56.182:27018',arbiterOnly:true}] };\n{\n    \"_id\" : \"MongoDB-rs\",\n    \"members\" : [\n        {\n            \"_id\" : 0,\n            \"host\" : \"192.168.56.175:27018\",\n            \"priority\" : 2\n        },\n        {\n            \"_id\" : 1,\n            \"host\" : \"192.168.56.176:27018\",\n            \"priority\" : 1\n        },\n        {\n            \"_id\" : 2,\n            \"host\" : \"192.168.56.182:27018\",\n            \"arbiterOnly\" : true\n        }\n    ]\n}\n\u003e rs.initiate(cfg) #使配置生效\n{ \"ok\" : 1 }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-efatges",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-efatges"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-9h3up7x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-9h3up7x"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "cfg是可以任意的名字,相当于定义一个变量。"
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "_id表示replica set的名字"
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "members里包含的是所有节点的地址以及优先级。优先级最高的即成为主节点，即这里的192.168.56.175:27018。"
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "特别注意第三个节点的配置arbiterOnly:true，这个千万不能少了，不然主备模式就不能生效。"
				}
			]
		},
		{
			"ID": "20221205013031-okof5u1",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-okof5u1"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③查看集群状态"
				}
			]
		},
		{
			"ID": "20221205013031-qgjq0az",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-qgjq0az"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-wavbbpt",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-wavbbpt"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "MongoDB-rs:SECONDARY\u003e rs.status()\n{\n    \"set\" : \"MongoDB-rs\",\n    \"date\" : ISODate(\"2021-03-31T03:04:11.467Z\"),\n    \"myState\" : 1,\n    \"term\" : NumberLong(1),\n    \"syncingTo\" : \"\",\n    \"syncSourceHost\" : \"\",\n    \"syncSourceId\" : -1,\n    \"heartbeatIntervalMillis\" : NumberLong(2000),\n    \"majorityVoteCount\" : 2,\n    \"writeMajorityCount\" : 2,\n    \"optimes\" : {\n        \"lastCommittedOpTime\" : {\n            \"ts\" : Timestamp(1617159844, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"lastCommittedWallTime\" : ISODate(\"2021-03-31T03:04:04.141Z\"),\n        \"readConcernMajorityOpTime\" : {\n            \"ts\" : Timestamp(1617159844, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"readConcernMajorityWallTime\" : ISODate(\"2021-03-31T03:04:04.141Z\"),\n        \"appliedOpTime\" : {\n            \"ts\" : Timestamp(1617159844, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"durableOpTime\" : {\n            \"ts\" : Timestamp(1617159844, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"lastAppliedWallTime\" : ISODate(\"2021-03-31T03:04:04.141Z\"),\n        \"lastDurableWallTime\" : ISODate(\"2021-03-31T03:04:04.141Z\")\n    },\n    \"lastStableRecoveryTimestamp\" : Timestamp(1617159814, 1),\n    \"lastStableCheckpointTimestamp\" : Timestamp(1617159814, 1),\n    \"electionCandidateMetrics\" : {\n        \"lastElectionReason\" : \"electionTimeout\",\n        \"lastElectionDate\" : ISODate(\"2021-03-31T02:59:34.104Z\"),\n        \"electionTerm\" : NumberLong(1),\n        \"lastCommittedOpTimeAtElection\" : {\n            \"ts\" : Timestamp(0, 0),\n            \"t\" : NumberLong(-1)\n        },\n        \"lastSeenOpTimeAtElection\" : {\n            \"ts\" : Timestamp(1617159562, 1),\n            \"t\" : NumberLong(-1)\n        },\n        \"numVotesNeeded\" : 2,\n        \"priorityAtElection\" : 2,\n        \"electionTimeoutMillis\" : NumberLong(10000),\n        \"numCatchUpOps\" : NumberLong(0),\n        \"newTermStartDate\" : ISODate(\"2021-03-31T02:59:34.134Z\"),\n        \"wMajorityWriteAvailabilityDate\" : ISODate(\"2021-03-31T02:59:35.580Z\")\n    },\n    \"members\" : [\n        {\n            \"_id\" : 0,\n            \"name\" : \"192.168.56.175:27018\",\n            \"health\" : 1,\n            \"state\" : 1,\n            \"stateStr\" : \"PRIMARY\",\n            \"uptime\" : 820,\n            \"optime\" : {\n                \"ts\" : Timestamp(1617159844, 1),\n                \"t\" : NumberLong(1)\n            },\n            \"optimeDate\" : ISODate(\"2021-03-31T03:04:04Z\"),\n            \"syncingTo\" : \"\",\n            \"syncSourceHost\" : \"\",\n            \"syncSourceId\" : -1,\n            \"infoMessage\" : \"\",\n            \"electionTime\" : Timestamp(1617159574, 1),\n            \"electionDate\" : ISODate(\"2021-03-31T02:59:34Z\"),\n            \"configVersion\" : 1,\n            \"self\" : true,\n            \"lastHeartbeatMessage\" : \"\"\n        },\n        {\n            \"_id\" : 1,\n            \"name\" : \"192.168.56.176:27018\",\n            \"health\" : 1,\n            \"state\" : 2,\n            \"stateStr\" : \"SECONDARY\",\n            \"uptime\" : 288,\n            \"optime\" : {\n                \"ts\" : Timestamp(1617159844, 1),\n                \"t\" : NumberLong(1)\n            },\n            \"optimeDurable\" : {\n                \"ts\" : Timestamp(1617159844, 1),\n                \"t\" : NumberLong(1)\n            },\n            \"optimeDate\" : ISODate(\"2021-03-31T03:04:04Z\"),\n            \"optimeDurableDate\" : ISODate(\"2021-03-31T03:04:04Z\"),\n            \"lastHeartbeat\" : ISODate(\"2021-03-31T03:04:10.275Z\"),\n            \"lastHeartbeatRecv\" : ISODate(\"2021-03-31T03:04:09.717Z\"),\n            \"pingMs\" : NumberLong(1),\n            \"lastHeartbeatMessage\" : \"\",\n            \"syncingTo\" : \"192.168.56.175:27018\",\n            \"syncSourceHost\" : \"192.168.56.175:27018\",\n            \"syncSourceId\" : 0,\n            \"infoMessage\" : \"\",\n            \"configVersion\" : 1\n        },\n        {\n            \"_id\" : 2,\n            \"name\" : \"192.168.56.182:27018\",\n            \"health\" : 1,\n            \"state\" : 7,\n            \"stateStr\" : \"ARBITER\",\n            \"uptime\" : 288,\n            \"lastHeartbeat\" : ISODate(\"2021-03-31T03:04:10.275Z\"),\n            \"lastHeartbeatRecv\" : ISODate(\"2021-03-31T03:04:09.560Z\"),\n            \"pingMs\" : NumberLong(1),\n            \"lastHeartbeatMessage\" : \"\",\n            \"syncingTo\" : \"\",\n            \"syncSourceHost\" : \"\",\n            \"syncSourceId\" : -1,\n            \"infoMessage\" : \"\",\n            \"configVersion\" : 1\n        }\n    ],\n    \"ok\" : 1,\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1617159844, 1),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),\n            \"keyId\" : NumberLong(0)\n        }\n    },\n    \"operationTime\" : Timestamp(1617159844, 1)\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-z5vnf1b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-z5vnf1b"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-vtqfn0i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-vtqfn0i"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "至此Replica Set集群模式部署完毕"
				}
			]
		},
		{
			"ID": "20221205013031-3m85gjj",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-3m85gjj"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "三、增加安全认证机制KeyFile"
				}
			]
		},
		{
			"ID": "20221205013031-d6xt5bw",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-d6xt5bw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1、生成Key"
				}
			]
		},
		{
			"ID": "20221205013031-lnr65wm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-lnr65wm"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /app/mongodb4.2/key\nopenssl rand -base64 745 \u003e /app/mongodb4.2/key/mongodb-keyfile\nchmod 600 /app/mongodb4.2/key/mongodb-keyfile\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-r23fg91",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-r23fg91"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2、分发Key文件到节点"
				}
			]
		},
		{
			"ID": "20221205013031-9qrekga",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-9qrekga"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp /app/mongodb4.2/key/mongodb-keyfile 192.168.56.176:/app/mongodb4.2/key/\nscp /app/mongodb4.2/key/mongodb-keyfile 192.168.56.182:/app/mongodb4.2/key/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-t7vormp",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-t7vormp"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3、修改配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-ogctvtp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-ogctvtp"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "vim mongodb.conf\nkeyFile=/app/mongodb4.2/key/mongodb-keyfile\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-hzugat4",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-hzugat4"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4、启动服务"
				}
			]
		},
		{
			"ID": "20221205013031-col49w4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-col49w4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " /app/mongodb4.2/bin/mongod -f /app/mongodb4.2/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-o2pzbcy",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-o2pzbcy"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5、关闭服务"
				}
			]
		},
		{
			"ID": "20221205013031-vi5iw7p",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-vi5iw7p"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb4.2/bin/mongod -f /app/mongodb4.2/conf/mongodb.conf --shutdown\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-3gubflu",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-3gubflu"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6、查看集群状态"
				}
			]
		},
		{
			"ID": "20221205013031-sg0q1zu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-sg0q1zu"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-vymqwl0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-vymqwl0"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "MongoDB-rs:PRIMARY\u003e rs.status()\n{\n    \"set\" : \"MongoDB-rs\",\n    \"date\" : ISODate(\"2021-03-31T08:27:22.429Z\"),\n    \"myState\" : 1,\n    \"term\" : NumberLong(4),\n    \"syncingTo\" : \"\",\n    \"syncSourceHost\" : \"\",\n    \"syncSourceId\" : -1,\n    \"heartbeatIntervalMillis\" : NumberLong(2000),\n    \"majorityVoteCount\" : 2,\n    \"writeMajorityCount\" : 2,\n    \"optimes\" : {\n        \"lastCommittedOpTime\" : {\n            \"ts\" : Timestamp(1617179232, 1),\n            \"t\" : NumberLong(4)\n        },\n        \"lastCommittedWallTime\" : ISODate(\"2021-03-31T08:27:12.669Z\"),\n        \"readConcernMajorityOpTime\" : {\n            \"ts\" : Timestamp(1617179232, 1),\n            \"t\" : NumberLong(4)\n        },\n        \"readConcernMajorityWallTime\" : ISODate(\"2021-03-31T08:27:12.669Z\"),\n        \"appliedOpTime\" : {\n            \"ts\" : Timestamp(1617179232, 1),\n            \"t\" : NumberLong(4)\n        },\n        \"durableOpTime\" : {\n            \"ts\" : Timestamp(1617179232, 1),\n            \"t\" : NumberLong(4)\n        },\n        \"lastAppliedWallTime\" : ISODate(\"2021-03-31T08:27:12.669Z\"),\n        \"lastDurableWallTime\" : ISODate(\"2021-03-31T08:27:12.669Z\")\n    },\n    \"lastStableRecoveryTimestamp\" : Timestamp(1617179202, 1),\n    \"lastStableCheckpointTimestamp\" : Timestamp(1617179202, 1),\n    \"electionCandidateMetrics\" : {\n        \"lastElectionReason\" : \"priorityTakeover\",\n        \"lastElectionDate\" : ISODate(\"2021-03-31T08:26:12.634Z\"),\n        \"electionTerm\" : NumberLong(4),\n        \"lastCommittedOpTimeAtElection\" : {\n            \"ts\" : Timestamp(1617179171, 1),\n            \"t\" : NumberLong(3)\n        },\n        \"lastSeenOpTimeAtElection\" : {\n            \"ts\" : Timestamp(1617179171, 1),\n            \"t\" : NumberLong(3)\n        },\n        \"numVotesNeeded\" : 2,\n        \"priorityAtElection\" : 2,\n        \"electionTimeoutMillis\" : NumberLong(10000),\n        \"priorPrimaryMemberId\" : 1,\n        \"numCatchUpOps\" : NumberLong(0),\n        \"newTermStartDate\" : ISODate(\"2021-03-31T08:26:12.667Z\"),\n        \"wMajorityWriteAvailabilityDate\" : ISODate(\"2021-03-31T08:26:14.696Z\")\n    },\n    \"electionParticipantMetrics\" : {\n        \"votedForCandidate\" : true,\n        \"electionTerm\" : NumberLong(3),\n        \"lastVoteDate\" : ISODate(\"2021-03-31T08:26:01.824Z\"),\n        \"electionCandidateMemberId\" : 1,\n        \"voteReason\" : \"\",\n        \"lastAppliedOpTimeAtElection\" : {\n            \"ts\" : Timestamp(1617177014, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"maxAppliedOpTimeInSet\" : {\n            \"ts\" : Timestamp(1617177014, 1),\n            \"t\" : NumberLong(1)\n        },\n        \"priorityAtElection\" : 2\n    },\n    \"members\" : [\n        {\n            \"_id\" : 0,\n            \"name\" : \"192.168.56.175:27018\",\n            \"health\" : 1,\n            \"state\" : 1,\n            \"stateStr\" : \"PRIMARY\",\n            \"uptime\" : 97,\n            \"optime\" : {\n                \"ts\" : Timestamp(1617179232, 1),\n                \"t\" : NumberLong(4)\n            },\n            \"optimeDate\" : ISODate(\"2021-03-31T08:27:12Z\"),\n            \"syncingTo\" : \"\",\n            \"syncSourceHost\" : \"\",\n            \"syncSourceId\" : -1,\n            \"infoMessage\" : \"\",\n            \"electionTime\" : Timestamp(1617179172, 1),\n            \"electionDate\" : ISODate(\"2021-03-31T08:26:12Z\"),\n            \"configVersion\" : 1,\n            \"self\" : true,\n            \"lastHeartbeatMessage\" : \"\"\n        },\n        {\n            \"_id\" : 1,\n            \"name\" : \"192.168.56.176:27018\",\n            \"health\" : 1,\n            \"state\" : 2,\n            \"stateStr\" : \"SECONDARY\",\n            \"uptime\" : 91,\n            \"optime\" : {\n                \"ts\" : Timestamp(1617179232, 1),\n                \"t\" : NumberLong(4)\n            },\n            \"optimeDurable\" : {\n                \"ts\" : Timestamp(1617179232, 1),\n                \"t\" : NumberLong(4)\n            },\n            \"optimeDate\" : ISODate(\"2021-03-31T08:27:12Z\"),\n            \"optimeDurableDate\" : ISODate(\"2021-03-31T08:27:12Z\"),\n            \"lastHeartbeat\" : ISODate(\"2021-03-31T08:27:20.698Z\"),\n            \"lastHeartbeatRecv\" : ISODate(\"2021-03-31T08:27:20.867Z\"),\n            \"pingMs\" : NumberLong(0),\n            \"lastHeartbeatMessage\" : \"\",\n            \"syncingTo\" : \"192.168.56.175:27018\",\n            \"syncSourceHost\" : \"192.168.56.175:27018\",\n            \"syncSourceId\" : 0,\n            \"infoMessage\" : \"\",\n            \"configVersion\" : 1\n        },\n        {\n            \"_id\" : 2,\n            \"name\" : \"192.168.56.182:27018\",\n            \"health\" : 1,\n            \"state\" : 7,\n            \"stateStr\" : \"ARBITER\",\n            \"uptime\" : 87,\n            \"lastHeartbeat\" : ISODate(\"2021-03-31T08:27:20.698Z\"),\n            \"lastHeartbeatRecv\" : ISODate(\"2021-03-31T08:27:20.797Z\"),\n            \"pingMs\" : NumberLong(0),\n            \"lastHeartbeatMessage\" : \"\",\n            \"syncingTo\" : \"\",\n            \"syncSourceHost\" : \"\",\n            \"syncSourceId\" : -1,\n            \"infoMessage\" : \"\",\n            \"configVersion\" : 1\n        }\n    ],\n    \"ok\" : 1,\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1617179232, 1),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"uXViIfbqr0npQMxp/pJ4jAO/GfY=\"),\n            \"keyId\" : NumberLong(\"6945647482743291907\")\n        }\n    },\n    \"operationTime\" : Timestamp(1617179232, 1)\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-vnf8bo6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-vnf8bo6"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-2e4qxkg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-2e4qxkg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "         "
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "MongoDB启用认证后，不仅客户端连接需要认证，服务内部不同节点之间，也是需要相互认证的，如果仅仅是启用认证方式，不设定服务内部之间的认证参数，则服务内部各节点之间是无法成功通信的，就造成了当前登录节点一直是恢复中的状态，而其他节点应该是 not reachable的状态，所以会显示为 not reachable/healthy"
				}
			]
		},
		{
			"ID": "20221205013031-83qsvs8",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-83qsvs8"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "mongodb提供了两种方式：一种是 keyfile的方式，一种是证书方式，详细官方介绍 https://docs.mongodb.com/manual/core/security-internal-authentication/"
				}
			]
		},
		{
			"ID": "20221205013031-76ahz38",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-76ahz38"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "四、分片集群部署"
				}
			]
		},
		{
			"ID": "20221205013031-587v5oq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-587v5oq"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1、分片集群架构图"
				}
			]
		},
		{
			"ID": "20221205013031-69cnxja",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-69cnxja"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "https://img2020.cnblogs.com/blog/1188655/202104/1188655-20210407155049633-1912172619.png"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-zs7uqms",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-zs7uqms"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2、分片技术介绍"
				}
			]
		},
		{
			"ID": "20221205013031-2blb707",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-2blb707"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "         ** 分片（sharding）是MongoDB用来将大型集合分割到不同服务器（或者说一个集群）上所采用的方法。MongoDB的最大特点在于它几乎能自动完成所有事情，只要告诉MongoDB要分配数据，它就能自动维护数据在不同服务器之间的均衡。MongoDB分片集群，英文名称为： Sharded Cluster旨在通过横向扩展，来提高数据吞吐性能、增大数据存储量。分片集群由三个组件：“mongos”, “config server”, “shard” 组成。**"
				}
			]
		},
		{
			"ID": "20221205013031-paehx9c",
			"Type": "NodeList",
			"ListData": {},
			"Properties": {
				"id": "20221205013031-paehx9c"
			},
			"Children": [
				{
					"ID": "20221205013031-e955b1n",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-e955b1n"
					},
					"Children": [
						{
							"ID": "20221205013031-ar3x8ue",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-ar3x8ue"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "mongos ：mongos充当查询路由器，在客户端应用程序和分片群集之间提供接口。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-tvz02g2",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-tvz02g2"
					},
					"Children": [
						{
							"ID": "20221205013031-63g2ha0",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-63g2ha0"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "config server：配置服务器存储集群的元数据和配置设置。从MongoDB 3.4开始，配置服务器必须部署为副本集（CSRS）。"
								}
							]
						}
					]
				},
				{
					"ID": "20221205013031-zc69hjg",
					"Type": "NodeListItem",
					"ListData": {
						"BulletChar": 42,
						"Marker": "Kg=="
					},
					"Properties": {
						"id": "20221205013031-zc69hjg"
					},
					"Children": [
						{
							"ID": "20221205013031-oxm6y9b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20221205013031-oxm6y9b"
							},
							"Children": [
								{
									"Type": "NodeTextMark",
									"TextMarkType": "strong",
									"TextMarkTextContent": "shard：真正的数据存储位置，以chunk为单位存数据，每个shard都可以部署为副本集。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-gk8ikt1",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-gk8ikt1"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "3、config server服务部署"
				}
			]
		},
		{
			"ID": "20221205013031-ome351x",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-ome351x"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "①创建所需目录"
				}
			]
		},
		{
			"ID": "20221205013031-cr1r6gx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-cr1r6gx"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-huzb9xi",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-huzb9xi"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir -p /app/mongodb-cluster/{mongos,config,shard1,shard2,shard3}/{data,log,conf}\n\n├── config\n│   ├── conf\n│   ├── data\n│   └── log\n├── mongos\n│   ├── conf\n│   ├── data\n│   └── log\n├── shard1\n│   ├── conf\n│   ├── data\n│   └── log\n├── shard2\n│   ├── conf\n│   ├── data\n│   └── log\n└── shard3\n    ├── conf\n    ├── data\n    └── log\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-lbnfavr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-lbnfavr"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-spwfhog",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-spwfhog"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②分片集群各部分组件搭建顺序"
				}
			]
		},
		{
			"ID": "20221205013031-afx3n7b",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-afx3n7b"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "“config server” -\u003e 2. “shard” -\u003e 3. “mongos”\n#启动服务顺序一样\n\"config server\"由三台主机组成，每台主机上运行一个mongod进程，三台主机的mongod组成一个副本集。\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-mpxfy6q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-mpxfy6q"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③创建MongoDB配置文件、日志文件"
				}
			]
		},
		{
			"ID": "20221205013031-hdkdeu2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-hdkdeu2"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "touch /app/mongodb-cluster/{mongos,config,shard1,shard2,shard3}/conf/mongodb.conf\ntouch /app/mongodb-cluster/{mongos,config,shard1,shard2,shard3}/log/mongodb.log\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-6wzjign",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-6wzjign"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④config server配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-0qmec0w",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-0qmec0w"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-mj9g2g4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-mj9g2g4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "port=27017\n#以后台方式运行\nfork=true\n#数据库日志存放目录\nlogpath=/app/mongodb-cluster/config/log/mongodb.log\n#数据库存放目录\ndbpath=/app/mongodb-cluster/config/data\n#以追加的方式记录日志\nlogappend=true\n#replica set的名字\nreplSet=rs-config\n#必须配置\nconfigsvr = true\n#为每一个数据库按照数据库名建立文件夹存放\ndirectoryperdb=true\n#mongodb操作日志文件的最大大小。单位为Mb，默认为硬盘剩余空间的5%\noplogSize=10000\n#数据库数据存放目录\n#开启用户认证true\nauth=false\n#过滤一些无用的日志信息，若需要调试使用请设置为false\nquiet=true\n#auth=true\n##mongodb所绑定的ip地址\nbind_ip = 0.0.0.0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-k7pnznh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-k7pnznh"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-05vz49e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-05vz49e"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "三台主机的mongodb.conf配置相同,分发上面配置文件到节点"
				}
			]
		},
		{
			"ID": "20221205013031-la2rrq5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-la2rrq5"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp -rp /app/mongodb-cluster 192.168.56.176:/app/\nscp -rp /app/mongodb-cluster 192.168.56.182:/app/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-eo5tfgh",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-eo5tfgh"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "⑤启动config server(三个节点)"
				}
			]
		},
		{
			"ID": "20221205013031-7vbw3pp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-7vbw3pp"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/config/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-f0d2tzj",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-f0d2tzj"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "⑥初始化config server副本集"
				}
			]
		},
		{
			"ID": "20221205013031-zkk65dk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-zkk65dk"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "任意节点登录执行"
				}
			]
		},
		{
			"ID": "20221205013031-ivt2fib",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-ivt2fib"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-c7kw7mf",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-c7kw7mf"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27017\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-nhtf2qz",
			"Type": "NodeBlockquote",
			"Properties": {
				"id": "20221205013031-nhtf2qz"
			},
			"Children": [
				{
					"Type": "NodeBlockquoteMarker",
					"Data": "\u003e"
				},
				{
					"ID": "20221205013031-8hukcxb",
					"Type": "NodeParagraph",
					"Properties": {
						"id": "20221205013031-8hukcxb"
					},
					"Children": [
						{
							"Type": "NodeText",
							"Data": "rs.initiate(\n...   {\n...      \"_id\" : \"rs-config\",\n...      \"members\" : [\n...        {\"_id\" : 0, \"host\" : \"192.168.56.175:27017\"},\n...        {\"_id\" : 1, \"host\" : \"192.168.56.176:27017\"},\n...        {\"_id\" : 2, \"host\" : \"192.168.56.182:27017\"}\n...      ]\n...   }\n... )"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-s539ing",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-s539ing"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "#以下为输出\n{\n\t\"ok\" : 1,\n\t\"$gleStats\" : {\n\t\t\"lastOpTime\" : Timestamp(1617785674, 1),\n\t\t\"electionId\" : ObjectId(\"000000000000000000000000\")\n\t},\n\t\"lastCommittedOpTime\" : Timestamp(0, 0)\n}"
				}
			]
		},
		{
			"ID": "20221205013031-z4ut28c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-z4ut28c"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-oiwekhw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-oiwekhw"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "出现 ok 1 则成功"
				}
			]
		},
		{
			"ID": "20221205013031-10y6i4k",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-10y6i4k"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4、shard分片服务部署"
				}
			]
		},
		{
			"ID": "20221205013031-e9vvx1c",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-e9vvx1c"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①创建shard1配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-3avuxbb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-3avuxbb"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-lscdtam",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-lscdtam"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "port=27018\n#以后台方式运行\nfork=true\n#数据库日志存放目录\nlogpath=/app/mongodb-cluster/shard1/log/mongodb.log\n#数据库存放目录\ndbpath=/app/mongodb-cluster/shard1/data\n#以追加的方式记录日志\nlogappend=true\n#replica set的名字\nreplSet=rs-shard1\n#必须配置\nshardsvr=true\n#为每一个数据库按照数据库名建立文件夹存放\ndirectoryperdb=true\n#mongodb操作日志文件的最大大小。单位为Mb，默认为硬盘剩余空间的5%\noplogSize=10000\n#数据库数据存放目录\n#开启用户认证true\nauth=false\n#过滤一些无用的日志信息，若需要调试使用请设置为false\nquiet=true\n#auth=true\n##mongodb所绑定的ip地址\nbind_ip = 0.0.0.0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-djtxqy7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-djtxqy7"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-qlqw4tn",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-qlqw4tn"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②分发配置文件到节点"
				}
			]
		},
		{
			"ID": "20221205013031-z9cuebs",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-z9cuebs"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp mongodb.conf 192.168.56.176:/app/mongodb-cluster/shard1/conf/\nscp mongodb.conf 192.168.56.182:/app/mongodb-cluster/shard1/conf/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-tlgw5f5",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-tlgw5f5"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③启动三台服务器的shard1 server"
				}
			]
		},
		{
			"ID": "20221205013031-cg3fta4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-cg3fta4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/shard1/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-86nzz77",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-86nzz77"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "任选分片内的一个节点，执行初始化命令"
				}
			]
		},
		{
			"ID": "20221205013031-z8wzmkt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-z8wzmkt"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-6mi6ipz",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-6mi6ipz"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27018\n\n\u003e rs.initiate(\n...   {\n...      \"_id\" : \"rs-shard1\", \n...      \"members\" : [\n...        {\"_id\" : 0, \"host\" : \"192.168.56.175:27018\"},\n...        {\"_id\" : 1, \"host\" : \"192.168.56.176:27018\"},\n...        {\"_id\" : 2, \"host\" : \"192.168.56.182:27018\"}\n...      ]\n...   }\n... )\n#输出结果\n{ \"ok\" : 1 }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-ssb4wbi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-ssb4wbi"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-ep7udr0",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-ep7udr0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④创建shard2配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-awef4y3",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-awef4y3"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-q1yev9d",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-q1yev9d"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "port=27019\n#以后台方式运行\nfork=true\n#数据库日志存放目录\nlogpath=/app/mongodb-cluster/shard2/log/mongodb.log\n#数据库存放目录\ndbpath=/app/mongodb-cluster/shard2/data\n#以追加的方式记录日志\nlogappend=true\n#replica set的名字\nreplSet=rs-shard2\n#必须配置\nshardsvr=true\n#为每一个数据库按照数据库名建立文件夹存放\ndirectoryperdb=true\n#mongodb操作日志文件的最大大小。单位为Mb，默认为硬盘剩余空间的5%\noplogSize=10000\n#数据库数据存放目录\n#开启用户认证true\nauth=false\n#过滤一些无用的日志信息，若需要调试使用请设置为false\nquiet=true\n#auth=true\n##mongodb所绑定的ip地址\nbind_ip = 0.0.0.0\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-yzi1rvl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-yzi1rvl"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-tlnbxma",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-tlnbxma"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "分发配置文件到节点"
				}
			]
		},
		{
			"ID": "20221205013031-9k1wevo",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-9k1wevo"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp mongodb.conf 192.168.56.176:/app/mongodb-cluster/shard2/conf/\nscp mongodb.conf 192.168.56.182:/app/mongodb-cluster/shard2/conf/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-ihq9vyl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-ihq9vyl"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "启动三台服务器的shard2 server"
				}
			]
		},
		{
			"ID": "20221205013031-4a7ewp5",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-4a7ewp5"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/shard2/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-iqyaq5z",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-iqyaq5z"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "任选分片内的一个节点，执行初始化命令"
				}
			]
		},
		{
			"ID": "20221205013031-dxwa0kx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-dxwa0kx"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-4ywyrt1",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-4ywyrt1"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27019\n\n\u003e rs.initiate(\n...   {\n...      \"_id\" : \"rs-shard2\", \n...      \"members\" : [\n...        {\"_id\" : 0, \"host\" : \"192.168.56.175:27019\"},\n...        {\"_id\" : 1, \"host\" : \"192.168.56.176:27019\"},\n...        {\"_id\" : 2, \"host\" : \"192.168.56.182:27019\"}\n...      ]\n...   }\n... )\n#输出结果\n{ \"ok\" : 1 }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-5nk556f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-5nk556f"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-8jlp8n3",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-8jlp8n3"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "5、mongos服务部署"
				}
			]
		},
		{
			"ID": "20221205013031-vzhh02j",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-vzhh02j"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①创建mongos配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-g9gfvub",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-g9gfvub"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-u7cexg4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-u7cexg4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "port=27020\n#以后台方式运行\nfork=true\n#数据库日志存放目录\nlogpath=/app/mongodb-cluster/mongos/log/mongodb.log\n#以追加的方式记录日志\nlogappend=true\n#Mongos路由配置\nconfigdb =rs-config/192.168.29.175:27017,192.168.29.176:27017,192.168.29.182:27017\n#过滤一些无用的日志信息，若需要调试使用请设置为false\nquiet=true\n##mongodb所绑定的ip地址\nbind_ip = 0.0.0.0\n# max connections\nmaxConns=200\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-hg697kg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-hg697kg"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-959m0vp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-959m0vp"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "mongos可以为1个，也可以为多个。配置了三个节点，每个mongos配置相对独立，配置文件相同"
				}
			]
		},
		{
			"ID": "20221205013031-8ha7uf1",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-8ha7uf1"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②分发配置文件"
				}
			]
		},
		{
			"ID": "20221205013031-jdvheo7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-jdvheo7"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "scp mongodb.conf 192.168.56.176:/app/mongodb-cluster/mongos/conf/\nscp mongodb.conf 192.168.56.182:/app/mongodb-cluster/mongos/conf/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-d1poo8f",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-d1poo8f"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③启动mongos"
				}
			]
		},
		{
			"ID": "20221205013031-4n7mrjb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-4n7mrjb"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongos -f /app/mongodb-cluster/mongos/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-mt0u2h7",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-mt0u2h7"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④添加分片"
				}
			]
		},
		{
			"ID": "20221205013031-wpfa4yt",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-wpfa4yt"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "连接任意一个mongos，添加分片信息"
				}
			]
		},
		{
			"ID": "20221205013031-hgqwepk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-hgqwepk"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27020\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-hnjesht",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-hnjesht"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-il9tyny",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-il9tyny"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e use admin\nswitched to db admin\nmongos\u003e sh.addShard(\"rs-shard1/192.168.56.175:27018,192.168.56.176:27018,192.168.56.182:27018\")\n{\n    \"shardAdded\" : \"rs-shard1\",\n    \"ok\" : 1,\n    \"operationTime\" : Timestamp(1618540303, 8),\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1618540303, 8),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),\n            \"keyId\" : NumberLong(0)\n        }\n    }\n}\nmongos\u003e sh.addShard(\"rs-shard2/192.168.56.175:27019,192.168.56.175:27019,192.168.56.182:27019\")\n{\n    \"shardAdded\" : \"rs-shard2\",\n    \"ok\" : 1,\n    \"operationTime\" : Timestamp(1618540329, 2),\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1618540329, 2),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),\n            \"keyId\" : NumberLong(0)\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-g3docvz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-g3docvz"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-lahusjg",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-lahusjg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "⑤查看集群分片状态"
				}
			]
		},
		{
			"ID": "20221205013031-5ysd4tg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-5ysd4tg"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-pu8z1cg",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-pu8z1cg"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e sh.status()\n--- Sharding Status --- \n  sharding version: {\n      \"_id\" : 1,\n      \"minCompatibleVersion\" : 5,\n      \"currentVersion\" : 6,\n      \"clusterId\" : ObjectId(\"606d735537ca11c12cc9925c\")\n  }\n  shards:\n        {  \"_id\" : \"rs-shard1\",  \"host\" : \"rs-shard1/192.168.56.175:27018,192.168.56.176:27018,192.168.56.182:27018\",  \"state\" : 1 }\n        {  \"_id\" : \"rs-shard2\",  \"host\" : \"rs-shard2/192.168.56.175:27019,192.168.56.176:27019,192.168.56.182:27019\",  \"state\" : 1 }\n  active mongoses:\n        \"4.2.13\" : 3\n  autosplit:\n        Currently enabled: yes\n  balancer:\n        Currently enabled:  yes\n        Currently running:  no\n        Failed balancer rounds in last 5 attempts:  0\n        Migration Results for the last 24 hours: \n                No recent migrations\n  databases:\n        {  \"_id\" : \"config\",  \"primary\" : \"config\",  \"partitioned\" : true }\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-lr7f9vw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-lr7f9vw"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-aiy89lf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-aiy89lf"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "至此，一个基本的\u0026quot;sharded cluster\u0026quot;，就已经搭建完成"
				}
			]
		},
		{
			"ID": "20221205013031-um286xs",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-um286xs"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "6、使用分片"
				}
			]
		},
		{
			"ID": "20221205013031-ixv5ew9",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-ixv5ew9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①开启数据库分片"
				}
			]
		},
		{
			"ID": "20221205013031-l3aq68l",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-l3aq68l"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-46xeisd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-46xeisd"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e use admin\nswitched to db admin\nmongos\u003e sh.enableSharding(\"test\") #以test库为例\n{\n    \"ok\" : 1,\n    \"operationTime\" : Timestamp(1618540808, 6),\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1618540808, 7),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),\n            \"keyId\" : NumberLong(0)\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-g26woot",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-g26woot"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-9rcnu9u",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-9rcnu9u"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②开启集合分片"
				}
			]
		},
		{
			"ID": "20221205013031-uwcns3f",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-uwcns3f"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-oi99kb2",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-oi99kb2"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e sh.shardCollection(\"test.coll\", {\"name\" : \"hashed\"}) #以集合test.coll为例\n{\n    \"collectionsharded\" : \"test.coll\",\n    \"collectionUUID\" : UUID(\"9263ed96-7b4f-49ca-8351-9f8f990375d6\"),\n    \"ok\" : 1,\n    \"operationTime\" : Timestamp(1618540982, 54),\n    \"$clusterTime\" : {\n        \"clusterTime\" : Timestamp(1618540982, 54),\n        \"signature\" : {\n            \"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),\n            \"keyId\" : NumberLong(0)\n        }\n    }\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-9u1ovec",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-9u1ovec"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-v0zuqnn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-v0zuqnn"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "说明："
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "(1) 第一个参数为集合的完整namespace名称"
				},
				{
					"Type": "NodeText",
					"Data": "\n"
				},
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "(2) 第二个参数为片键，指定根据哪个字段进行分片"
				}
			]
		},
		{
			"ID": "20221205013031-lm1hb1a",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-lm1hb1a"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③插入数据验证数据分片"
				}
			]
		},
		{
			"ID": "20221205013031-ds5vgwm",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-ds5vgwm"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "use test\n\nfor (var i = 1; i \u003c= 100000; i++){\n  db.coll.insert({\"id\" : i, \"name\" : \"name\" + i});\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-b45ufaf",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-b45ufaf"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④查看状态验证"
				}
			]
		},
		{
			"ID": "20221205013031-qjufn3t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-qjufn3t"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-bn298sp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-bn298sp"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e sh.status()\n--- Sharding Status --- \n  sharding version: {\n      \"_id\" : 1,\n      \"minCompatibleVersion\" : 5,\n      \"currentVersion\" : 6,\n      \"clusterId\" : ObjectId(\"606d735537ca11c12cc9925c\")\n  }\n  shards:\n        {  \"_id\" : \"rs-shard1\",  \"host\" : \"rs-shard1/192.168.56.175:27018,192.168.56.176:27018,192.168.56.182:27018\",  \"state\" : 1 }\n        {  \"_id\" : \"rs-shard2\",  \"host\" : \"rs-shard2/192.168.56.175:27019,192.168.56.176:27019,192.168.56.182:27019\",  \"state\" : 1 }\n  active mongoses:\n        \"4.2.13\" : 3\n  autosplit:\n        Currently enabled: yes\n  balancer:\n        Currently enabled:  yes\n        Currently running:  no\n        Failed balancer rounds in last 5 attempts:  0\n        Migration Results for the last 24 hours: \n                512 : Success\n  databases:\n        {  \"_id\" : \"config\",  \"primary\" : \"config\",  \"partitioned\" : true }\n                config.system.sessions\n                        shard key: { \"_id\" : 1 }\n                        unique: false\n                        balancing: true\n                        chunks:\n                                rs-shard1    512\n                                rs-shard2    512\n                        too many chunks to print, use verbose if you want to force print\n        {  \"_id\" : \"test\",  \"primary\" : \"rs-shard2\",  \"partitioned\" : true,  \"version\" : {  \"uuid\" : UUID(\"44ca8ee0-262b-475a-9a98-f94fe37488c4\"),  \"lastMod\" : 1 } }\n                test.coll\n                        shard key: { \"name\" : \"hashed\" }\n                        unique: false\n                        balancing: true\n                        chunks:\n                                rs-shard1    2\n                                rs-shard2    2\n                        { \"name\" : { \"$minKey\" : 1 } } --\u003e\u003e { \"name\" : NumberLong(\"-4611686018427387902\") } on : rs-shard1 Timestamp(1, 0) \n                        { \"name\" : NumberLong(\"-4611686018427387902\") } --\u003e\u003e { \"name\" : NumberLong(0) } on : rs-shard1 Timestamp(1, 1) \n                        { \"name\" : NumberLong(0) } --\u003e\u003e { \"name\" : NumberLong(\"4611686018427387902\") } on : rs-shard2 Timestamp(1, 2) \n                        { \"name\" : NumberLong(\"4611686018427387902\") } --\u003e\u003e { \"name\" : { \"$maxKey\" : 1 } } on : rs-shard2 Timestamp(1, 3) \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-r67a8fa",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-r67a8fa"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-psspfvi",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-psspfvi"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "说明：分片1和分片2各有两个chunks分片，数据已均匀分布在两个分片上。"
				}
			]
		},
		{
			"ID": "20221205013031-wlxrtdg",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-wlxrtdg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "五、添加集群认证"
				}
			]
		},
		{
			"ID": "20221205013031-e11cgzk",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-e11cgzk"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "1、生成并分发密钥文件keyfile"
				}
			]
		},
		{
			"ID": "20221205013031-9kyjxke",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-9kyjxke"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-3vo9haw",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-3vo9haw"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mkdir /app/mongodb-cluster/key -p\nopenssl rand -base64 745 \u003e /app/mongodb-cluster/key/mongodb-keyfile\nchmod 600 /app/mongodb-cluster/key/mongodb-keyfile \n\nscp -rp /app/mongodb-cluster/key 192.168.56.176:/app/mongodb-cluster/\nscp -rp /app/mongodb-cluster/key 192.168.56.182:/app/mongodb-cluster/\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-ih5bfsz",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-ih5bfsz"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-41v5n7j",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-41v5n7j"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "2、添加超级管理员用户"
				}
			]
		},
		{
			"ID": "20221205013031-0punsss",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-0punsss"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "连接任意一个mongos，创建超级管理员用户"
				}
			]
		},
		{
			"ID": "20221205013031-dqzdomy",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-dqzdomy"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-whd710h",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-whd710h"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "db.createUser(\n    {\n        user: \"root\",\n        pwd: \"root\",\n        roles: [{role : \"root\", db : \"admin\"}]\n    }\n)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-c7yuzis",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-c7yuzis"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-z0dze9n",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-z0dze9n"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "输出信息："
				}
			]
		},
		{
			"ID": "20221205013031-7ibtnto",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-7ibtnto"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-omc60i7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-omc60i7"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "mongos\u003e use admin\nswitched to db admin\nmongos\u003e db.createUser(\n...     {\n...         user: \"root\",\n...         pwd: \"root\",\n...         roles: [{role : \"root\", db : \"admin\"}]\n...     }\n... )\nSuccessfully added user: {\n    \"user\" : \"root\",\n    \"roles\" : [\n        {\n            \"role\" : \"root\",\n            \"db\" : \"admin\"\n        }\n    ]\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-s0v3136",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-s0v3136"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-jps972j",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-jps972j"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "在\u0026quot;mongos\u0026quot;上添加用户，用户信息实际保存在\u0026quot;config server\u0026quot;上，\u0026quot;mongos\u0026quot;本身不存储任何数据，包括用户信息。然而，\u0026quot;mongos\u0026quot;上创建的用户，是不会自动添加到\u0026quot;shard\u0026quot;分片服务器上的。为了以后方便维护shard分片服务器，分别登录到每个分片服务器的\u0026quot;primary\u0026quot;节点，添加管理员用户。"
				}
			]
		},
		{
			"ID": "20221205013031-2d8ios9",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-2d8ios9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "3、为分片集群创建账号"
				}
			]
		},
		{
			"ID": "20221205013031-r0883jk",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-r0883jk"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①shard1配置"
				}
			]
		},
		{
			"ID": "20221205013031-4222u1t",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-4222u1t"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-gl55pm4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-gl55pm4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "use admin\n\ndb.createUser(\n  {\n    user: \"admin\",\n    pwd: \"admin\",\n    roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ]\n  }\n)\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-p00vqqn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-p00vqqn"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-51qjat7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-51qjat7"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "输出信息："
				}
			]
		},
		{
			"ID": "20221205013031-kxmlfap",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-kxmlfap"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-vmu6oc0",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-vmu6oc0"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27018\n\nrs-shard1:PRIMARY\u003e use admin\nswitched to db admin\nrs-shard1:PRIMARY\u003e db.createUser(\n...   {\n...     user: \"admin\",\n...     pwd: \"admin\",\n...     roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ]\n...   }\n... )\nSuccessfully added user: {\n    \"user\" : \"admin\",\n    \"roles\" : [\n        {\n            \"role\" : \"userAdminAnyDatabase\",\n            \"db\" : \"admin\"\n        }\n    ]\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-42ls1nf",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-42ls1nf"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-q0ykht0",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-q0ykht0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②shard2配置"
				}
			]
		},
		{
			"ID": "20221205013031-68l501u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-68l501u"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-239x6zr",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-239x6zr"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongo 192.168.56.175:27019\n\nrs-shard2:PRIMARY\u003e use admin\nswitched to db admin\nrs-shard2:PRIMARY\u003e db.createUser(\n...   {\n...     user: \"admin\",\n...     pwd: \"admin\",\n...     roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ]\n...   }\n... )\nSuccessfully added user: {\n    \"user\" : \"admin\",\n    \"roles\" : [\n        {\n            \"role\" : \"userAdminAnyDatabase\",\n            \"db\" : \"admin\"\n        }\n    ]\n}\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-bvc47s4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-bvc47s4"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-ez9s6kq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20221205013031-ez9s6kq"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "4、开启安全认证"
				}
			]
		},
		{
			"ID": "20221205013031-k5jte1i",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-k5jte1i"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "①修改mongos,config,shard1,shard2配置文件添加认证参数"
				}
			]
		},
		{
			"ID": "20221205013031-bfm5udn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-bfm5udn"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "auth = true\nkeyFile = /app/mongodb-cluster/key/mongodb-keyfile\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-imbg159",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-imbg159"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "vim config/conf/mongodb.conf \nvim mongos/conf/mongodb.conf #mongos不加参数auth=true\nvim shard1/conf/mongodb.conf \nvim shard2/conf/mongodb.conf \n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-e8lh60n",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-e8lh60n"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "②停止所有mongodb程序"
				}
			]
		},
		{
			"ID": "20221205013031-rxb8tlk",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-rxb8tlk"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "pkill mongod \u0026\u0026 pkill mongos\n#杀不掉就多杀几次\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-yuhkf78",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-yuhkf78"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "③启动服务"
				}
			]
		},
		{
			"ID": "20221205013031-zv2utmc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-zv2utmc"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": " 启动顺序：1、config server -\u003e shard1、shard2 -\u003e mongos\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-si4qgd4",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-si4qgd4"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/config/conf/mongodb.conf\n/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/shard1/conf/mongodb.conf\n/app/mongodb-cluster/bin/mongod -f /app/mongodb-cluster/shard2/conf/mongodb.conf\n/app/mongodb-cluster/bin/mongos -f /app/mongodb-cluster/mongos/conf/mongodb.conf\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-oqq8evw",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20221205013031-oqq8evw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "④验证用户访问"
				}
			]
		},
		{
			"ID": "20221205013031-tdmu8rq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-tdmu8rq"
			},
			"Children": [
				{
					"Type": "NodeTextMark",
					"TextMarkType": "strong",
					"TextMarkTextContent": "任意连接一个mongos"
				}
			]
		},
		{
			"ID": "20221205013031-1qy6chl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-1qy6chl"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		},
		{
			"ID": "20221205013031-n9yy8yv",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"Properties": {
				"id": "20221205013031-n9yy8yv"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```"
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "[root@k8s-node1 ~]# /app/mongodb-cluster/bin/mongo --port 27020 -u \"root\" -p \"root\" --authenticationDatabase \"admin\"\nMongoDB shell version v4.2.13\nconnecting to: mongodb://127.0.0.1:27020/?authSource=admin\u0026compressors=disabled\u0026gssapiServiceName=mongodb\nImplicit session: session { \"id\" : UUID(\"699a4543-3d62-421f-bbb3-32f1f250a9d4\") }\nMongoDB server version: 4.2.13\nServer has startup warnings: \n2021-04-16T11:45:38.158+0800 I  CONTROL  [main] ** WARNING: You are running this process as the root user, which is not recommended.\n2021-04-16T11:45:38.158+0800 I  CONTROL  [main] \nmongos\u003e show dbs;\nadmin   0.000GB\nconfig  0.003GB\ntest    0.005GB\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```"
				}
			]
		},
		{
			"ID": "20221205013031-3lmvxzp",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20221205013031-3lmvxzp"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Data": "span",
					"Children": [
						{
							"Type": "NodeBang"
						},
						{
							"Type": "NodeOpenBracket"
						},
						{
							"Type": "NodeLinkText",
							"Data": "复制代码"
						},
						{
							"Type": "NodeCloseBracket"
						},
						{
							"Type": "NodeOpenParen"
						},
						{
							"Type": "NodeLinkDest",
							"Data": "assets/copycode-20221205013031-wukxmqi.gif"
						},
						{
							"Type": "NodeCloseParen"
						}
					]
				}
			]
		}
	]
}